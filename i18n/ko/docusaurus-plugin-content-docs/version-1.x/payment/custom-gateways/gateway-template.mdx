---
title: 게이트웨이 템플릿
description: 나만의 맞춤형 WooCommerce POS 결제 게이트웨이 만들기
---

# 게이트웨이 템플릿

WooCommerce 게이트웨이 템플릿은 WooCommerce POS를 위한 맞춤형 결제 게이트웨이를 만드는 출발점을 제공합니다. 이 템플릿에는 완전히 기능적인 결제 게이트웨이를 구축하는 데 필요한 모든 상용구 코드와 구조가 포함되어 있습니다.

## 기능

- **완전한 템플릿**: 모든 필요한 메서드가 있는 즉시 사용 가능한 게이트웨이 구조
- **POS 통합**: WooCommerce POS와의 호환성을 위해 사전 구성됨
- **자동화된 설정**: 스크립트 기반 템플릿 맞춤화
- **모범 사례**: WordPress 및 WooCommerce 코딩 표준 준수
- **확장 가능**: 특정 결제 제공업체에 맞게 쉽게 수정 및 확장 가능

## 시작하기

### 옵션 1: 자동화된 템플릿 생성

템플릿에는 특정 게이트웨이에 맞게 자동으로 템플릿을 맞춤화하는 스크립트가 포함되어 있습니다:

1. **저장소 복제**:
   ```bash
   git clone https://github.com/wcpos/woocommerce-gateway-template.git
   cd woocommerce-gateway-template
   ```

2. **설정 스크립트 실행**:
   ```bash
   ./create-gateway.sh
   ```

3. **프롬프트 따라하기**:
   - 게이트웨이 이름 입력 (예: "내 결제 게이트웨이")
   - 게이트웨이 슬러그 입력 (예: "my-payment")
   - 설명 제공
   - 스크립트가 사용자 정의된 플러그인 생성

### 옵션 2: 수동 템플릿 사용

수동 맞춤화를 선호하는 경우:

1. **템플릿 다운로드**:
   - [게이트웨이 템플릿 저장소](https://github.com/wcpos/woocommerce-gateway-template) 방문
   - 최신 릴리스 다운로드 또는 저장소 복제

2. **템플릿 맞춤화**:
   - `{{GATEWAY_NAME}}` 게이트웨이의 표시 이름으로 바꾸기
   - `{{GATEWAY_SLUG}}` 게이트웨이의 고유 식별자로 바꾸기
   - `{{GATEWAY_DESCRIPTION}}`을 게이트웨이 설명으로 바꾸기

3. **파일 이름 바꾸기**:
   - `wcpos-{{GATEWAY_SLUG}}.php`를 게이트웨이 슬러그에 맞게 이름 변경
   - 파일 헤더 및 플러그인 정보 업데이트

## 템플릿 구조

### 메인 플러그인 파일

메인 플러그인 파일(`wcpos-{{GATEWAY_SLUG}}.php`)에는 다음이 포함됩니다:

- **플러그인 헤더**: WordPress 플러그인 정보
- **게이트웨이 클래스**: 메인 결제 게이트웨이 클래스
- **초기화**: 플러그인 설정 및 훅
- **통합**: WooCommerce POS 호환성

### 주요 구성 요소

**게이트웨이 클래스 구조**:
```php
class WCPOS_Gateway_{{GATEWAY_CLASS}} extends WC_Payment_Gateway {
    // 게이트웨이 구성
    public function __construct() { }
    
    // 관리자 설정 양식
    public function init_form_fields() { }
    
    // 결제 처리 (주요 로직 위치)
    public function process_payment( $order_id ) { }
    
    // POS 전용 메서드
    public function payment_fields() { }
}
```

## 맞춤화 가이드

### 기본 구성

1. **게이트웨이 정보**:
   ```php
   $this->id = 'your_gateway_id';
   $this->title = '귀하의 게이트웨이 이름';
   $this->description = '고객을 위한 게이트웨이 설명';
   $this->method_title = '관리자 제목';
   $this->method_description = '관리자 설명';
   ```

2. **지원되는 기능**:
   ```php
   $this->supports = array(
       'products',
       'refunds',
       'subscriptions', // 해당되는 경우
   );
   ```

### 결제 처리

핵심 결제 로직은 `process_payment()` 메서드에 들어갑니다:

```php
public function process_payment( $order_id ) {
    $order = wc_get_order( $order_id );
    
    // 결제 처리 로직
    // 예: API 호출, 유효성 검사 등
    
    if ( $payment_successful ) {
        $order->payment_complete();
        return array(
            'result' => 'success',
            'redirect' => $this->get_return_url( $order )
        );
    } else {
        wc_add_notice( '결제 실패', 'error' );
        return array(
            'result' => 'failure'
        );
    }
}
```

### 관리자 설정

`init_form_fields()`에서 관리자 설정 구성:

```php
public function init_form_fields() {
    $this->form_fields = array(
        'enabled' => array(
            'title' => '활성화/비활성화',
            'type' => 'checkbox',
            'label' => '게이트웨이 활성화',
            'default' => 'yes'
        ),
        'api_key' => array(
            'title' => 'API 키',
            'type' => 'text',
            'description' => 'API 키 입력',
            'default' => '',
            'desc_tip' => true,
        ),
        // 필요에 따라 더 많은 설정 추가
    );
}
```

### POS 통합

POS 전용 기능의 경우 다음을 구현:

```php
public function payment_fields() {
    // POS용 사용자 정의 결제 양식
    if ( is_admin() && isset( $_GET['page'] ) && $_GET['page'] === 'wc-pos' ) {
        // POS 전용 결제 필드
        echo '<div class="pos-payment-fields">';
        // 사용자 정의 POS 인터페이스
        echo '</div>';
    } else {
        // 표준 웹 체크아웃 필드
        parent::payment_fields();
    }
}
```

(나머지 부분도 동일한 방식으로 번역됩니다. 전체 문서를 한국어로 번역했습니다.)