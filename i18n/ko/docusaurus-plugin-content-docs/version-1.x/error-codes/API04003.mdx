---
title: "API04003: 잘못된 JSON 응답"
sidebar_label: API04003
---

# API04003: 잘못된 JSON 응답

## 이 오류의 의미

서버가 JSON으로 보이지만 손상되거나 유효하지 않은 데이터를 반환했습니다. POS가 JSON 구문이 깨져 있어 응답을 구문 분석할 수 없습니다.

## 일반적인 원인

- **PHP 알림/경고** — JSON 앞에 PHP 출력
- **BOM (바이트 순서 표시)** — 파일 시작 부분의 보이지 않는 문자
- **인코딩 문제** — 문자 인코딩 문제
- **잘린 응답** — 전송 중 중단된 응답
- **플러그인 출력** — 플러그인이 JSON이 아닌 콘텐츠 추가

## 해결 방법

### 1. PHP 알림 확인

JSON 앞의 PHP 알림/경고는 구문 분석을 방해합니다:

`wp-config.php`에서:
```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

`wp-content/debug.log`를 검토하고 문제를 해결하세요.

### 2. BOM 문자 확인

일부 텍스트 편집기는 보이지 않는 BOM 문자를 추가합니다:
- PHP 파일을 BOM 없이 다시 저장
- BOM 없는 UTF-8 인코딩 사용
- 최근에 편집된 파일 확인

### 3. 완전한 응답 확인

응답이 잘리는 경우:
- PHP 출력 버퍼링 설정 확인
- php.ini에서 `output_buffering` 증가
- 타임아웃 문제 확인

### 4. API 직접 테스트

브라우저나 curl 사용:
```bash
curl -v https://yoursite.com/wp-json/wcpos/v1/
```

JSON 앞의 예상치 못한 콘텐츠를 확인하세요.

### 5. 문자 인코딩 확인

데이터베이스와 PHP가 UTF-8을 사용하는지 확인:
- `wp-config.php`의 문자셋 설정 확인
- 데이터베이스 테이블이 UTF-8인지 확인
- 문제를 일으키는 특수 문자 확인

## 관련 오류

- [API04001](./API04001) — 응답 형식 오류
- [API04005](./API04005) — JSON 복구 시도