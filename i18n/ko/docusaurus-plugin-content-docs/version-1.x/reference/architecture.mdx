---
title: 아키텍처
sidebar_label: 아키텍처
sidebar_position: 2
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

이 페이지는 개발자와 고급 사용자를 위한 WCPOS의 기술적 아키텍처를 설명합니다.

## 이원화 시스템

WCPOS는 이원화된 시스템으로 설계되었습니다:

1. **PHP 플러그인:** 서버에 호스팅되는 상대적으로 작은 플러그인으로, [WooCommerce REST API](/reference/wc-rest-api)를 확장합니다.

2. **JavaScript 클라이언트:** 브라우저나 데스크톱 앱, 향후 iOS 및 Android 앱에서 로컬로 실행됩니다.

이를 두 개의 별도 세계로 생각할 수 있습니다:

- _PHP 세계_는 WordPress와 WooCommerce를 사용하여 데이터 관리가 이루어지는 곳입니다.
- _JavaScript 세계_는 WooCommerce 스토어를 로컬로 복제하여 빠른 검색과 오프라인 사용에 최적화되어 있습니다.

<LocalizedSVG svgName="pos-client-woo-server" />

## 데이터 동기화

데이터는 [WooCommerce REST API](https://woocommerce.github.io/woocommerce-rest-api-docs/)를 사용하여 가져옵니다. 즉, POS는 모든 제품, 변형, 제품 카테고리, 고객, 세율 등을 로컬에 저장하기 위해 다운로드해야 합니다.

초기에는 시간이 걸릴 수 있지만, 한 번 다운로드되면 서버에서 지속적으로 가져오지 않고도 즉시 사용할 수 있습니다.

### 동기화되는 항목

- 제품 및 변형
- 제품 카테고리 및 태그
- 고객
- 세율 및 세금 클래스
- 결제 게이트웨이 (결제를 위해)
- 주문 (Pro 버전의 주문 이력)

### 동기화 전략

WCPOS는 증분 동기화 전략을 사용합니다:

1. **초기 동기화:** 첫 로드 시 모든 데이터 다운로드
2. **증분 업데이트:** 마지막 동기화 이후의 변경 사항만 가져오기
3. **백그라운드 동기화:** 주기적으로 업데이트 확인
4. **수동 동기화:** 사용자가 언제든 동기화 트리거 가능

## 아키텍처의 장단점

| 장점 😊 | 단점 😟 |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| 로컬 데이터 검색이 즉각적임 | 데이터 동기화가 까다로움 |
| 오프라인에서 캐시된 데이터 사용 가능 | WooCommerce REST API에 제한됨 |
| 데스크톱, iOS, Android용 더 나은 네이티브 앱 제작 가능 | WordPress 테마와 훅으로 POS 앱을 커스터마이즈할 수 없음 |

## 로컬 데이터베이스

JavaScript 클라이언트는 브라우저 기반 데이터베이스인 IndexedDB에 데이터를 저장합니다. 이를 통해 다음을 제공합니다:

- **지속성:** 브라우저 재시작 후에도 데이터 유지
- **성능:** 네트워크 대기 시간 없는 빠른 쿼리
- **오프라인 브라우징:** 인터넷 없이도 캐시된 데이터 접근 가능

## 결제 아키텍처

결제 프로세스는 WooCommerce 주문 결제 페이지를 로드하는 iframe/웹뷰를 사용합니다. 이 접근 방식은:

- **기존 결제 게이트웨이 활용:** 모든 WooCommerce 결제 게이트웨이를 POS에서 사용 가능
- **보안 유지:** 결제 처리를 WooCommerce의 안전한 인프라를 통해 수행
- **복잡성 감소:** 결제 게이트웨이 통합을 다시 구현할 필요 없음

## API 확장

PHP 플러그인은 POS별 기능을 위해 WooCommerce REST API를 추가 엔드포인트로 확장합니다. 자세한 내용은 [WooCommerce REST API](/reference/wc-rest-api)를 참조하세요.