---
title: Performance du Checkout
sidebar_label: Performance du Checkout
sidebar_position: 1
---

import Image from "@theme/IdealImage";

Si vous rencontrez des lenteurs lors du processus de checkout, ce guide vous aidera à identifier et à résoudre les causes les plus courantes.

## Comment fonctionne le Checkout WCPOS

Le checkout WCPOS ouvre un modal avec un iframe/webview qui charge une version allégée du modèle de `WooCommerce Order Pay`. C'est essentiellement la même page que la [Page de Paiement Client](https://woocommerce.com/document/managing-orders/paying-for-orders/#customer-payment-page-link) que les clients voient lorsqu'ils payent des commandes en ligne.

:::info Remarque pour les développeurs
Vous pouvez consulter le modèle de checkout dans le dépôt du plugin WCPOS : [templates/payment.php](https://github.com/wcpos/woocommerce-pos/blob/main/templates/payment.php)
:::

## Optimisations Intégrées

WCPOS inclut plusieurs optimisations pour améliorer les performances du checkout :

- **Modèle allégé** - Supprime les éléments de thème inutiles et le désordre
- **Chargement sélectif des scripts/styles** - Seuls les scripts et styles essentiels sont chargés
- **Structure DOM minimale** - Réduit la complexité de la page de checkout

Cependant, certains scripts et styles ne peuvent pas être complètement désactivés car les passerelles de paiement peuvent en avoir besoin pour fonctionner correctement.

## Problèmes de Performance Courants

### 1. Scripts et Styles Inutiles

**Problème :** Les thèmes et plugins ajoutent des scripts et styles qui ne sont pas nécessaires pour le checkout, ralentissant les temps de chargement de la page.

**Solution :** Utilisez les [Paramètres du Checkout](/pos/checkout#checkout-settings-troubleshooting) pour désactiver les ressources inutiles :

1. Cliquez sur le bouton **Paramètres du Checkout** dans le modal de checkout
2. Essayez de désactiver d'abord les styles de thème :
   - wp-block-library
   - classic-theme-styles
   - Les styles personnalisés de votre thème
3. Désactivez les scripts WooCommerce non essentiels :
   - wc-add-to-cart
   - selectWoo (si non nécessaire pour votre passerelle)
   - html5shiv

<div class="image-container">
  <Image
    alt="Formulaire pour désactiver tous les styles et scripts"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">Formulaire pour désactiver tous les styles et scripts</p>
</div>

:::warning Soyez Prudent
Ne désactivez pas les scripts requis par votre passerelle de paiement. Si une méthode de paiement cesse de fonctionner après la désactivation d'un script, réactivez-le.
:::

### 2. Interférence des Plugins Lors de la Création de Commandes

**Problème :** Les plugins qui s'accrochent au processus de création de commandes peuvent provoquer des retards significatifs. Par exemple, des plugins de comptabilité comme Xero peuvent envoyer des données de commande à des serveurs externes, bloquant le processus de checkout.

**Étapes de dépannage :**

1. **Tester sur un serveur de staging** - Si vous avez un serveur de staging, désactivez tous les plugins sauf WooCommerce et WCPOS
2. **Tester la vitesse de checkout** - Traitez une commande de test et notez les performances
3. **Activer les plugins progressivement** - Si les performances s'améliorent de manière significative, réactivez les plugins un par un pour identifier le coupable
4. **Contacter les développeurs de plugins** - Si un plugin spécifique cause des problèmes, contactez le développeur pour obtenir des conseils d'optimisation

**Types de plugins problématiques courants :**
- Intégrations de comptabilité/comptabilité (Xero, QuickBooks)
- Outils de marketing par e-mail qui se déclenchent lors de la création de commande
- Systèmes de gestion des stocks
- Calculatrices d'expédition complexes
- Outils d'analyse tiers

### 3. Limitations des Ressources Serveur

**Problème :** Si votre serveur est surchargé ou manque de ressources suffisantes, toutes les opérations, y compris le checkout, seront lentes.

**Surveillance et Solutions :**

1. **Surveiller les performances du serveur :**
   - Utilisation du CPU pendant le checkout
   - Consommation de mémoire
   - Performances des requêtes de base de données
   - Latence réseau

2. **Optimiser les ressources du serveur :**
   - Augmenter la limite de mémoire PHP
   - Optimiser les requêtes de base de données
   - Utiliser des plugins de cache (mais tester la compatibilité)
   - Envisager de mettre à niveau le plan d'hébergement

3. **Optimisation de la base de données :**
   - Nettoyer les anciennes données de commandes
   - Optimiser les tables de base de données
   - Supprimer les plugins et thèmes inutiles

## Meilleures Pratiques pour les Développeurs WordPress

:::tip Pour les Développeurs
Les développeurs WordPress doivent utiliser `wp_enqueue_scripts` pour ajouter correctement des scripts et des styles aux pages. Malheureusement, certains développeurs de plugins et de thèmes ne suivent pas les meilleures pratiques et insèrent du code directement dans les modèles, rendant impossible la désactivation de ces ressources facilement.
:::

Si vous rencontrez des problèmes avec des scripts ou des styles qui ne peuvent pas être désactivés via les Paramètres du Checkout :

1. **Contacter le développeur** - Demandez-leur de suivre les normes de codage de WordPress
2. **Utiliser des thèmes enfants** - Remplacer les modèles problématiques dans un thème enfant
3. **Hooks personnalisés** - Utiliser les hooks WordPress pour supprimer le code problématique sur les pages de checkout

## Test de Performance

Pour tester les améliorations des performances de checkout :

1. **Mesure de référence** - Chronométrez combien de temps le checkout prend avant de faire des changements
2. **Faire un changement à la fois** - Cela aide à identifier quels changements ont le plus d'impact
3. **Tester avec de vraies passerelles de paiement** - Ne testez pas uniquement avec des paiements en espèces
4. **Tester sur différents appareils** - Les appareils mobiles peuvent montrer des caractéristiques de performance différentes

## Gains Rapides

Voici les améliorations de performance les plus efficaces que vous pouvez apporter :

1. **Désactiver les styles de thème** - Fournit souvent la plus grande amélioration
2. **Supprimer les scripts WooCommerce inutiles** - Réduit le temps d'exécution JavaScript
3. **Auditer les hooks de création de commandes** - Identifier et optimiser les plugins lents
4. **Optimiser les images** - S'assurer que toutes les images lors du checkout sont optimisées
5. **Utiliser un plugin de surveillance de performance** - Suivre les améliorations au fil du temps

## Quand Demander de l'Aide

Contactez le support WCPOS si :

- Le checkout prend systématiquement plus de 10 secondes
- Vous avez suivi ce guide mais rencontrez toujours des problèmes
- Vous suspectez un plugin spécifique mais ne pouvez pas l'identifier
- Vous avez besoin d'aide pour optimiser les ressources serveur

## Documentation Connexe

- [Paramètres du Checkout](/pos/checkout#checkout-settings-troubleshooting) - Désactiver les scripts et styles problématiques
- [Méthodes de Paiement](/payment) - Configurer les passerelles de paiement pour des performances optimales
- [Dépannages](/category/troubleshooting) - Guides de dépannage généraux

---