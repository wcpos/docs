---
title: Performance du Paiement
sidebar_label: Performance du Paiement
sidebar_position: 1
---

import Image from "@theme/IdealImage";

Si vous rencontrez des performances lentes pendant le processus de paiement, ce guide vous aidera à identifier et résoudre les causes les plus courantes.

## Comment fonctionne le paiement WCPOS

Le paiement WCPOS ouvre une fenêtre modale avec un iframe/webview qui charge une version simplifiée du modèle de paiement de commande WooCommerce. C'est essentiellement la même page que celle que les clients voient sur la [page de paiement](https://woocommerce.com/document/managing-orders/paying-for-orders/#customer-payment-page-link) lorsqu'ils paient des commandes en ligne.

:::info Remarque pour les développeurs
Vous pouvez consulter le modèle de paiement dans le dépôt de plugins WCPOS : [templates/payment.php](https://github.com/wcpos/woocommerce-pos/blob/main/templates/payment.php)
:::

## Optimisations intégrées

WCPOS comprend plusieurs optimisations pour améliorer les performances du paiement :

- **Modèle simplifié** - Supprime les éléments de thème et l'encombrement inutiles
- **Chargement sélectif des scripts/styles** - Seuls les scripts et styles essentiels sont chargés
- **Structure DOM minimale** - Réduit la complexité de la page de paiement

Cependant, certains scripts et styles ne peuvent pas être complètement désactivés car les passerelles de paiement peuvent en avoir besoin pour fonctionner correctement.

## Problèmes de performance courants

### 1. Scripts et styles inutiles

**Problème :** Les thèmes et les plugins ajoutent des scripts et des styles qui ne sont pas nécessaires pour le paiement, ralentissant ainsi les temps de chargement des pages.

**Solution :** Utilisez les [Paramètres de paiement](/pos/checkout#checkout-settings-troubleshooting) pour désactiver les ressources inutiles :

1. Cliquez sur le bouton **Paramètres de paiement** dans la fenêtre modale de paiement
2. Essayez de désactiver d'abord les styles de thème :
   - wp-block-library
   - classic-theme-styles
   - Les styles personnalisés de votre thème
3. Désactivez les scripts WooCommerce non essentiels :
   - wc-add-to-cart
   - selectWoo (si non nécessaire pour votre passerelle)
   - html5shiv

<div class="image-container">
  <Image
    alt="Formulaire pour désactiver tous les styles et scripts"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">Formulaire pour désactiver tous les styles et scripts</p>
</div>

:::warning Faites attention
Ne désactivez pas les scripts dont votre passerelle de paiement a besoin. Si un mode de paiement cesse de fonctionner après avoir désactivé un script, réactivez-le.
:::

### 2. Interférences des plugins lors de la création de commande

**Problème :** Les plugins qui s'accrochent au processus de création de commande peuvent causer des retards significatifs. Par exemple, des plugins de comptabilité comme Xero peuvent envoyer des données de commande vers des serveurs externes, bloquant ainsi le processus de paiement.

**Étapes de dépannage :**

1. **Tester sur un serveur de test** - Si vous avez un serveur de test, désactivez tous les plugins sauf WooCommerce et WCPOS
2. **Tester la vitesse de paiement** - Traitez une commande de test et notez la performance
3. **Activez les plugins progressivement** - Si la performance s'améliore considérablement, réactivez les plugins un par un pour identifier le coupable
4. **Contactez les développeurs de plugins** - Si un plugin spécifique pose problème, contactez le développeur pour des conseils d'optimisation

**Types de plugins problématiques courants :**
- Intégrations comptables/comptabilités (Xero, QuickBooks)
- Outils de marketing par e-mail qui se déclenchent lors de la création de commande
- Systèmes de gestion des stocks
- Calculatrices d'expédition complexes
- Outils d'analyse tiers

### 3. Limitations des ressources serveur

**Problème :** Si votre serveur est chargé ou manque de ressources suffisantes, toutes les opérations, y compris le paiement, seront lentes.

**Surveillance et solutions :**

1. **Surveillez la performance du serveur :**
   - Utilisation du CPU pendant le paiement
   - Consommation de mémoire
   - Performance des requêtes de base de données
   - Latence réseau

2. **Optimisez les ressources serveur :**
   - Augmentez la limite de mémoire PHP
   - Optimisez les requêtes de base de données
   - Utilisez des plugins de mise en cache (mais testez la compatibilité)
   - Envisagez de mettre à niveau le plan d'hébergement

3. **Optimisation de la base de données :**
   - Nettoyez les anciennes données de commande
   - Optimisez les tables de base de données
   - Supprimez les plugins et thèmes inutiles

## Meilleures pratiques pour les développeurs WordPress

:::tip Pour les développeurs
Les développeurs WordPress devraient utiliser `wp_enqueue_scripts` pour ajouter correctement des scripts et des styles aux pages. Malheureusement, certains développeurs de plugins et de thèmes ne suivent pas les meilleures pratiques et insèrent directement du code dans les modèles, rendant difficile la désactivation de ces ressources.
:::

Si vous rencontrez des problèmes avec des scripts ou des styles qui ne peuvent pas être désactivés via les paramètres de paiement :

1. **Contactez le développeur** - Demandez-lui de suivre les normes de codage WordPress
2. **Utilisez des thèmes enfants** - Remplacez les modèles problématiques dans un thème enfant
3. **Hooks personnalisés** - Utilisez des hooks WordPress pour supprimer du code problématique sur les pages de paiement

## Tests de performance

Pour tester les améliorations de performance du paiement :

1. **Mesure de référence** - Chronométrez combien de temps prend le paiement avant d'apporter des changements
2. **Apportez un changement à la fois** - Cela aide à identifier quels changements ont le plus d'impact
3. **Testez avec de vraies passerelles de paiement** - Ne testez pas seulement avec des paiements en espèces
4. **Testez sur différents appareils** - Les appareils mobiles peuvent montrer des caractéristiques de performances différentes

## Gains rapides

Voici les améliorations de performance les plus efficaces que vous pouvez apporter :

1. **Désactivez les styles de thème** - Fournit souvent la plus grande amélioration
2. **Supprimez les scripts WooCommerce inutiles** - Réduit le temps d'exécution de JavaScript
3. **Auditez les hooks de création de commande** - Identifiez et optimisez les plugins lents
4. **Optimisez les images** - Assurez-vous que toutes les images dans le processus de paiement sont optimisées
5. **Utilisez un plugin de suivi de performance** - Évaluez les améliorations au fil du temps

## Quand demander de l'aide

Contactez le support WCPOS si :

- Le paiement prend plus de 10 secondes de manière constante
- Vous avez suivi ce guide mais rencontrez toujours des problèmes
- Vous soupçonnez un plugin spécifique mais ne pouvez pas l'identifier
- Vous avez besoin d'aide pour optimiser les ressources serveur

## Documentation connexe

- [Paramètres de paiement](/pos/checkout#checkout-settings-troubleshooting) - Désactivez les scripts et styles problématiques
- [Méthodes de paiement](/payment) - Configurez les passerelles de paiement pour des performances optimales
- [Dépannage](/category/troubleshooting) - Guides généraux de dépannage