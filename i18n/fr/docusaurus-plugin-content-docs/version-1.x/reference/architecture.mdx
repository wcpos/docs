---
title: Architecture
sidebar_label: Architecture
sidebar_position: 2
description: Architecture technique de WCPOS expliquant comment le client POS communique avec l'API REST de WooCommerce.
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Cette page explique l'architecture technique de WCPOS pour les d√©veloppeurs et les utilisateurs avanc√©s.

## Syst√®me en Deux Parties {#two-part-system}

WCPOS est con√ßu comme un syst√®me en deux parties :

1. **Plugin PHP :** H√©berg√© sur votre serveur, c'est un plugin relativement petit qui √©tend l'[API REST de WooCommerce](/reference/wc-rest-api).

2. **Client JavaScript :** Celui-ci s'ex√©cute localement dans votre navigateur ou l'application de bureau, et plus tard sur les applications iOS et Android.

Vous pouvez le consid√©rer comme deux mondes s√©par√©s :

- Le _monde PHP_ est celui o√π la gestion des donn√©es se fait √† l'aide de WordPress et WooCommerce.
- Le _monde JavaScript_ r√©plique votre boutique WooCommerce localement, optimis√© pour une recherche rapide et une utilisation hors ligne.

<LocalizedSVG svgName="pos-client-woo-server" />

## Synchronisation des Donn√©es {#data-synchronization}

Les donn√©es sont r√©cup√©r√©es depuis WooCommerce en utilisant l'[API REST de WooCommerce](https://woocommerce.github.io/woocommerce-rest-api-docs/). Cela signifie que le POS doit t√©l√©charger chaque produit, variation, cat√©gorie de produit, client, taux de taxe, et plus encore pour les stocker localement.

Bien que cela puisse prendre du temps au d√©part, une fois t√©l√©charg√©es, elles sont disponibles instantan√©ment sans avoir besoin de se re-brancher continuellement au serveur.

### Qu'est-ce qui est Synchronis√© ? {#what-gets-synced}

- Produits et variations
- Cat√©gories de produits et balises
- Clients
- Taux de taxe et classes fiscales
- Passerelles de paiement (pour le processus de paiement)
- Commandes (pour l'historique des commandes dans Pro)

### Strat√©gie de Synchronisation {#sync-strategy}

WCPOS utilise une strat√©gie de synchronisation incr√©mentale :

1. **Synchronisation initiale :** T√©l√©charge toutes les donn√©es au premier chargement
2. **Mises √† jour incr√©mentales :** Ne r√©cup√®re que les changements depuis la derni√®re synchronisation
3. **Synchronisation en arri√®re-plan :** V√©rifie p√©riodiquement les mises √† jour
4. **Synchronisation manuelle :** L'utilisateur peut d√©clencher une synchronisation √† tout moment

## Avantages et Inconv√©nients de l'Architecture {#architecture-pros-and-cons}

| Bon üòä | Mauvais üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| La recherche de donn√©es locales est instantan√©e | Maintenir les donn√©es synchronis√©es est un d√©fi |
| Les donn√©es mises en cache sont disponibles hors ligne | Limit√© par l'API REST de WooCommerce |
| Capacit√© √† cr√©er de meilleures applications natives pour bureau, iOS et Android | Les th√®mes et hooks WordPress ne peuvent pas personnaliser l'application POS |

## Base de Donn√©es Locale {#local-database}

Le client JavaScript stocke les donn√©es dans IndexedDB, une base de donn√©es bas√©e sur le navigateur. Cela fournit :

- **Persistance :** Les donn√©es survivent aux red√©marrages du navigateur
- **Performance :** Requ√™tes rapides sans latence r√©seau
- **Navigation hors ligne :** Les donn√©es mises en cache restent accessibles sans internet

## Architecture de Paiement {#checkout-architecture}

Le processus de paiement utilise un iframe/webview qui charge la page de paiement de la commande WooCommerce. Cette approche :

- **Tire parti des passerelles de paiement existantes :** Toute passerelle de paiement WooCommerce peut fonctionner dans le POS
- **Maintient la s√©curit√© :** Le traitement des paiements se fait via l'infrastructure s√©curis√©e de WooCommerce
- **R√©duit la complexit√© :** Pas besoin de r√©impl√©menter les int√©grations des passerelles de paiement

## Extensions API {#api-extensions}

Le plugin PHP √©tend l'API REST de WooCommerce avec des points de terminaison suppl√©mentaires pour des fonctionnalit√©s sp√©cifiques au POS. Consultez l'[API REST de WooCommerce](/reference/wc-rest-api) pour plus de d√©tails.