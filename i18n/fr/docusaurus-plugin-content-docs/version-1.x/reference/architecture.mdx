---
title: Architecture
sidebar_label: Architecture
sidebar_position: 2
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Cette page explique l'architecture technique de WCPOS pour les d√©veloppeurs et les utilisateurs avanc√©s.

## Syst√®me en deux parties

WCPOS est con√ßu comme un syst√®me en deux parties :

1. **Plugin PHP :** H√©berg√© sur votre serveur, c'est un plugin relativement petit qui √©tend l'[API REST WooCommerce](/reference/wc-rest-api).

2. **Client JavaScript :** Cela fonctionne localement dans votre navigateur ou l'application de bureau, et plus tard sur les applications iOS et Android.

Vous pouvez le consid√©rer comme deux mondes s√©par√©s :

- Le _monde PHP_ est l'endroit o√π la gestion des donn√©es se fait en utilisant WordPress et WooCommerce.
- Le _monde JavaScript_ r√©plique votre boutique WooCommerce localement, optimis√© pour une recherche rapide et une utilisation hors ligne.

<LocalizedSVG svgName="pos-client-woo-server" />

## Synchronisation des donn√©es

Les donn√©es sont r√©cup√©r√©es depuis WooCommerce en utilisant l'[API REST WooCommerce](https://woocommerce.github.io/woocommerce-rest-api-docs/). Cela signifie que le POS doit t√©l√©charger chaque produit, variation, cat√©gorie de produit, client, taux de taxe, et plus encore pour les stocker localement.

Bien que cela puisse prendre du temps au d√©but, une fois t√©l√©charg√©es, elles sont disponibles instantan√©ment sans avoir besoin de les r√©cup√©rer continuellement depuis le serveur.

### Qu'est-ce qui est synchronis√© ?

- Produits et variations
- Cat√©gories de produit et √©tiquettes
- Clients
- Taux de taxe et classes fiscales
- Passerelles de paiement (pour le processus de paiement)
- Commandes (pour l'historique des commandes dans Pro)

### Strat√©gie de synchronisation

WCPOS utilise une strat√©gie de synchronisation incr√©mentale :

1. **Synchronisation initiale :** T√©l√©charge toutes les donn√©es au premier chargement
2. **Mises √† jour incr√©mentales :** Ne r√©cup√®re que les changements depuis la derni√®re synchronisation
3. **Synchronisation en arri√®re-plan :** V√©rifie p√©riodiquement les mises √† jour
4. **Synchronisation manuelle :** L'utilisateur peut d√©clencher une synchronisation √† tout moment

## Avantages et inconv√©nients de l'architecture

| Bon üòä | Mauvais üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| La recherche de donn√©es locales est instantan√©e | Maintenir les donn√©es synchronis√©es est un d√©fi |
| Donn√©es mises en cache disponibles hors ligne | Limit√© par l'API REST WooCommerce |
| Capacit√© √† cr√©er de meilleures applications natives pour bureau, iOS et Android | Les th√®mes et hooks WordPress ne peuvent pas personnaliser l'application POS |

## Base de donn√©es locale

Le client JavaScript stocke les donn√©es dans IndexedDB, une base de donn√©es bas√©e sur le navigateur. Cela fournit :

- **P√©rennit√© :** Les donn√©es survivent aux red√©marrages du navigateur
- **Performance :** Requ√™tes rapides sans latence r√©seau
- **Navigation hors ligne :** Les donn√©es mises en cache restent accessibles sans internet

## Architecture du processus de paiement

Le processus de paiement utilise un iframe/webview qui charge la page WooCommerce Order Pay. Cette approche :

- **Utilise les passerelles de paiement existantes :** Toute passerelle de paiement WooCommerce peut fonctionner dans le POS
- **Maintient la s√©curit√© :** Le traitement des paiements se fait via l'infrastructure s√©curis√©e de WooCommerce
- **R√©duit la complexit√© :** Pas besoin de r√©impl√©menter les int√©grations de passerelles de paiement

## Extensions API

Le plugin PHP √©tend l'API REST WooCommerce avec des points de terminaison suppl√©mentaires pour des fonctionnalit√©s sp√©cifiques au POS. Voir [API REST WooCommerce](/reference/wc-rest-api) pour plus de d√©tails.