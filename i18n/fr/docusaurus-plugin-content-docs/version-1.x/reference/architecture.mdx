---
title: Architecture
sidebar_label: Architecture
sidebar_position: 2
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Cette page explique l'architecture technique de WCPOS pour les d√©veloppeurs et les utilisateurs avanc√©s.

## Syst√®me Bipartite

WCPOS est con√ßu comme un syst√®me √† deux parties :

1. **Plugin PHP :** H√©berg√© sur votre serveur, c'est un plugin relativement petit qui √©tend l'[API REST WooCommerce](/reference/wc-rest-api).

2. **Client JavaScript :** S'ex√©cute localement dans votre navigateur ou l'application de bureau, et plus tard sur les applications iOS et Android.

Vous pouvez le consid√©rer comme deux mondes distincts :

- Le _monde PHP_ est l'endroit o√π la gestion des donn√©es se fait en utilisant WordPress et WooCommerce.
- Le _monde JavaScript_ r√©plique votre boutique WooCommerce localement, optimis√© pour une recherche rapide et une utilisation hors ligne.

<LocalizedSVG svgName="pos-client-woo-server" />

## Synchronisation des Donn√©es

Les donn√©es sont r√©cup√©r√©es √† partir de WooCommerce en utilisant l'[API REST WooCommerce](https://woocommerce.github.io/woocommerce-rest-api-docs/). Cela signifie que le POS doit t√©l√©charger chaque produit, variation, cat√©gorie de produit, client, taux de taxe, etc. pour les stocker localement.

Bien que cela puisse √™tre long initialement, une fois t√©l√©charg√©s, ils sont disponibles instantan√©ment sans avoir besoin de les r√©cup√©rer continuellement du serveur.

### Que se synchronise ?

- Produits et variations
- Cat√©gories et √©tiquettes de produits
- Clients
- Taux de taxe et classes de taxe
- Passerelles de paiement (pour le paiement)
- Commandes (pour l'historique des commandes dans la version Pro)

### Strat√©gie de Synchronisation

WCPOS utilise une strat√©gie de synchronisation incr√©mentale :

1. **Synchronisation initiale :** T√©l√©charge toutes les donn√©es lors du premier chargement
2. **Mises √† jour incr√©mentielles :** Ne r√©cup√®re que les modifications depuis la derni√®re synchronisation
3. **Synchronisation en arri√®re-plan :** V√©rifie p√©riodiquement les mises √† jour
4. **Synchronisation manuelle :** L'utilisateur peut d√©clencher une synchronisation √† tout moment

## Avantages et Inconv√©nients de l'Architecture

| Bon üòä | Mauvais üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| Recherche de donn√©es locale instantan√©e | Maintenir les donn√©es synchronis√©es est complexe |
| Donn√©es en cache disponibles hors ligne | Limit√© par l'API REST WooCommerce |
| Possibilit√© de cr√©er de meilleures applications natives pour bureau, iOS et Android | Les th√®mes WordPress et les hooks ne peuvent pas personnaliser l'application POS |

## Base de Donn√©es Locale

Le client JavaScript stocke les donn√©es dans IndexedDB, une base de donn√©es bas√©e sur le navigateur. Cela offre :

- **Persistance :** Les donn√©es survivent aux red√©marrages du navigateur
- **Performance :** Requ√™tes rapides sans latence r√©seau
- **Navigation hors ligne :** Les donn√©es en cache restent accessibles sans internet

## Architecture de Paiement

Le processus de paiement utilise un iframe/webview qui charge la page de paiement de commande WooCommerce. Cette approche :

- **Exploite les passerelles de paiement existantes :** Toute passerelle de paiement WooCommerce peut fonctionner dans le POS
- **Maintient la s√©curit√© :** Le traitement des paiements se fait via l'infrastructure s√©curis√©e de WooCommerce
- **R√©duit la complexit√© :** Pas besoin de r√©impl√©menter les int√©grations de passerelles de paiement

## Extensions API

Le plugin PHP √©tend l'API REST WooCommerce avec des points de terminaison suppl√©mentaires pour des fonctionnalit√©s sp√©cifiques au POS. Consultez [API REST WooCommerce](/reference/wc-rest-api) pour plus de d√©tails.