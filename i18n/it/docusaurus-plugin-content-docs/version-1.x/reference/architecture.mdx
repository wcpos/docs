---
title: Architettura
sidebar_label: Architettura
sidebar_position: 2
description: Architettura tecnica di WCPOS che spiega come il client POS comunica con l'API REST di WooCommerce.
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Questa pagina spiega l'architettura tecnica di WCPOS per sviluppatori e utenti avanzati.

## Sistema a Due Parti {#two-part-system}

WCPOS Ã¨ progettato come un sistema a due parti:

1. **Plugin PHP:** Ospitato sul tuo server, questo Ã¨ un plugin relativamente piccolo che estende l'[API REST di WooCommerce](/reference/wc-rest-api).

2. **Client JavaScript:** Questo viene eseguito localmente nel tuo browser o nell'app desktop, e in seguito nelle app iOS e Android.

Puoi pensarlo come due mondi separati:

- Il _mondo PHP_ Ã¨ dove avviene la gestione dei dati utilizzando WordPress e WooCommerce.
- Il _mondo JavaScript_ replica localmente il tuo negozio WooCommerce, ottimizzato per ricerche veloci e utilizzo offline.

<LocalizedSVG svgName="pos-client-woo-server" />

## Sincronizzazione dei Dati {#data-synchronization}

I dati vengono recuperati da WooCommerce utilizzando l'[API REST di WooCommerce](https://woocommerce.github.io/woocommerce-rest-api-docs/). Questo significa che il POS deve scaricare ogni prodotto, variazione, categoria di prodotto, cliente, aliquota fiscale e altro per memorizzarli localmente.

Sebbene questo possa richiedere tempo all'inizio, una volta scaricati, sono disponibili istantaneamente senza la necessitÃ  di scaricare continuamente dal server.

### Cosa Viene Sincronizzato? {#what-gets-synced}

- Prodotti e variazioni
- Categorie e tag dei prodotti
- Clienti
- Aliquote fiscali e classi fiscali
- Gateway di pagamento (per il checkout)
- Ordini (per la cronologia degli ordini in Pro)

### Strategia di Sincronizzazione {#sync-strategy}

WCPOS utilizza una strategia di sincronizzazione incrementale:

1. **Sincronizzazione iniziale:** Scarica tutti i dati al primo caricamento
2. **Aggiornamenti incrementali:** Recupera solo le modifiche dall'ultima sincronizzazione
3. **Sincronizzazione in background:** Controlla periodicamente gli aggiornamenti
4. **Sincronizzazione manuale:** L'utente puÃ² attivare una sincronizzazione in qualsiasi momento

## Vantaggi e Svantaggi dell'Architettura {#architecture-pros-and-cons}

| Buono ðŸ˜Š | Cattivo ðŸ˜Ÿ |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| La ricerca di dati locali Ã¨ istantanea | Mantenere i dati sincronizzati Ã¨ una sfida |
| Dati memorizzati nella cache disponibili offline | Limitato dall'API REST di WooCommerce |
| PossibilitÃ  di creare migliori app native per desktop, iOS e Android | I temi e i ganci di WordPress non possono personalizzare l'app POS |

## Database Locale {#local-database}

Il client JavaScript memorizza i dati in IndexedDB, un database basato su browser. Questo fornisce:

- **Persistenza:** I dati sopravvivono ai riavvii del browser
- **Prestazioni:** Query rapide senza latenza di rete
- **Navigazione offline:** I dati memorizzati nella cache rimangono accessibili senza internet

## Architettura del Checkout {#checkout-architecture}

Il processo di checkout utilizza un iframe/webview che carica la pagina di pagamento dell'Ordine di WooCommerce. Questo approccio:

- **Sfrutta i gateway di pagamento esistenti:** Qualsiasi gateway di pagamento WooCommerce puÃ² funzionare nel POS
- **Mantiene la sicurezza:** L'elaborazione dei pagamenti avviene attraverso l'infrastruttura sicura di WooCommerce
- **Riduce la complessitÃ :** Non Ã¨ necessario re-implementare le integrazioni dei gateway di pagamento

## Estensioni API {#api-extensions}

Il plugin PHP estende l'API REST di WooCommerce con endpoint aggiuntivi per funzionalitÃ  specifiche del POS. Vedi [API REST di WooCommerce](/reference/wc-rest-api) per dettagli.