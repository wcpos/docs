---
title: Architettura
sidebar_label: Architettura
sidebar_position: 2
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Questa pagina spiega l'architettura tecnica di WCPOS per sviluppatori e utenti avanzati.

## Sistema in Due Parti

WCPOS √® progettato come un sistema in due parti:

1. **Plugin PHP:** Ospitato sul tuo server, questo √® un plugin relativamente piccolo che estende il [WooCommerce REST API](/reference/wc-rest-api).

2. **Client JavaScript:** Questo viene eseguito localmente nel tuo browser o nell'app desktop, e in seguito nelle app iOS e Android.

Puoi pensarlo come due mondi separati:

- Il _mondo PHP_ √® dove avviene la gestione dei dati utilizzando WordPress e WooCommerce.
- Il _mondo JavaScript_ replica localmente il tuo negozio WooCommerce, ottimizzato per ricerche rapide e utilizzo offline.

<LocalizedSVG svgName="pos-client-woo-server" />

## Sincronizzazione dei Dati

I dati vengono recuperati da WooCommerce utilizzando il [WooCommerce REST API](https://woocommerce.github.io/woocommerce-rest-api-docs/). Ci√≤ significa che il POS deve scaricare ogni prodotto, variazione, categoria di prodotto, cliente, aliquota fiscale e altro per memorizzarli localmente.

Sebbene questo possa richiedere tempo all'inizio, una volta scaricati, sono disponibili istantaneamente senza la necessit√† di recuperare continuamente dal server.

### Cosa Viene Sincronizzato?

- Prodotti e variazioni
- Categorie e tag dei prodotti
- Clienti
- Aliquote fiscali e classi fiscali
- Gateway di pagamento (per il checkout)
- Ordini (per la cronologia degli ordini nel Pro)

### Strategia di Sync

WCPOS utilizza una strategia di sincronizzazione incrementale:

1. **Sincronizzazione iniziale:** Scarica tutti i dati al primo caricamento
2. **Aggiornamenti incrementali:** Recupera solo le modifiche dall'ultima sincronizzazione
3. **Sincronizzazione in background:** Controlla periodicamente gli aggiornamenti
4. **Sincronizzazione manuale:** L'utente pu√≤ attivare una sincronizzazione in qualsiasi momento

## Vantaggi e Svantaggi dell'Architettura

| Vantaggi üòä | Svantaggi üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| La ricerca dei dati locali √® immediata | Mantenere i dati sincronizzati √® impegnativo |
| Dati memorizzati nella cache disponibili offline | Limitato dall'API REST di WooCommerce |
| Possibilit√† di creare migliori app native per desktop, iOS e Android | I temi e gli hook di WordPress non possono personalizzare l'app POS |

## Database Locale

Il client JavaScript memorizza i dati in IndexedDB, un database basato sul browser. Questo fornisce:

- **Persistenza:** I dati sopravvivono ai riavvii del browser
- **Prestazioni:** Query veloci senza latenza di rete
- **Navigazione offline:** I dati memorizzati nella cache rimangono accessibili senza internet

## Architettura del Checkout

Il processo di checkout utilizza un iframe/webview che carica la pagina di pagamento degli ordini di WooCommerce. Questo approccio:

- **Sfrutta i gateway di pagamento esistenti:** Qualsiasi gateway di pagamento di WooCommerce pu√≤ funzionare nel POS
- **Mantiene la sicurezza:** L'elaborazione dei pagamenti avviene attraverso l'infrastruttura sicura di WooCommerce
- **Riduce la complessit√†:** Non √® necessario riimplementare integrazioni di gateway di pagamento

## Estensioni API

Il plugin PHP estende il WooCommerce REST API con endpoint aggiuntivi per funzionalit√† specifiche del POS. Vedi il [WooCommerce REST API](/reference/wc-rest-api) per dettagli.