---
title: الدفع والإتمام
sidebar_label: الدفع
sidebar_position: 1
---

import Image from "@theme/IdealImage";

عندما تكون جاهزًا لإكمال عملية البيع، انقر على زر **الدفع** لفتح نافذة الدفع. هنا يتم معالجة الدفع وإكمال الطلب.

{/* Screenshot: checkout-modal.png */}

## نظرة عامة على نافذة الدفع

تعرض نافذة الدفع:

- **رقم الطلب** - معرف طلب WooCommerce
- **المبلغ المستحق** - إجمالي المبلغ المطلوب
- **زر إعدادات الدفع** - حل مشاكل العرض
- **موظف الصندوق** - من يعالج الطلب
- **العميل** - العميل لهذا الطلب (رابط قابل للنقر)
- **حقل كود القسيمة** - تطبيق أكواد الخصم
- **ملخص الطلب** - المنتجات والكميات والإجماليات
- **طرق الدفع** - خيارات الدفع المتاحة
- **أزرار الإلغاء / معالجة الدفع**

## طرق الدفع

### متاحة في النسخة المجانية

تتضمن النسخة المجانية من WCPOS بوابتي دفع:

- **نقدي** - مع حساب المبلغ المدفوع والباقي
- **بطاقة** - للطرفيات الخارجية للبطاقات

### بوابات إضافية (Pro)

:::info ميزة Pro
تتطلب بوابات الدفع الإضافية [WCPOS Pro](/getting-started/pro-license).
:::

مع Pro، يمكنك تفعيل:

- **طرفية Stripe** - تكامل مباشر مع قارئات بطاقات Stripe
- **طرفية SumUp** - تكامل مع قارئات بطاقات SumUp
- **بوابات مخصصة** - إنشاء تكاملات دفع خاصة بك

راجع [الدفع](/payment) للتفاصيل حول إعداد البوابات.

### اختيار طريقة الدفع

انقر على طريقة دفع للاختيار. سيتحدث النموذج ليظهر الحقول ذات الصلة:

**نقدي:**
- **المبلغ المدفوع** - أدخل المبلغ الذي يقدمه العميل
- **الباقي** - يتم حساب الباقي تلقائيًا

{/* Screenshot: checkout-cash-payment.png */}

**بطاقة:**
- معالجة الدفع على طرفية البطاقة الخارجية
- انقر على معالجة الدفع للإكمال

## أكواد القسائم

لتطبيق خصم:

1. أدخل كود القسيمة في الحقل
2. انقر على **تطبيق القسيمة**
3. يظهر الخصم في ملخص الطلب

يجب إعداد القسائم في WooCommerce (`WP Admin > Marketing > Coupons`).

## معالجة الدفع

1. اختر طريقة دفع
2. للدفع النقدي، أدخل المبلغ المدفوع
3. انقر على **معالجة الدفع**
4. يتم إكمال الطلب وعرض [الإيصال](/pos/checkout/receipts)

## إعدادات الدفع (استكشاف الأخطاء)

تستخدم نافذة الدفع إطارًا متداخلًا/عارض ويب لعرض صفحة دفع الطلب في WooCommerce. وهذا يستفيد من البنية التحتية للدفع في WooCommerce، مما يعني أن أي بوابة دفع تعمل مع WooCommerce يجب أن تعمل في POS.

ومع ذلك، قد تتداخل scripts القوالب والإضافات. انقر على **إعدادات الدفع** لاستكشاف الأخطاء:

{/* Screenshot: checkout-settings.png */}

### تعطيل جميع الأنماط والسكربتات

- **تعطيل wp_head** - يزيل جميع السكربتات/الأنماط من رأس WordPress
- **تعطيل wp_footer** - يزيل جميع السكربتات/الأنماط من تذييل WordPress

### تعطيل الأنماط المحددة

تعطيل CSS التي قد تسبب مشاكل في العرض بشكل انتقائي:

- wp-emoji-styles
- wp-block-library
- classic-theme-styles
- woocommerce-layout
- woocommerce-smallscreen
- woocommerce-general
- إلخ.

### تعطيل السكربتات المحددة

تعطيل JavaScript التي قد تتداخل مع بوابات الدفع بشكل انتقائي:

- wc-add-to-cart
- selectWoo
- wc-checkout
- woocommerce
- html5shiv
- إلخ.

:::tip
إذا لم تظهر بوابة دفع بشكل صحيح:
1. حاول تعطيل أنماط القالب أولاً
2. ثم حاول تعطيل سكربتات WooCommerce غير الضرورية
3. كن حذرًا من تعطيل السكربتات المطلوبة لبوابة الدفع الخاصة بك
:::

## الإلغاء

انقر على **إلغاء** لإغلاق نافذة الدفع دون إكمال الطلب. يبقى الطلب كعربة مفتوحة.

## وثائق ذات صلة

- [الإيصالات](/pos/checkout/receipts) - بعد الدفع، اطبع أو أرسل الإيصالات بالبريد الإلكتروني
- [طرق الدفع](/payment) - настройка بوابات الدفع
- [البوابات المخصصة](/payment/custom-gateways) - إنشاء تكاملات دفع مخصصة