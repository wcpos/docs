---
title: "تنفيذ عملية الدفع"
sidebar_label: "تنفيذ عملية الدفع"
sidebar_position: 1
---

import Image from "@theme/IdealImage";

عندما تكون جاهزًا لإتمام عملية بيع، انقر على زر **تنفيذ عملية الدفع** لفتح نافذة الدفع. هنا حيث تقوم بمعالجة الدفع وإكمال الطلب.

{/* لقطة شاشة: checkout-modal.png */}

## نظرة عامة على نافذة تنفيذ عملية الدفع

تظهر نافذة تنفيذ عملية الدفع:

- **رقم الطلب** - معرف طلب WooCommerce
- **المبلغ المستحق** - إجمالي المبلغ المطلوب
- **زر إعدادات تنفيذ عملية الدفع** - حل مشاكل العرض
- **المحاسب** - الشخص الذي يقوم بمعالجة الطلب
- **العميل** - العميل لهذا الطلب (رابط قابل للنقر)
- **حقل رمز القسيمة** - تطبيق رموز الخصم
- **ملخص الطلب** - المنتجات، الكميات، والإجماليات
- **طرق الدفع** - خيارات الدفع المتاحة
- **أزرار إلغاء / معالجة الدفع**

## طرق الدفع

### متاحة في النسخة المجانية

تتضمن النسخة المجانية من WCPOS بوابتين للدفع:

- **نقدًا** - مع المبلغ المدفوع وآلة حاسبة للباقي
- **بطاقة** - لأجهزة بطاقة خارجية

### بوابات إضافية (Pro)

:::info ميزة Pro
تتطلب بوابات الدفع الإضافية [WCPOS Pro](/getting-started/pro-license).
:::

مع Pro، يمكنك تفعيل:

- **Stripe Terminal** - تكامل مباشر مع أجهزة قراءة بطاقات Stripe
- **SumUp Terminal** - تكامل مع أجهزة قراءة بطاقات SumUp
- **بوابات مخصصة** - أنشئ تكاملات الدفع الخاصة بك

راجع [الدفع](/payment) للحصول على تفاصيل إعداد البوابات.

### اختيار طريقة الدفع

انقر على طريقة الدفع لاختيارها. يقوم النموذج بالتحديث لعرض الحقول ذات الصلة:

**نقدًا:**

- **المبلغ المدفوع** - أدخل المبلغ الذي يمنحك إياه العميل
- **الباقي** - الباقي المحسوب تلقائيًا للإرجاع

{/* لقطة شاشة: checkout-cash-payment.png */}

**بطاقة:**

- معالجة الدفع على جهاز بطاقة خارجي
- انقر على معالجة الدفع لإكمال العملية

## رموز القسيمة

لتطبيق خصم:

1. أدخل رمز القسيمة في الحقل
2. انقر على **تطبيق القسيمة**
3. يظهر الخصم في ملخص الطلب

يجب تكوين القسائم في WooCommerce (`WP Admin > Marketing > Coupons`).

## معالجة الدفع

1. اختر طريقة الدفع
2. بالنسبة للنقد، أدخل المبلغ المدفوع
3. انقر على **معالجة الدفع**
4. يتم إكمال الطلب ويظهر [الإيصال](/pos/checkout/receipts)

## إعدادات تنفيذ عملية الدفع (استكشاف الأخطاء)

تستخدم نافذة تنفيذ عملية الدفع iframe/webview لعرض صفحة دفع أمر WooCommerce. وهذا يستفيد من بنية الدفع الموجودة في WooCommerce، مما يعني أنه يجب أن تعمل أي بوابة دفع تعمل مع WooCommerce في نظام الدفع.

ومع ذلك، يمكن أن تتداخل سكريبتات القالب والإضافات في بعض الأحيان. انقر على **إعدادات تنفيذ عملية الدفع** لاستكشاف الأخطاء:

<div class="image-container">
  <Image
    alt="إعدادات تنفيذ عملية الدفع في نافذة تنفيذ عملية الدفع"
    img="/img/checkout-settings.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">إعدادات تنفيذ عملية الدفع في نافذة تنفيذ عملية الدفع</p>
</div>

<div class="image-container">
  <Image
    alt="نموذج لتعطيل جميع الأنماط والسكريبتات"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">نموذج لتعطيل جميع الأنماط والسكريبتات</p>
</div>

### تعطيل جميع الأنماط والسكريبتات

:::warning الخيار النووي
هذا هو الخيار النووي ويجب استخدامه فقط للاختبار أو في حالات نادرة حيث يعرف المطور ما يفعله. سيؤدي تعطيل جميع سكريبتات wp_head إلى إزالة حتى السكريبتات الضرورية في WooCommerce لتوسيع/تقليص بوابات الدفع، مما قد يؤدي إلى كسر وظيفة الدفع.
:::

- **تعطيل wp_head** - يزيل جميع السكريبتات/الأنماط من رأس WordPress
- **تعطيل wp_footer** - يزيل جميع السكريبتات/الأنماط من تذييل WordPress

### تعطيل الأنماط المحددة

تعطيل CSS بشكل انتقائي الذي قد يسبب مشاكل في العرض:

- wp-emoji-styles
- wp-block-library
- classic-theme-styles
- woocommerce-layout
- woocommerce-smallscreen
- woocommerce-general
- إلخ.

### تعطيل السكريبتات المحددة

تعطيل JavaScript بشكل انتقائي الذي قد يتداخل مع بوابات الدفع:

- wc-add-to-cart
- selectWoo
- wc-checkout
- woocommerce
- html5shiv
- إلخ.

:::tip
إذا لم تظهر بوابة الدفع بشكل صحيح:

1. حاول تعطيل أنماط القالب أولاً
2. ثم حاول تعطيل سكريبتات WooCommerce التي لا تحتاج إليها
3. كن حذرًا بعدم تعطيل السكريبتات المطلوبة من قبل بوابة الدفع الخاصة بك
   :::

## إلغاء

انقر على **إلغاء** لإغلاق نافذة تنفيذ عملية الدفع دون إتمام الطلب. يبقى الطلب كعربة مفتوحة.

## الوثائق ذات الصلة

- [الإيصالات](/pos/checkout/receipts) - بعد إتمام الدفع، اطبع أو أرسل الإيصالات عبر البريد الإلكتروني
- [طرق الدفع](/payment) - تكوين بوابات الدفع
- [بوابات مخصصة](/payment/custom-gateways) - إنشاء تكاملات الدفع المخصصة

---