---
title: "الخطأ API04001: تنسيق استجابة غير صالح"
sidebar_label: API04001
---

# الخطأ API04001: تنسيق استجابة غير صالح

## ما يعنيه هذا

استجاب الخادم، لكن تنسيق الاستجابة لم يكن مطابقًا لما توقعه نظام نقطة البيع. يجب أن يعيد الخادم بيانات JSON، ولكن تم استلام شيء آخر.

## الأسباب الشائعة

- **ظهور خطأ PHP** — يتم إخراج خطأ PHP قبل JSON
- **تعارض الإضافات** — إضافة أخرى تقوم بإخراج محتوى
- **وضع الصيانة** — الموقع يعرض صفحة صيانة
- **نوع محتوى خاطئ** — الخادم يرسل HTML بدلاً من JSON
- **مشكلة في التخزين المؤقت** — يتم تقديم صفحة خطأ مخزنة مؤقتًا

## كيفية الإصلاح

### 1. تحقق من موقعك

زر موقع WordPress الخاص بك في متصفح:
- هل يعرض بشكل طبيعي؟
- هل هناك أي أخطاء واضحة؟
- هل هو في وضع الصيانة؟

### 2. تحقق من أخطاء PHP

في `wp-config.php`، فعّل تصحيح الأخطاء مؤقتًا:

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

تحقق من `wp-content/debug.log` للاطلاع على الأخطاء.

### 3. اختبر واجهة برمجة التطبيقات REST مباشرة

زر `https://yoursite.com/wp-json/` في متصفحك:
- يجب أن يعيد بيانات JSON
- إذا رأيت HTML أو أخطاء، فهناك مشكلة
- تحقق من المحتوى المرتبط بالإضافات

### 4. عطّل التخزين المؤقت مؤقتًا

قد تقدم إضافات التخزين المؤقت استجابات قديمة:
- امسح كل التخزين المؤقت
- عطّل إضافات التخزين المؤقت مؤقتًا
- استثن واجهة برمجة التطبيقات REST من التخزين المؤقت

### 5. تحقق من تعارض الإضافات

إذا كانت إضافة ما تخرج محتوى على كل صفحة:
1. عطّل جميع الإضافات غير الأساسية
2. اختبر نظام نقطة البيع
3. أعد تفعيل الإضافات واحدة تلو الأخرى

## أخطاء ذات صلة

- [الخطأ API04003](./API04003) — استجابة JSON غير متماسكة
- [الخطأ API05005](./API05005) — الإضافة غير موجودة