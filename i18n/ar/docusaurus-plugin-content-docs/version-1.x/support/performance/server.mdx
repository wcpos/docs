---
title: أداء الخادم
sidebar_label: أداء الخادم
sidebar_position: 2
---

import Image from "@theme/IdealImage";

يؤثر أداء الخادم بشكل مباشر على سرعة واستجابة تطبيق WCPOS الخاص بك. يساعدك هذا الدليل على مراقبة وتشخيص وتحسين أداء الخادم باستخدام المقاييس المدمجة وتقنيات استكشاف الأخطاء وإصلاحها.

## فهم مقاييس الخادم

يجمع WCPOS تلقائيًا مقاييس أداء الخادم مع كل عملية جلب بيانات (المنتجات، الطلبات، العملاء، إلخ). يمكنك عرض هذه المقاييس في شاشة [السجلات](/support/logs).

### مقاييس الخادم النموذجية

```json
{
  "total": "24692",
  "execution_time": "76.64 ms",
  "server_load": "[15.20605469,16.16357422,16.76806641]"
}
```

**التفصيل:**
- **`total`** - عدد السجلات المعالجة (24,692 معرف منتج)
- **`execution_time`** - الوقت المستغرق لإكمال العملية (76.64 مللي ثانية)
- **`server_load`** - متوسط حمل الخادم لمدة 1، 5 و 15 دقيقة

## شرح تحميل الخادم

يمثل تحميل الخادم متوسط الحمل النظامي على فترات زمنية مختلفة:

- **القيمة الأولى** - متوسط لمدة دقيقة (15.21)
- **القيمة الثانية** - متوسط لمدة 5 دقائق (16.16)
- **القيمة الثالثة** - متوسط لمدة 15 دقيقة (16.77)

### تفسير التحميل

يمكن أن تكون قيم تحميل الخادم مضللة ويجب تفسيرها بعناية:

:::warning يمكن أن تكون قيم التحميل مضللة
متوسطات تحميل الخادم لا تتماشى دائمًا بشكل مباشر مع الأداء. يمكن أن يكون الخادم ذو القيم العالية (15+) سريع الاستجابة إذا كانت لديه موارد كافية وتم تحسينه بشكل جيد. **ركز على أوقات التنفيذ بدلاً من قيم التحميل فقط.**
:::

**إرشادات عامة:**
- **التحميل بالنسبة إلى نوى المعالج** - تحميل قدره 8.0 على خادم بثماني نوى يعني الاستفادة الكاملة من المعالج
- **التحميل المستمر مقابل المؤقت** - ارتفاعات قصيرة طبيعية، ولكن التحميل العالي المستمر قد يشير إلى مشكلات
- **الأداء أكثر أهمية** - خادم سريع الاستجابة مع تحميل عالي أفضل من خادم بطيء مع تحميل منخفض

**ما يجب مراقبته:**
- **زيادة أوقات التنفيذ** مع مرور الوقت
- **التحميل ينمو باستمرار** بدون تفسير
- **كلا من التحميل العالي وأوقات التنفيذ البطيئة** معًا

## معايير الأداء

### إرشادات وقت التنفيذ

| العملية | جيد | مقبول | ضعيف | حرج |
|---------|------|-------|------|------|
| **جلب المنتجات** | < 100مل | 100-500مل | 500مل-2ث | > 2ث |
| **إنشاء الطلب** | < 200مل | 200-800مل | 800مل-3ث | > 3ث |

### اعتبارات عدد السجلات

يجب أن تتناسب أوقات التنفيذ بشكل معقول مع عدد السجلات:

```json
// Good scaling examples
{"total": "100", "execution_time": "15.2 ms"}    // 0.15ms per record
{"total": "1000", "execution_time": "89.4 ms"}   // 0.09ms per record
{"total": "10000", "execution_time": "234.1 ms"} // 0.02ms per record

// Poor scaling examples
{"total": "100", "execution_time": "500.0 ms"}   // 5.0ms per record
{"total": "1000", "execution_time": "8000.0 ms"} // 8.0ms per record
```

## تشخيص مشكلات الأداء

### الخطوة 1: مراقبة السجلات

1. افتح **السجلات** من الدرج التنقل
2. قم بأداء العملية البطيئة (مزامنة المنتجات، إنشاء الطلب، إلخ)
3. ابحث عن إدخال السجل المقابل
4. قم بتوسيع السياق لرؤية المقاييس

### الخطوة 2: تحليل المقاييس

**وقت تنفيذ عالي + تحميل خادم عالي = مشكلة موارد الخادم**
```json
{
  "total": "5000",
  "execution_time": "3500.0 ms",
  "server_load": "[12.45, 11.23, 10.87]"
}
```
*الحل: زيادة موارد الخادم أو تحسين إعدادات الخادم*

**وقت تنفيذ عالي + تحميل خادم طبيعي = مشكلة في الإضافات/قاعدة البيانات**
```json
{
  "total": "1000",
  "execution_time": "2800.0 ms",
  "server_load": "[1.23, 1.45, 1.67]"
}
```
*الحل: تحديد الإضافات البطيئة أو تحسين استعلامات قاعدة البيانات*

**وقت تنفيذ طبيعي + تحميل خادم عالي = تحميل خادم عام**
```json
{
  "total": "2000",
  "execution_time": "150.0 ms",
  "server_load": "[8.90, 9.12, 8.45]"
}
```
*الحل: تقليل تحميل الخادم من العمليات الأخرى أو ترقية الموارد*

## مشاكل الأداء الشائعة

### 1. موارد خادم غير كافية

**الأعراض:**
- تحميل خادم عالٍ باستمرار (> 4.0 في معظم الخوادم)
- أوقات تنفيذ طويلة عبر جميع العمليات
- توقفات متكررة

**الحلول:**
- **ترقية المعالج** - المزيد من النوى تتعامل بشكل أفضل مع الطلبات المتزامنة
- **زيادة ذاكرة الوصول العشوائي** - تقلل من إدخال/إخراج القرص وتحسن التخزين المؤقت
- **استخدام تخزين SSD** - يحسن بشكل كبير أداء قاعدة البيانات
- **تحسين إعدادات PHP** - زيادة memory_limit، max_execution_time

### 2. استعلامات قاعدة بيانات بطيئة

**الأعراض:**
- أوقات تنفيذ عالية مع تحميل خادم طبيعي
- جلب المنتجات/الطلبات ببطء بشكل خاص
- رموز الخطأ المتعلقة بقاعدة البيانات في السجلات

**الحلول:**
- **تمكين WooCommerce HPOS** - أكبر تحسين في أداء قاعدة البيانات
- **استخدام التخزين المؤقت للكائنات** - Redis أو Memcached إذا كانت متاحة من مضيفك
- **تحديث WordPress باستمرار** - غالبًا ما تتضمن التحديثات الأساسية تحسينات قاعدة بيانات
- **تقييد مراجعات المشاركات** - أضف `define('WP_POST_REVISIONS', 3);` إلى wp-config.php

### 3. تدخل الإضافات

**الأعراض:**
- تدهور مفاجئ في الأداء بعد تحديث الإضافات
- عمليات معينة أبطأ بشكل ملحوظ من غيرها
- أوقات تنفيذ عالية مع تحميل خادم طبيعي

**استكشاف الأخطاء:**
1. **اختبار في بيئة تجريبية** - تعطيل جميع الإضافات باستثناء WooCommerce و WCPOS
2. **قياس الأساس** - تسجيل أوقات التنفيذ مع الحد الأدنى من الإضافات
3. **تمكين تدريجي** - إضافة الإضافات واحدة تلو الأخرى لتحديد المذنبين
4. **تحقق من روابط الإضافات** - ابحث عن الإضافات التي تتعامل مع إجراءات WooCommerce

**الإضافات المشكلة الشائعة:**
- إضافات SEO الثقيلة أثناء العمليات المتعلقة بالمنتج
- أنظمة إدارة المخزون المعقدة
- إضافات التحليلات/التتبع في الوقت الحقيقي
- إضافات مخصصة مكتوبة بشكل سيء

### 4. إعدادات WordPress/WooCommerce

**الأعراض:**
- أداء غير متسق
- أخطاء مرتبطة بالذاكرة في السجلات
- لوحة إدارة بطيئة

**قائمة التحقق للتحسين:**
- **إصدار PHP** - استخدم PHP 8.0+ لأداء أفضل
- **WooCommerce HPOS** - تمكين تخزين الطلبات عالي الأداء (انظر أدناه)
- **تخزين WordPress المؤقت** - تمكين التخزين المؤقت للكائنات إذا كان متاحًا
- **إعدادات WooCommerce** - تحسين أحجام صور المنتجات

### تخزين الطلبات عالي الأداء في WooCommerce (HPOS)

:::tip أكبر فوز في الأداء
**HPOS هو أحد أكبر التحسينات في الأداء التي يمكنك تحقيقها لـ WooCommerce.** يخزن الطلبات في جداول بيانات مخصصة بدلاً من جدول مشاركات WordPress، مما يحسن الأداء بشكل كبير للمتاجر التي تحتوي على العديد من الطلبات.
:::

**الفوائد:**
- **استعلامات الطلبات أسرع** - الطلبات مخزنة في هيكل قاعدة بيانات محسّن
- **تحميل قاعدة بيانات مخفض** - يفصل الطلبات عن المشاركات/الصفحات
- **قابلية توسيع أفضل** - يتعامل بكفاءة مع أعداد كبيرة من الطلبات
- **تحسين أداء الإدارة** - شاشات إدارة الطلبات أسرع

**كيفية التمكين:**
1. انتقل إلى `WooCommerce > الإعدادات > متقدم > الميزات`
2. قم بتمكين "تخزين الطلبات عالي الأداء"
3. اتبع عملية الترحيل

**لمعرفة المزيد:**
- [مستندات WooCommerce HPOS](https://woocommerce.com/document/high-performance-order-storage/)
- [دليل ترحيل HPOS](https://woocommerce.com/document/high-performance-order-storage/#section-3)

## أفضل الممارسات لمراقبة الخادم

### 1. فحوصات أداء منتظمة

- **مراجعات أسبوعية** - تحقق من السجلات من أجل اتجاهات الأداء
- **قياسات الأساس** - سجل أوقات التنفيذ الطبيعية
- **مراقبة خلال أوقات الذروة** - راقب أثناء فترات الازدحام العالي

### 2. ضبط تنبيهات الأداء

راقب هذه العلامات التحذيرية:
- أوقات التنفيذ > 1000مل باستمرار
- تحميل خادم > 5.0 لفترات ممتدة
- أخطاء توقف متكررة في السجلات

### 3. تخطيط السعة

تتبع اتجاهات النمو:
- **نمو عدد السجلات** - المنتجات، الطلبات، العملاء
- **تدهور الأداء** - كيف تتناسب أوقات التنفيذ
- **استخدام الموارد** - المعالج، الذاكرة، استخدام القرص

## استراتيجيات تحسين الخادم

### 1. أفضل ممارسات WordPress/WooCommerce

**قم بتمكين HPOS:**
- التحسين الأكثر تأثيرًا للأداء لـ WooCommerce
- انظر قسم HPOS أعلاه للحصول على التفاصيل

**إعداد PHP (استشر مزود الخدمة لديك):**
```ini
memory_limit = 512M
max_execution_time = 300
max_input_vars = 3000
```

**إعدادات WordPress:**
```php
// In wp-config.php - limit post revisions
define('WP_POST_REVISIONS', 3);

// Enable WordPress debug logging if needed
define('WP_DEBUG_LOG', true);
```

### 2. تحسينات على مستوى الاستضافة

**التخزين المؤقت للكائنات:**
- اسأل مزود الخدمة لديك عن توافر Redis أو Memcached
- العديد من مزودي WordPress المُدارين يقدمون هذا تلقائيًا

**إصدار PHP:**
- استخدم PHP 8.0+ لتحسينات كبيرة في الأداء
- يُسمح لمعظم المضيفين بتغيير إصدار PHP بسهولة

**موارد الخادم:**
- تأكد من توفر ذاكرة كافية (حد أدنى 1 جيجابايت، ويفضل 2 جيجابايت+)
- يوفر التخزين بتقنية SSD أداء قاعدة بيانات أفضل بكثير من الأقراص التقليدية

## متى تطلب المساعدة

اتصل بمزود الاستضافة أو مطور WordPress إذا:

- **تحميل الخادم باستمرار > 8.0** على الرغم من جهود التحسين
- **أوقات التنفيذ > 5000مل** للعمليات البسيطة
- **أخطاء الذاكرة** تظهر بشكل متكرر في السجلات
- **استعلامات قاعدة البيانات تستغرق > 2 ث** باستمرار

قدم لهم:
- مقاييس الخادم من سجلاتك
- قائمة بالإضافات النشطة
- مواصفات الخادم (المعالج، الذاكرة، نوع التخزين)
- إصدارات WordPress و WooCommerce

## الوثائق ذات الصلة

- [السجلات](/support/logs) - كيفية الوصول إلى وفهم مقاييس الخادم
- [أداء عملية الدفع](/support/performance/checkout) - تحسين معالجة المدفوعات
- [رموز الخطأ](/error-codes) - فهم رموز الخطأ المتعلقة بالأداء
- [استكشاف الأخطاء وإصلاحها](/category/troubleshooting) - أدلة استكشاف الأخطاء وإصلاحها العامة

---