---
title: أداء الخادم
sidebar_label: أداء الخادم
sidebar_position: 2
---

import Image from "@theme/IdealImage";

يؤثر أداء الخادم مباشرةً على سرعة واستجابة تطبيق WCPOS الخاص بك. تساعدك هذه الإرشادات على مراقبة وتحديد وتشخيص وتحسين أداء الخادم باستخدام المقاييس المدمجة وتقنيات معالجة المشاكل.

## فهم مقاييس الخادم

يقوم WCPOS بشكل تلقائي بجمع مقاييس أداء الخادم مع كل عملية جلب بيانات (منتجات، طلبات، عملاء، إلخ). يمكنك عرض هذه المقاييس في شاشة [السجلات](/support/logs).

### مقاييس خادم نموذجية

```json
{
  "total": "24692",
  "execution_time": "76.64 ms",
  "server_load": "[15.20605469,16.16357422,16.76806641]"
}
```

**التفصيل:**
- **`total`** - عدد السجلات المعالجة (24,692 معرف منتج)
- **`execution_time`** - الوقت المستغرق لإكمال العملية (76.64 مللي ثانية)
- **`server_load`** - متوسط أحمال الخادم لدقائق 1 و5 و15

## تفسير حمل الخادم

يمثل حمل الخادم المتوسط العام لنظام التحميل على مدى فترات زمنية مختلفة:

- **القيمة الأولى** - المتوسط لمدة دقيقة واحدة (15.21)
- **القيمة الثانية** - المتوسط لمدة 5 دقائق (16.16)
- **القيمة الثالثة** - المتوسط لمدة 15 دقيقة (16.77)

### تفسير الحمل

يمكن أن تكون قيم حمل الخادم مضللة ويجب تفسيرها بعناية:

:::warning يمكن أن تكون قيم الحمل مضللة
لا تتوافق متوسطات حمل الخادم دائمًا مباشرةً مع الأداء. يمكن لخادم ذي قيم حمل عالية (15+) أن يظل سريع الاستجابة إذا كان لديه موارد كافية ومُحسن بشكل جيد. **ركز على أوقات التنفيذ بدلاً من قيم الحمل فقط.**
:::

**إرشادات عامة:**
- **الحمل النسبي لمعالجات CPU** - يعني حمل 8.0 على خادم ذو 8 أنوية الاستغلال الكامل
- **التحميل المستدام مقابل المؤقت** - تعتبر الارتفاعات القصيرة أمرًا طبيعيًا، بينما قد تشير الزيادة المستدامة في الحمل إلى مشاكل
- **الأداء أهم** - خادم سريع الاستجابة مع حمل مرتفع أفضل من خادم بطيء مع حمل منخفض

**ما يجب مراقبته:**
- **زيادة أوقات التنفيذ** مع مرور الوقت
- **نمو الحمل باستمرار** دون تفسير
- **كلا من الحمل المرتفع وأوقات التنفيذ البطيئة** معًا

## معايير الأداء

### إرشادات أوقات التنفيذ

| العملية         | جيد       | مقبول       | ضعيف          | حرج       |
|------------------|-----------|-------------|---------------|-----------|
| **جلب المنتجات**  | < 100ms   | 100-500ms   | 500ms-2s      | > 2s      |
| **إنشاء الطلبات** | < 200ms   | 200-800ms   | 800ms-3s      | > 3s      |

### اعتبارات عدد السجلات

يجب أن تتوسع أوقات التنفيذ بشكل معقول مع عدد السجلات:

```json
// Good scaling examples
{"total": "100", "execution_time": "15.2 ms"}    // 0.15ms per record
{"total": "1000", "execution_time": "89.4 ms"}   // 0.09ms per record
{"total": "10000", "execution_time": "234.1 ms"} // 0.02ms per record

// Poor scaling examples
{"total": "100", "execution_time": "500.0 ms"}   // 5.0ms per record
{"total": "1000", "execution_time": "8000.0 ms"} // 8.0ms per record
```

## تشخيص مشاكل الأداء

### الخطوة 1: مراقبة السجلات

1. افتح **السجلات** من نافذة التنقل
2. قم بتنفيذ العملية البطيئة (مزامنة المنتجات، إنشاء الطلب، إلخ)
3. ابحث عن الإدخال المقابل في السجل
4. قم بتوسيع السياق لرؤية المقاييس

### الخطوة 2: تحليل المقاييس

**أوقات تنفيذ عالية + حمل خادم عالٍ = مشكلة في موارد الخادم**
```json
{
  "total": "5000",
  "execution_time": "3500.0 ms",
  "server_load": "[12.45, 11.23, 10.87]"
}
```
*الحل: زيادة موارد الخادم أو تحسين تكوين الخادم*

**أوقات تنفيذ عالية + حمل خادم طبيعي = مشكلة في الإضافات/قواعد البيانات**
```json
{
  "total": "1000",
  "execution_time": "2800.0 ms",
  "server_load": "[1.23, 1.45, 1.67]"
}
```
*الحل: تحديد الإضافات البطيئة أو تحسين استعلامات قاعدة البيانات*

**أوقات تنفيذ طبيعية + حمل خادم عالٍ = زيادة عامة في حمل الخادم**
```json
{
  "total": "2000",
  "execution_time": "150.0 ms",
  "server_load": "[8.90, 9.12, 8.45]"
}
```
*الحل: تقليل الحمل على الخادم من عمليات أخرى أو ترقية الموارد*

## مشاكل الأداء الشائعة

### 1. نقص موارد الخادم

**الأعراض:**
- حمل خادم مرتفع باستمرار (> 4.0 في معظم الخوادم)
- أوقات تنفيذ طويلة عبر جميع العمليات
- انقطاعات متكررة

**الحلول:**
- **ترقية المعالج** - الأنوية الإضافية تعالج الطلبات المتزامنة بشكل أفضل
- **زيادة الذاكرة العشوائية (RAM)** - يقلل من قراءة/كتابة القرص ويحسن التخزين المؤقت
- **استخدام تخزين SSD** - يحسن بشكل كبير أداء قاعدة البيانات
- **تحسين إعدادات PHP** - زيادة `memory_limit` و `max_execution_time`

### 2. استعلامات قاعدة بيانات بطيئة

**الأعراض:**
- أوقات تنفيذ عالية مع حمل خادم طبيعي
- جلب المنتجات/الطلبات ببطء خاص
- رموز أخطاء متعلقة بقاعدة البيانات في السجلات

**الحلول:**
- **تفعيل WooCommerce HPOS** - أكبر تحسين في أداء قاعدة البيانات
- **استخدام التخزين المؤقت للكائنات** - Redis أو Memcached إذا كانت متاحة من مضيفك
- **الحفاظ على تحديث WordPress** - غالبًا ما تتضمن التحديثات الأساسية تحسينات لقاعدة البيانات
- **تحديد مراجعات المنشورات** - أضف `define('WP_POST_REVISIONS', 3);` إلى wp-config.php

### 3. تداخل الإضافات

**الأعراض:**
- تدهور مفاجئ في الأداء بعد تحديث الإضافات
- عمليات معينة أبطأ بكثير من الأخرى
- أوقات تنفيذ عالية مع حمل خادم طبيعي

**استكشاف الأخطاء:**
1. **اختبر على توجيه اختبار** - قم بتعطيل جميع الإضافات باستثناء WooCommerce و WCPOS
2. **قياس الأسس** - سجل أوقات التنفيذ مع الحد الأدنى من الإضافات
3. **تفعيل تدريجياً** - أضف الإضافات واحدة تلو الأخرى لتحديد الجناة
4. **تحقق من روابط الإضافات** - ابحث عن الإضافات التي تتداخل مع إجراءات WooCommerce

**الإضافات الشائعة التي تسبب مشاكل:**
- إضافات SEO الثقيلة خلال عمليات المنتجات
- أنظمة إدارة المخزون المعقدة
- إضافات التحليلات/التتبع في الوقت الفعلي
- إضافات مخصصة مكتوبة بشكل سيء

### 4. إعدادات تكوين WordPress/WooCommerce

**الأعراض:**
- أداء غير متسق
- أخطاء متعلقة بالذاكرة في السجلات
- لوحة التحكم الإدارية بطيئة

**قائمة إعدادات التحسين:**
- **إصدار PHP** - استخدم PHP 8.0+ لتحسين الأداء
- **WooCommerce HPOS** - تفعيل تخزين الطلبات ذو الأداء العالي (انظر أدناه)
- **تخزين مؤقت WordPress** - تفعيل التخزين المؤقت للكائنات إذا كانت متاحة
- **إعدادات WooCommerce** - تحسين أحجام صور المنتجات

### تخزين الطلبات ذو الأداء العالي من WooCommerce (HPOS)

:::tip أكبر فوز على الأداء
**HPOS هو أحد أكبر تحسينات الأداء التي يمكنك إجراؤها لـ WooCommerce.** يقوم بتخزين الطلبات في جداول قاعدة بيانات مخصصة بدلاً من جدول منشورات WordPress، مما يحسن بشكل كبير الأداء للمتاجر التي تضم العديد من الطلبات.
:::

**المزايا:**
- **استعلامات طلب أسرع** - الطلبات المخزنة في هيكل قاعدة بيانات محسن
- **تقليل الحمل على قاعدة البيانات** - يفصل الطلبات عن المنشورات/الصفحات
- **تحسين القابلية للتوسع** - يتعامل بكفاءة مع أعداد كبيرة من الطلبات
- **تحسين أداء الإدارة** - شاشات إدارة الطلبات أسرع

**كيفية التفعيل:**
1. انتقل إلى `WooCommerce > الإعدادات > متقدم > المميزات`
2. تفعيل "تخزين الطلبات عالي الأداء"
3. اتبع إجراءات الترحيل

**تعلم المزيد:**
- [وثائق WooCommerce HPOS](https://woocommerce.com/document/high-performance-order-storage/)
- [دليل ترحيل HPOS](https://woocommerce.com/document/high-performance-order-storage/#section-3)

## أفضل الممارسات لمراقبة الخادم

### 1. مراجعات أداء منتظمة

- **مراجعات أسبوعية** - تحقق من السجلات للاتجاهات المتعلقة بالأداء
- **قياسات الأساس** - سجل أوقات التنفيذ الطبيعية
- **مراقبة أوقات الذروة** - مراقبة أثناء فترات الازدحام العالية

### 2. تعيين تنبيهات الأداء

راقب هذه العلامات التحذيرية:
- أوقات التنفيذ > 1000 مللي ثانية باستمرار
- حمل الخادم > 5.0 لفترات طويلة
- أخطاء انقطاع متكررة في السجلات

### 3. تخطيط السعة

تتبع اتجاهات النمو:
- **نمو عدد السجلات** - المنتجات، الطلبات، العملاء
- **تدهور الأداء** - كيفية تدرج أوقات التنفيذ
- **استخدام الموارد** - CPU، الذاكرة، استخدام القرص

## استراتيجيات تحسين الخادم

### 1. أفضل الممارسات لـ WordPress/WooCommerce

**تفعيل HPOS:**
- أكبر تحسين فعلي للأداء لـ WooCommerce
- راجع قسم HPOS أعلاه للحصول على التفاصيل

**تكوين PHP (استشر مضيفك):**
```ini
memory_limit = 512M
max_execution_time = 300
max_input_vars = 3000
```

**تكوين WordPress:**
```php
// In wp-config.php - limit post revisions
define('WP_POST_REVISIONS', 3);

// Enable WordPress debug logging if needed
define('WP_DEBUG_LOG', true);
```

### 2. تحسينات على مستوى الاستضافة

**التخزين المؤقت للكائنات:**
- استفسر من مضيفك حول توفر Redis أو Memcached
- تقدم العديد من مضيفي WordPress المدارة ذلك تلقائيًا

**إصدار PHP:**
- استخدم PHP 8.0+ لتحقيق تحسينات أداء ملحوظة
- يتيح معظم المضيفون تبديل إصدار PHP بسهولة

**موارد الخادم:**
- تأكد من توفر ذاكرة عشوائية كافية (الحد الأدنى 1 جيجابايت، ويفضل 2 جيجابايت أو أكثر)
- يوفر تخزين SSD أداءً أفضل بكثير لقاعدة البيانات مقارنة بمحركات الأقراص التقليدية

## متى تطلب المساعدة

اتصل بمزود الاستضافة الخاص بك أو مطور WordPress إذا:

- **حمولة الخادم باستمرار > 8.0** على الرغم من جهود تحسين الأداء
- **أوقات التنفيذ > 5000 مللي ثانية** للعمليات البسيطة
- **أخطاء الذاكرة** تظهر بشكل متكرر في السجلات
- **استعلامات قاعدة البيانات تأخذ > 2 ثانية** باستمرار

قدم لهم:
- مقاييس الخادم من سجلاتك
- قائمة بالإضافات النشطة
- مواصفات الخادم (CPU، RAM، نوع التخزين)
- إصدارات WordPress وWooCommerce

## الوثائق ذات الصلة

- [السجلات](/support/logs) - كيفية الوصول إلى مقاييس الخادم وتفسيرها
- [أداء عملية الدفع](/support/performance/checkout) - تحسين معالجة الدفع
- [أكواد الأخطاء](/error-codes) - فهم الأكواد المتعلقة بالأداء
- [التشخيص](/category/troubleshooting) - أدلة التشخيص العامة