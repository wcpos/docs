---
title: Arquitectura
sidebar_label: Arquitectura
sidebar_position: 2
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Esta p치gina explica la arquitectura t칠cnica de WCPOS para desarrolladores y usuarios avanzados.

## Sistema de Dos Partes

WCPOS est치 dise침ado como un sistema de dos partes:

1. **Plugin PHP:** Alojado en su servidor, es un plugin relativamente peque침o que extiende la [API REST de WooCommerce](/reference/wc-rest-api).

2. **Cliente JavaScript:** Se ejecuta localmente en su navegador o en la aplicaci칩n de escritorio, y posteriormente en aplicaciones de iOS y Android.

Puede pensarlo como dos mundos separados:

- El _mundo PHP_ es donde se administran los datos utilizando WordPress y WooCommerce.
- El _mundo JavaScript_ replica su tienda de WooCommerce localmente, optimizado para b칰squedas r치pidas y uso sin conexi칩n.

<LocalizedSVG svgName="pos-client-woo-server" />

## Sincronizaci칩n de Datos

Los datos se obtienen de WooCommerce utilizando la [API REST de WooCommerce](https://woocommerce.github.io/woocommerce-rest-api-docs/). Esto significa que el POS tiene que descargar cada producto, variaci칩n, categor칤a de producto, cliente, tarifa de impuestos y m치s para almacenarlos localmente.

Aunque inicialmente puede ser consumidor de tiempo, una vez descargados, est치n disponibles instant치neamente sin necesidad de buscarlos continuamente en el servidor.

### Qu칠 Se Sincroniza

- Productos y variaciones
- Categor칤as y etiquetas de productos
- Clientes
- Tarifas de impuestos y clases de impuestos
- Pasarelas de pago (para checkout)
- Pedidos (para historial de pedidos en Pro)

### Estrategia de Sincronizaci칩n

WCPOS utiliza una estrategia de sincronizaci칩n incremental:

1. **Sincronizaci칩n inicial:** Descarga todos los datos en la primera carga
2. **Actualizaciones incrementales:** Solo busca los cambios desde la 칰ltima sincronizaci칩n
3. **Sincronizaci칩n en segundo plano:** Comprueba peri칩dicamente si hay actualizaciones
4. **Sincronizaci칩n manual:** El usuario puede iniciar una sincronizaci칩n en cualquier momento

## Pros y Contras de la Arquitectura

| Bueno 游땕 | Malo 游 |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| B칰squeda de datos local instant치nea | Mantener los datos sincronizados es un desaf칤o |
| Datos en cach칠 disponibles sin conexi칩n | Limitado por la API REST de WooCommerce |
| Capacidad de crear aplicaciones nativas mejores para escritorio, iOS y Android | Los temas de WordPress y los hooks no pueden personalizar la aplicaci칩n POS |

## Base de Datos Local

El cliente JavaScript almacena datos en IndexedDB, una base de datos basada en navegador. Esto proporciona:

- **Persistencia:** Los datos sobreviven a reinicios del navegador
- **Rendimiento:** Consultas r치pidas sin latencia de red
- **Navegaci칩n sin conexi칩n:** Los datos en cach칠 permanecen accesibles sin internet

## Arquitectura de Checkout

El proceso de checkout utiliza un iframe/webview que carga la p치gina de Pago de Pedido de WooCommerce. Este enfoque:

- **Aprovecha las pasarelas de pago existentes:** Cualquier pasarela de pago de WooCommerce puede funcionar en el POS
- **Mantiene la seguridad:** El procesamiento de pagos se realiza a trav칠s de la infraestructura segura de WooCommerce
- **Reduce la complejidad:** No es necesario volver a implementar integraciones de pasarelas de pago

## Extensiones de API

El plugin PHP extiende la API REST de WooCommerce con puntos finales adicionales para funcionalidad espec칤fica de POS. Consulte [API REST de WooCommerce](/reference/wc-rest-api) para m치s detalles.