---
title: "Finalizar compra"
sidebar_label: Finalizar compra
sidebar_position: 1
description: Completa ventas en el proceso de pago de WCPOS, incluyendo procesamiento de pagos, pagos divididos y finalización de pedidos.
---

import Image from "@theme/IdealImage";
import LinkCards from '@site/src/components/LinkCards';
import LinkCard from '@site/src/components/LinkCard';

Cuando estés listo para completar una venta, haz clic en el botón **Finalizar compra** para abrir el modal de pago. Aquí es donde procesas el pago y completas el pedido.

{/* Screenshot: checkout-modal.png */}

## Resumen del Modal de Pago

El modal de pago muestra:

- **Número de pedido** - El ID de pedido de WooCommerce
- **Cantidad a Pagar** - Total a deber
- **Botón de Configuración de Pago** - Solucionar problemas de visualización
- **Cajero** - Quien está procesando el pedido
- **Cliente** - El cliente para este pedido (enlace clicable)
- **Campo de código de cupón** - Aplicar códigos de descuento
- **Resumen del pedido** - Productos, cantidades y totales
- **Métodos de pago** - Opciones de pago disponibles
- **Cancelar / Procesar Pago** botones

## Métodos de Pago

### Disponible en la Versión Gratuita

La versión gratuita de WCPOS incluye dos pasarelas de pago:

- **Efectivo** - Con el monto entregado y calculadora de cambio
- **Tarjeta** - Para terminales de tarjetas externas

### Pasarelas Adicionales (Pro)

:::info Característica Pro
Las pasarelas de pago adicionales requieren [WCPOS Pro](/getting-started/pro-license).
:::

Con Pro, puedes habilitar:

- **Terminal de Stripe** - Integración directa con lectores de tarjetas Stripe
- **Terminal de SumUp** - Integración con lectores de tarjetas SumUp
- **Pasarelas Personalizadas** - Crea tus propias integraciones de pago

Consulta [Métodos de Pago](/payment) para detalles sobre la configuración de pasarelas.

### Seleccionando un Método de Pago

Haz clic en un método de pago para seleccionarlo. El formulario se actualiza para mostrar los campos relevantes:

**Efectivo:**

- **Monto Entregado** - Ingresa el monto que el cliente te da
- **Cambio** - Cambio calculado automáticamente a devolver

{/* Screenshot: checkout-cash-payment.png */}

**Tarjeta:**

- Procesa el pago en tu terminal de tarjeta externa
- Haz clic en Procesar Pago para completar

## Códigos de Cupón

Para aplicar un descuento:

1. Ingresa el código del cupón en el campo
2. Haz clic en **Aplicar cupón**
3. El descuento aparecerá en el resumen del pedido

Los cupones deben configurarse en WooCommerce (`WP Admin > Marketing > Cupones`).

## Procesando el Pago

1. Selecciona un método de pago
2. Para efectivo, ingresa el monto entregado
3. Haz clic en **Procesar Pago**
4. El pedido se completa y se muestra el [recibo](/pos/checkout/receipts)

## Configuración de Pago (Solución de Problemas)

El modal de pago utiliza un iframe/webview para mostrar la página de pago del pedido de WooCommerce. Esto aprovecha la infraestructura de pago existente de WooCommerce, lo que significa que cualquier pasarela de pago que funcione con WooCommerce debería funcionar en el POS.

Sin embargo, los scripts de temas y plugins a veces pueden interferir. Haz clic en **Configuración de Pago** para solucionar problemas:

<div class="image-container">
  <Image
    alt="Configuración de Pago en el Modal de Pago"
    img="/img/checkout-settings.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">Configuración de Pago en el Modal de Pago</p>
</div>

<div class="image-container">
  <Image
    alt="Formulario para desactivar todos los estilos y scripts"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">Formulario para desactivar todos los estilos y scripts</p>
</div>

### Desactivar Todos los Estilos y Scripts

:::warning Opción Nuclear
Esta es la opción nuclear y solo debe usarse para pruebas o en casos raros donde el desarrollador sepa lo que está haciendo. Desactivar todos los scripts de wp_head eliminará incluso los scripts necesarios de WooCommerce para expandir/contraer las pasarelas de pago, rompiendo potencialmente la funcionalidad de pago.
:::

- **Desactivar wp_head** - Elimina todos los scripts/estilos del encabezado de WordPress
- **Desactivar wp_footer** - Elimina todos los scripts/estilos del pie de página de WordPress

### Desactivar Estilos Seleccionados

Desactiva selectivamente CSS que pueda causar problemas de visualización:

- wp-emoji-styles
- wp-block-library
- classic-theme-styles
- woocommerce-layout
- woocommerce-smallscreen
- woocommerce-general
- etc.

### Desactivar Scripts Seleccionados

Desactiva selectivamente JavaScript que pueda interferir con las pasarelas de pago:

- wc-add-to-cart
- selectWoo
- wc-checkout
- woocommerce
- html5shiv
- etc.

:::tip
Si una pasarela de pago no se muestra correctamente:

1. Intenta desactivar primero los estilos del tema
2. Luego intenta desactivar los scripts de WooCommerce que no son necesarios
3. Ten cuidado de no desactivar los scripts requeridos por tu pasarela de pago
:::

## Cancelar

Haz clic en **Cancelar** para cerrar el modal de pago sin completar el pedido. El pedido permanece como un carrito abierto.

## Documentación Relacionada

<LinkCards>
  <LinkCard to="/pos/checkout/receipts" title="Recibos" description="Después de finalizar la compra, imprime o envía recibos por correo" />
  <LinkCard to="/payment" title="Métodos de Pago" description="Configura las pasarelas de pago" />
  <LinkCard to="/payment/custom-gateways" title="Pasarelas Personalizadas" description="Crea integraciones de pago personalizadas" />
</LinkCards>