---
title: Arquitetura
sidebar_label: Arquitetura
sidebar_position: 2
description: Arquitetura t√©cnica do WCPOS explicando como o cliente POS se comunica com a API REST do WooCommerce.
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Esta p√°gina explica a arquitetura t√©cnica do WCPOS para desenvolvedores e usu√°rios avan√ßados.

## Sistema em Duas Partes

O WCPOS √© projetado como um sistema em duas partes:

1. **Plugin PHP:** Hospedado em seu servidor, este √© um plugin relativamente pequeno que estende a [API REST do WooCommerce](/reference/wc-rest-api).

2. **Cliente JavaScript:** Este roda localmente em seu navegador ou no aplicativo de desktop, e posteriormente nos aplicativos iOS e Android.

Voc√™ pode pensar nisso como dois mundos separados:

- O _mundo PHP_ √© onde a gest√£o de dados acontece usando WordPress e WooCommerce.
- O _mundo JavaScript_ replica sua loja WooCommerce localmente, otimizado para pesquisas r√°pidas e uso offline.

<LocalizedSVG svgName="pos-client-woo-server" />

## Sincroniza√ß√£o de Dados

Os dados s√£o buscados do WooCommerce usando a [API REST do WooCommerce](https://woocommerce.github.io/woocommerce-rest-api-docs/). Isso significa que o POS precisa baixar cada produto, varia√ß√£o, categoria de produto, cliente, taxa de imposto e mais para armazen√°-los localmente.

Embora isso possa ser demorado inicialmente, uma vez baixados, eles ficam dispon√≠veis instantaneamente sem a necessidade de buscar continuamente do servidor.

### O que √© Sincronizado?

- Produtos e varia√ß√µes
- Categorias e tags de produtos
- Clientes
- Taxas de imposto e classes de imposto
- Gateways de pagamento (para o checkout)
- Pedidos (para hist√≥rico de pedidos no Pro)

### Estrat√©gia de Sincroniza√ß√£o

O WCPOS usa uma estrat√©gia de sincroniza√ß√£o incremental:

1. **Sincroniza√ß√£o inicial:** Baixa todos os dados na primeira carga
2. **Atualiza√ß√µes incrementais:** Apenas busca as altera√ß√µes desde a √∫ltima sincroniza√ß√£o
3. **Sincroniza√ß√£o em segundo plano:** Verifica periodicamente por atualiza√ß√µes
4. **Sincroniza√ß√£o manual:** O usu√°rio pode acionar uma sincroniza√ß√£o a qualquer momento

## Pr√≥s e Contras da Arquitetura

| Bom üòä | Ruim üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| A pesquisa de dados locais √© instant√¢nea | Manter os dados sincronizados √© desafiador |
| Dados em cache dispon√≠veis offline | Limitado pela API REST do WooCommerce |
| Capacidade de criar melhores aplicativos nativos para desktop, iOS e Android | Temas e hooks do WordPress n√£o podem personalizar o aplicativo POS |

## Banco de Dados Local

O cliente JavaScript armazena dados no IndexedDB, um banco de dados baseado em navegador. Isso fornece:

- **Persist√™ncia:** Os dados sobrevivem a reinicializa√ß√µes do navegador
- **Performance:** Consultas r√°pidas sem lat√™ncia de rede
- **Navega√ß√£o offline:** Dados em cache permanecem acess√≠veis sem internet

## Arquitetura de Checkout

O processo de checkout usa um iframe/webview que carrega a p√°gina de Pagamento do Pedido do WooCommerce. Esta abordagem:

- **Aproveita gateways de pagamento existentes:** Qualquer gateway de pagamento do WooCommerce pode funcionar no POS
- **Mant√©m seguran√ßa:** O processamento de pagamentos ocorre atrav√©s da infraestrutura segura do WooCommerce
- **Reduz complexidade:** N√£o h√° necessidade de reimplementar integra√ß√µes de gateways de pagamento

## Extens√µes da API

O plugin PHP estende a API REST do WooCommerce com endpoints adicionais para funcionalidades espec√≠ficas do POS. Veja a [API REST do WooCommerce](/reference/wc-rest-api) para detalhes.