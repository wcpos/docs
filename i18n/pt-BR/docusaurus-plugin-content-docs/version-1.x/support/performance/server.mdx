---
title: Performance do Servidor
sidebar_label: Performance do Servidor
sidebar_position: 2
---

import Image from "@theme/IdealImage";

A performance do servidor impacta diretamente a velocidade e a capacidade de resposta da sua aplicação WCPOS. Este guia ajuda você a monitorar, diagnosticar e otimizar a performance do servidor usando as métricas integradas e técnicas de resolução de problemas.

## Compreendendo as Métricas do Servidor

O WCPOS coleta automaticamente métricas de performance do servidor com cada operação de busca de dados (produtos, pedidos, clientes, etc.). Você pode visualizar essas métricas na tela de [Logs](/support/logs).

### Métricas Típicas do Servidor

```json
{
  "total": "24692",
  "execution_time": "76.64 ms",
  "server_load": "[15.20605469,16.16357422,16.76806641]"
}
```

**Detalhamento:**
- **`total`** - Número de registros processados (24.692 IDs de produtos)
- **`execution_time`** - Tempo necessário para completar a operação (76,64 milissegundos)
- **`server_load`** - Médias de carga do servidor para 1, 5 e 15 minutos

## Carga do Servidor Explicada

A carga do servidor representa a carga média do sistema ao longo de diferentes períodos de tempo:

- **Primeiro valor** - média de 1 minuto (15,21)
- **Segundo valor** - média de 5 minutos (16,16)
- **Terceiro valor** - média de 15 minutos (16,77)

### Interpretação da Carga

Os valores de carga do servidor podem ser enganosos e devem ser interpretados com cuidado:

:::warning Valores de Carga Podem Ser Enganosos
As médias de carga do servidor nem sempre se correlacionam diretamente com a performance. Um servidor com altos valores de carga (15+) ainda pode ser muito responsivo se tiver recursos suficientes e estiver bem otimizado. **Concentre-se nos tempos de execução em vez de nos valores de carga apenas.**
:::

**Diretrizes Gerais:**
- **Carga em relação aos núcleos da CPU** - Uma carga de 8.0 em um servidor de 8 núcleos significa utilização total
- **Sustentada vs. temporária** - Picos breves são normais, alta carga sustentada pode indicar problemas
- **A performance importa mais** - Um servidor responsivo com alta carga é melhor do que um servidor lento com baixa carga

**O que observar:**
- **Tempos de execução aumentando** ao longo do tempo
- **Carga crescendo consistentemente** sem explicação
- **Tanto carga alta QUANTO tempos de execução lentos** juntos

## Referências de Performance

### Diretrizes de Tempo de Execução

| Operação | Bom | Aceitável | Ruim | Crítico |
|----------|-----|-----------|------|---------|
| **Busca de produto** | < 100ms | 100-500ms | 500ms-2s | > 2s |
| **Criação de pedido** | < 200ms | 200-800ms | 800ms-3s | > 3s |

### Considerações sobre Contagem de Registros

O tempo de execução deve escalar razoavelmente com a contagem de registros:

```json
// Exemplos de bom escalonamento
{"total": "100", "execution_time": "15.2 ms"}    // 0.15ms por registro
{"total": "1000", "execution_time": "89.4 ms"}   // 0.09ms por registro
{"total": "10000", "execution_time": "234.1 ms"} // 0.02ms por registro

// Exemplos de mau escalonamento
{"total": "100", "execution_time": "500.0 ms"}   // 5.0ms por registro
{"total": "1000", "execution_time": "8000.0 ms"} // 8.0ms por registro
```

## Diagnosticando Problemas de Performance

### Passo 1: Monitorar os Logs

1. Abra **Logs** a partir do menu de navegação
2. Execute a operação lenta (sincronizar produtos, criar pedido, etc.)
3. Procure a entrada de log correspondente
4. Expanda o contexto para ver as métricas

### Passo 2: Analisar as Métricas

**Alto tempo de execução + Alta carga do servidor = Problema de recurso do servidor**
```json
{
  "total": "5000",
  "execution_time": "3500.0 ms",
  "server_load": "[12.45, 11.23, 10.87]"
}
```
*Solução: Aumentar os recursos do servidor ou otimizar a configuração do servidor*

**Alto tempo de execução + Carga do servidor normal = Problema de Plugin/banco de dados**
```json
{
  "total": "1000",
  "execution_time": "2800.0 ms",
  "server_load": "[1.23, 1.45, 1.67]"
}
```
*Solução: Identificar plugins lentos ou otimizar consultas ao banco de dados*

**Tempo de execução normal + Alta carga do servidor = Sobrecarga geral do servidor**
```json
{
  "total": "2000",
  "execution_time": "150.0 ms",
  "server_load": "[8.90, 9.12, 8.45]"
}
```
*Solução: Reduzir a carga do servidor de outros processos ou atualizar recursos*

## Problemas Comuns de Performance

### 1. Recursos do Servidor Insuficientes

**Sintomas:**
- Carga do servidor consistentemente alta (> 4.0 na maioria dos servidores)
- Tempos de execução longos em todas as operações
- Timeouts frequentes

**Soluções:**
- **Atualizar a CPU** - Mais núcleos lidam melhor com requisições simultâneas
- **Aumentar a RAM** - Reduz o I/O de disco e melhora o cache
- **Usar armazenamento SSD** - Melhora drasticamente a performance do banco de dados
- **Otimizar configurações do PHP** - Aumentar memory_limit, max_execution_time

### 2. Consultas ao Banco de Dados Lentas

**Sintomas:**
- Tempos de execução altos com carga normal do servidor
- Busca de produtos/pedidos particularmente lenta
- Códigos de erro relacionados a banco de dados nos logs

**Soluções:**
- **Ativar WooCommerce HPOS** - A maior melhoria de performance do banco de dados
- **Usar caching de objeto** - Redis ou Memcached se disponível no seu host
- **Manter o WordPress atualizado** - Atualizações do core costumam incluir otimizações para o banco de dados
- **Limitar revisões de postagens** - Adicionar `define('WP_POST_REVISIONS', 3);` ao wp-config.php

### 3. Interferência de Plugins

**Sintomas:**
- Degradação de performance repentina após atualizações de plugins
- Operações específicas muito mais lentas que outras
- Altos tempos de execução com carga normal do servidor

**Resolução de Problemas:**
1. **Testar em staging** - Desativar todos os plugins, exceto WooCommerce e WCPOS
2. **Medir a linha de base** - Registrar os tempos de execução com plugins mínimos
3. **Ativar gradualmente** - Adicionar plugins um a um para identificar culpados
4. **Verificar ganchos de plugin** - Procurar plugins que se conectam a ações do WooCommerce

**Plugins problemáticos comuns:**
- Plugins pesados de SEO durante operações de produtos
- Sistemas complexos de gestão de inventário
- Plugins de análise/monitoramento em tempo real
- Plugins personalizados mal codificados

### 4. Configuração do WordPress/WooCommerce

**Sintomas:**
- Performance inconsistente
- Erros relacionados a memória nos logs
- Painel de administração lento

**Checklist de otimização:**
- **Versão do PHP** - Usar PHP 8.0+ para melhor performance
- **WooCommerce HPOS** - Ativar armazenamento de pedidos de alto desempenho (veja abaixo)
- **Caching do WordPress** - Ativar caching de objeto se disponível
- **Configurações do WooCommerce** - Otimizar tamanhos de imagens de produtos

### Armazenamento de Pedidos de Alto Desempenho do WooCommerce (HPOS)

:::tip A Maior Vantagem de Performance
**O HPOS é uma das melhorias de performance mais significativas que você pode fazer para o WooCommerce.** Ele armazena pedidos em tabelas de banco de dados personalizadas em vez da tabela de posts do WordPress, melhorando drasticamente a performance para lojas com muitos pedidos.
:::

**Benefícios:**
- **Consultas de pedido mais rápidas** - Pedidos armazenados em estrutura de banco de dados otimizada
- **Carga de banco de dados reduzida** - Separa pedidos de posts/páginas
- **Melhor escalabilidade** - Lida eficientemente com grandes quantidades de pedidos
- **Performance do admin melhorada** - Telas de gerenciamento de pedidos mais rápidas

**Como Habilitar:**
1. Vá para `WooCommerce > Configurações > Avançado > Recursos`
2. Ative "Armazenamento de pedidos de alto desempenho"
3. Siga o processo de migração

**Saiba mais:**
- [Documentação do WooCommerce HPOS](https://woocommerce.com/document/high-performance-order-storage/)
- [Guia de Migração do HPOS](https://woocommerce.com/document/high-performance-order-storage/#section-3)

## Melhores Práticas de Monitoramento do Servidor

### 1. Verificações Regulares de Performance

- **Revisões semanais** - Verificar logs em busca de tendências de performance
- **Medições de linha de base** - Registrar tempos de execução normais
- **Monitoramento em horários de pico** - Monitorar durante períodos de alta tráfego

### 2. Definir Alertas de Performance

Monitore estes sinais de alerta:
- Tempos de execução > 1000ms consistentemente
- Carga do servidor > 5.0 por períodos prolongados
- Erros de timeout frequentes nos logs

### 3. Planejamento de Capacidade

Acompanhe as tendências de crescimento:
- **Crescimento da contagem de registros** - Produtos, pedidos, clientes
- **Degradação de performance** - Como o tempo de execução escala
- **Utilização de recursos** - CPU, memória, uso de disco

## Estratégias de Otimização do Servidor

### 1. Melhores Práticas para WordPress/WooCommerce

**Ativar HPOS:**
- A melhoria de performance mais impactante para o WooCommerce
- Veja a seção HPOS acima para detalhes

**Configuração do PHP (consulte seu host):**
```ini
memory_limit = 512M
max_execution_time = 300
max_input_vars = 3000
```

**Configuração do WordPress:**
```php
// No wp-config.php - limitar revisões de postagens
define('WP_POST_REVISIONS', 3);

// Ativar registro de depuração do WordPress, se necessário
define('WP_DEBUG_LOG', true);
```

### 2. Otimizações em Nível de Hospedagem

**Caching de Objeto:**
- Pergunte ao seu host sobre a disponibilidade de Redis ou Memcached
- Muitos hosts WordPress gerenciados fornecem isso automaticamente

**Versão do PHP:**
- Use PHP 8.0+ para melhorias significativas de performance
- A maioria dos hosts permite fácil troca de versão do PHP

**Recursos do Servidor:**
- Garanta RAM adequada (mínimo 1GB, preferencialmente 2GB+)
- Armazenamento SSD fornece desempenho de banco de dados muito melhor do que discos tradicionais

## Quando Buscar Ajuda

Entre em contato com seu provedor de hospedagem ou um desenvolvedor WordPress se:

- **Carga do servidor consistentemente > 8.0** apesar dos esforços de otimização
- **Tempos de execução > 5000ms** para operações simples
- **Erros de memória** aparecendo frequentemente nos logs
- **Consultas ao banco de dados levando > 2 segundos** consistentemente

Forneça a eles:
- Métricas do servidor de seus logs
- Lista de plugins ativos
- Especificações do servidor (CPU, RAM, tipo de armazenamento)
- Versões do WordPress e WooCommerce

## Documentação Relacionada

- [Logs](/support/logs) - Como acessar e interpretar métricas do servidor
- [Performance do Checkout](/support/performance/checkout) - Otimize o processamento de pagamento
- [Códigos de Erro](/error-codes) - Entenda códigos de erro relacionados a performance
- [Solução de Problemas](/category/troubleshooting) - Guias de solução de problemas gerais

---