---
title: Desempenho do Servidor
sidebar_label: Desempenho do Servidor
sidebar_position: 2
---

import Image from "@theme/IdealImage";

O desempenho do servidor impacta diretamente a velocidade e a capacidade de resposta da sua aplicação WCPOS. Este guia ajuda você a monitorar, diagnosticar e otimizar o desempenho do servidor usando as métricas integradas e técnicas de solução de problemas.

## Compreendendo as Métricas do Servidor

O WCPOS coleta automaticamente métricas de desempenho do servidor com cada operação de busca de dados (produtos, pedidos, clientes, etc.). Você pode visualizar essas métricas na tela [Logs](/support/logs).

### Métricas Típicas do Servidor

```json
{
  "total": "24692",
  "execution_time": "76.64 ms",
  "server_load": "[15.20605469,16.16357422,16.76806641]"
}
```

**Desagregação:**
- **`total`** - Número de registros processados (24.692 IDs de produtos)
- **`execution_time`** - Tempo levado para completar a operação (76,64 milissegundos)
- **`server_load`** - Médias de carga do servidor para 1, 5 e 15 minutos

## Carga do Servidor Explicada

A carga do servidor representa a carga média do sistema ao longo de diferentes períodos de tempo:

- **Primeiro valor** - média de 1 minuto (15,21)
- **Segundo valor** - média de 5 minutos (16,16)
- **Terceiro valor** - média de 15 minutos (16,77)

### Interpretação da Carga

Os valores de carga do servidor podem ser enganosos e devem ser interpretados com cuidado:

:::warning Valores de Carga Podem Ser Enganosos
As médias de carga do servidor nem sempre se correlacionam diretamente com o desempenho. Um servidor com valores de carga altos (15+) ainda pode ser muito responsivo se tiver recursos suficientes e estiver bem otimizado. **Concentre-se nos tempos de execução em vez de apenas nos valores de carga.**
:::

**Diretrizes Gerais:**
- **Carga relativa aos núcleos da CPU** - Uma carga de 8,0 em um servidor de 8 núcleos significa total utilização
- **Sustentada vs. temporária** - Picos breves são normais, carga alta sustentada pode indicar problemas
- **Desempenho é mais importante** - Um servidor responsivo com carga alta é melhor do que um servidor lento com carga baixa

**O que observar:**
- **Tempos de execução aumentando** ao longo do tempo
- **Carga aumentando consistentemente** sem explicação
- **Carga alta E tempos de execução lentos** juntos

## Referências de Desempenho

### Diretrizes de Tempo de Execução

| Operação | Bom | Aceitável | Ruim | Crítico |
|----------|-----|-----------|------|---------|
| **Busca de produto** | < 100ms | 100-500ms | 500ms-2s | > 2s |
| **Criação de pedido** | < 200ms | 200-800ms | 800ms-3s | > 3s |

### Considerações sobre Contagem de Registros

O tempo de execução deve escalar razoavelmente com a contagem de registros:

```json
// Good scaling examples
{"total": "100", "execution_time": "15.2 ms"}    // 0.15ms per record
{"total": "1000", "execution_time": "89.4 ms"}   // 0.09ms per record
{"total": "10000", "execution_time": "234.1 ms"} // 0.02ms per record

// Poor scaling examples
{"total": "100", "execution_time": "500.0 ms"}   // 5.0ms per record
{"total": "1000", "execution_time": "8000.0 ms"} // 8.0ms per record
```

## Diagnóstico de Problemas de Desempenho

### Passo 1: Monitore os Logs

1. Abra **Logs** no menu de navegação
2. Realize a operação lenta (sincronizar produtos, criar pedido, etc.)
3. Procure pela entrada correspondente no log
4. Expanda o contexto para ver as métricas

### Passo 2: Analise as Métricas

**Alto tempo de execução + Alta carga do servidor = Problema de recursos do servidor**
```json
{
  "total": "5000",
  "execution_time": "3500.0 ms",
  "server_load": "[12.45, 11.23, 10.87]"
}
```
*Solução: Aumentar os recursos do servidor ou otimizar a configuração do servidor*

**Alto tempo de execução + Carga do servidor normal = Problema de plugin/banco de dados**
```json
{
  "total": "1000",
  "execution_time": "2800.0 ms",
  "server_load": "[1.23, 1.45, 1.67]"
}
```
*Solução: Identificar plugins lentos ou otimizar consultas ao banco de dados*

**Tempo de execução normal + Alta carga do servidor = Sobrecarga geral do servidor**
```json
{
  "total": "2000",
  "execution_time": "150.0 ms",
  "server_load": "[8.90, 9.12, 8.45]"
}
```
*Solução: Reduzir a carga do servidor de outros processos ou atualizar recursos*

## Problemas Comuns de Desempenho

### 1. Recursos Insuficientes do Servidor

**Sintomas:**
- Carga do servidor consistentemente alta (> 4.0 na maioria dos servidores)
- Tempos de execução longos em todas as operações
- Timeouts frequentes

**Soluções:**
- **Atualizar CPU** - Mais núcleos lidam melhor com solicitações simultâneas
- **Aumentar RAM** - Reduz I/O do disco e melhora o cache
- **Usar armazenamento SSD** - Melhora drasticamente o desempenho do banco de dados
- **Otimizar configurações do PHP** - Aumentar memory_limit, max_execution_time

### 2. Consultas de Banco de Dados Lentas

**Sintomas:**
- Altos tempos de execução com carga normal do servidor
- Busca de produtos/pedidos particularmente lenta
- Códigos de erro relacionados ao banco de dados nos logs

**Soluções:**
- **Ativar WooCommerce HPOS** - A maior melhoria de desempenho do banco de dados
- **Usar cache de objetos** - Redis ou Memcached, se disponível no seu host
- **Manter o WordPress atualizado** - Atualizações do núcleo frequentemente incluem otimizações de banco de dados
- **Limitar revisões de posts** - Adicionar `define('WP_POST_REVISIONS', 3);` ao wp-config.php

### 3. Interferência de Plugins

**Sintomas:**
- Degradação de desempenho repentina após atualizações de plugins
- Operações específicas muito mais lentas do que outras
- Altos tempos de execução com carga normal do servidor

**Solução de Problemas:**
1. **Testar em staging** - Desabilitar todos os plugins, exceto WooCommerce e WCPOS
2. **Medir a linha de base** - Registrar tempos de execução com plugins mínimos
3. **Ativar gradualmente** - Adicionar plugins um a um para identificar os culpados
4. **Verificar hooks de plugins** - Procurar plugins que estão se conectando a ações do WooCommerce

**Plugins problemáticos comuns:**
- Plugins de SEO pesados durante operações de produtos
- Sistemas complexos de gestão de estoque
- Plugins de análise/monitoramento em tempo real
- Plugins personalizados mal codificados

### 4. Configuração do WordPress/WooCommerce

**Sintomas:**
- Desempenho inconsistente
- Erros relacionados à memória nos logs
- Painel administrativo lento

**Lista de verificação de otimização:**
- **Versão do PHP** - Use PHP 8.0+ para melhor desempenho
- **WooCommerce HPOS** - Ative o Armazenamento de Pedidos de Alta Performance (veja abaixo)
- **Cache do WordPress** - Ativar cache de objetos, se disponível
- **Configurações do WooCommerce** - Otimizar tamanhos de imagem dos produtos

### Armazenamento de Pedidos de Alta Performance do WooCommerce (HPOS)

:::tip Maior Ganho de Desempenho
**HPOS é uma das melhorias de desempenho mais significativas que você pode fazer para o WooCommerce.** Ele armazena pedidos em tabelas de banco de dados personalizadas em vez da tabela de posts do WordPress, melhorando drasticamente o desempenho para lojas com muitos pedidos.
:::

**Benefícios:**
- **Consultas de pedidos mais rápidas** - Pedidos armazenados em estrutura de banco de dados otimizada
- **Carga de banco de dados reduzida** - Separa pedidos de posts/páginas
- **Melhor escalabilidade** - Lida com grande quantidade de pedidos de forma eficiente
- **Melhor desempenho administrativo** - Telas de gerenciamento de pedidos mais rápidas

**Como Ativar:**
1. Vá para `WooCommerce > Configurações > Avançado > Recursos`
2. Ative "Armazenamento de pedidos de alta performance"
3. Siga o processo de migração

**Saiba Mais:**
- [Documentação do WooCommerce HPOS](https://woocommerce.com/document/high-performance-order-storage/)
- [Guia de Migração do HPOS](https://woocommerce.com/document/high-performance-order-storage/#section-3)

## Melhores Práticas de Monitoramento do Servidor

### 1. Verificações Regulares de Desempenho

- **Revisões semanais** - Verifique os logs em busca de tendências de desempenho
- **Medições de linha de base** - Registre tempos de execução normais
- **Monitoramento em horários de pico** - Monitore durante períodos de alto tráfego

### 2. Defina Alertas de Desempenho

Monitore estes sinais de alerta:
- Tempos de execução > 1000ms consistentemente
- Carga do servidor > 5.0 por períodos prolongados
- Erros frequentes de timeout nos logs

### 3. Planejamento de Capacidade

Acompanhe tendências de crescimento:
- **Crescimento da contagem de registros** - Produtos, pedidos, clientes
- **Degradação de desempenho** - Como o tempo de execução escala
- **Utilização de recursos** - CPU, memória, uso do disco

## Estratégias de Otimização do Servidor

### 1. Melhores Práticas do WordPress/WooCommerce

**Ativar HPOS:**
- A melhoria de desempenho mais impactante para o WooCommerce
- Veja a seção HPOS acima para mais detalhes

**Configuração do PHP (consulte seu host):**
```ini
memory_limit = 512M
max_execution_time = 300
max_input_vars = 3000
```

**Configuração do WordPress:**
```php
// In wp-config.php - limit post revisions
define('WP_POST_REVISIONS', 3);

// Enable WordPress debug logging if needed
define('WP_DEBUG_LOG', true);
```

### 2. Otimizações a Nível de Hospedagem

**Cache de Objetos:**
- Pergunte ao seu host sobre a disponibilidade do Redis ou Memcached
- Muitos hosts gerenciados de WordPress fornecem isso automaticamente

**Versão do PHP:**
- Use PHP 8.0+ para melhorias significativas de desempenho
- A maioria dos hosts permite fácil troca da versão do PHP

**Recursos do Servidor:**
- Garantir RAM adequada (mínimo de 1GB, preferencialmente 2GB+)
- Armazenamento SSD oferece desempenho de banco de dados muito melhor do que discos tradicionais

## Quando Buscar Ajuda

Entre em contato com seu provedor de hospedagem ou um desenvolvedor WordPress se:

- **Carga do servidor consistentemente > 8.0** apesar dos esforços de otimização
- **Tempos de execução > 5000ms** para operações simples
- **Erros de memória** aparecendo com frequência nos logs
- **Consultas ao banco de dados levando > 2 segundos** consistentemente

Forneça a eles:
- Métricas do servidor de seus logs
- Lista de plugins ativos
- Especificações do servidor (CPU, RAM, tipo de armazenamento)
- Versões do WordPress e WooCommerce

## Documentação Relacionada

- [Logs](/support/logs) - Como acessar e interpretar métricas do servidor
- [Desempenho do Checkout](/support/performance/checkout) - Otimizar processamento de pagamentos
- [Códigos de Erro](/error-codes) - Entender códigos de erro relacionados ao desempenho
- [Solução de Problemas](/category/troubleshooting) - Guias gerais de solução de problemas