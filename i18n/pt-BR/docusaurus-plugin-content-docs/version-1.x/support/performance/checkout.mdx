---
title: "Desempenho do Checkout"
sidebar_label: "Desempenho do Checkout"
sidebar_position: 1
---

import Image from "@theme/IdealImage";

Se você está enfrentando um desempenho lento durante o processo de checkout, este guia o ajudará a identificar e resolver as causas mais comuns.

## Como Funciona o Checkout do WCPOS

O checkout do WCPOS abre um modal com um iframe/webview que carrega uma versão simplificada do template de Pagamento do WooCommerce. Esta é essencialmente a mesma página que os clientes veem na [página de Pagamento do Cliente](https://woocommerce.com/document/managing-orders/paying-for-orders/#customer-payment-page-link) ao pagarem por pedidos online.

:::info Nota do Desenvolvedor
Você pode visualizar o template do checkout no repositório do plugin WCPOS: [templates/payment.php](https://github.com/wcpos/woocommerce-pos/blob/main/templates/payment.php)
:::

## Otimizações Integradas

O WCPOS inclui várias otimizações para melhorar o desempenho do checkout:

- **Template simplificado** - Remove elementos desnecessários do tema e desordem
- **Carregamento seletivo de scripts/estilos** - Apenas scripts e estilos essenciais são carregados
- **Estrutura DOM mínima** - Reduz a complexidade da página de checkout

No entanto, alguns scripts e estilos não podem ser completamente desativados porque os gateways de pagamento podem precisar deles para funcionar corretamente.

## Problemas Comuns de Desempenho

### 1. Scripts e Estilos Desnecessários

**Problema:** Temas e plugins adicionam scripts e estilos que não são necessários para o checkout, desacelerando os tempos de carregamento da página.

**Solução:** Use as [Configurações do Checkout](/pos/checkout#checkout-settings-troubleshooting) para desativar recursos desnecessários:

1. Clique no botão **Configurações do Checkout** no modal de checkout.
2. Tente desativar os estilos do tema primeiro:
   - wp-block-library
   - classic-theme-styles
   - Estilos personalizados do seu tema
3. Desative scripts do WooCommerce não essenciais:
   - wc-add-to-cart
   - selectWoo (se não for necessário para seu gateway)
   - html5shiv

<div class="image-container">
  <Image
    alt="Formulário para desativar todos os estilos e scripts"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">Formulário para desativar todos os estilos e scripts</p>
</div>

:::warning Atenção
Não desative scripts que seu gateway de pagamento requer. Se um método de pagamento parar de funcionar após desativar um script, reative-o.
:::

### 2. Interferência de Plugin Durante a Criação do Pedido

**Problema:** Plugins que se conectam ao processo de criação de pedidos podem causar atrasos significativos. Por exemplo, plugins de contabilidade como Xero podem enviar dados de pedidos para servidores externos, bloqueando o processo de checkout.

**Passos para Solução de Problemas:**

1. **Teste em staging** - Se você tem um servidor de staging, desative todos os plugins, exceto WooCommerce e WCPOS.
2. **Teste a velocidade do checkout** - Processar um pedido de teste e observe o desempenho.
3. **Ative os plugins gradualmente** - Se o desempenho melhorar drasticamente, reative os plugins um a um para identificar o culpado.
4. **Contate os desenvolvedores de plugins** - Se um plugin específico estiver causando problemas, entre em contato com o desenvolvedor para obter conselhos de otimização.

**Tipos comuns de plugins problemáticos:**
- Integrações de contabilidade/contabilidade (Xero, QuickBooks)
- Ferramentas de marketing por email que acionam na criação de pedidos
- Sistemas de gestão de inventário
- Calculadoras de frete complexas
- Ferramentas de análise de terceiros

### 3. Limitações de Recursos do Servidor

**Problema:** Se o seu servidor estiver sobrecarregado ou não tiver recursos suficientes, todas as operações, incluindo o checkout, serão lentas.

**Monitoramento e Soluções:**

1. **Monitore o desempenho do servidor:**
   - Uso da CPU durante o checkout
   - Consumo de memória
   - Desempenho de consultas ao banco de dados
   - Latência da rede

2. **Otimize os recursos do servidor:**
   - Aumente o limite de memória PHP
   - Otimize consultas ao banco de dados
   - Use plugins de cache (mas teste a compatibilidade)
   - Considere atualizar o plano de hospedagem

3. **Otimização do banco de dados:**
   - Limpe dados de pedidos antigos
   - Otimize tabelas do banco de dados
   - Remova plugins e temas desnecessários

## Melhores Práticas para Desenvolvedores WordPress

:::tip Para Desenvolvedores
Os desenvolvedores do WordPress devem usar `wp_enqueue_scripts` para adicionar corretamente scripts e estilos às páginas. Infelizmente, alguns desenvolvedores de plugins e temas não seguem as melhores práticas e inserem código diretamente nos templates, tornando impossível descolar esses recursos facilmente.
:::

Se você está enfrentando problemas com scripts ou estilos que não podem ser desativados através das Configurações do Checkout:

1. **Entre em contato com o desenvolvedor** - Peça para seguir os padrões de codificação do WordPress.
2. **Use temas filhos** - Substitua templates problemáticos em um tema filho.
3. **Ganchos personalizados** - Use ganchos do WordPress para remover código problemático nas páginas de checkout.

## Teste de Desempenho

Para testar melhorias de desempenho do checkout:

1. **Medição de base** - Meça quanto tempo o checkout leva antes de fazer alterações.
2. **Faça uma mudança por vez** - Isso ajuda a identificar quais alterações têm maior impacto.
3. **Teste com gateways de pagamento reais** - Não teste apenas com pagamentos em dinheiro.
4. **Teste em diferentes dispositivos** - Dispositivos móveis podem apresentar características de desempenho diferentes.

## Vitórias Rápidas

Aqui estão as melhorias de desempenho mais eficazes que você pode fazer:

1. **Desative os estilos do tema** - Muitas vezes proporciona a maior melhoria.
2. **Remova scripts desnecessários do WooCommerce** - Reduz o tempo de execução do JavaScript.
3. **Audite ganchos de criação de pedidos** - Identifique e otimize plugins lentos.
4. **Otimize imagens** - Garanta que quaisquer imagens no checkout sejam otimizadas.
5. **Use um plugin de monitoramento de desempenho** - Acompanhe melhorias ao longo do tempo.

## Quando Pedir Ajuda

Entre em contato com o suporte do WCPOS se:

- O checkout leva mais de 10 segundos de forma consistente.
- Você seguiu este guia, mas ainda está enfrentando problemas.
- Você suspeita de um plugin específico, mas não consegue identificá-lo.
- Você precisa de ajuda para otimizar recursos do servidor.

## Documentação Relacionada

- [Configurações do Checkout](/pos/checkout#checkout-settings-troubleshooting) - Desative scripts e estilos problemáticos.
- [Métodos de Pagamento](/payment) - Configure gateways de pagamento para desempenho ideal.
- [Solução de Problemas](/category/troubleshooting) - Guias gerais de solução de problemas.