---
title: Desempenho do Checkout
sidebar_label: Desempenho do Checkout
sidebar_position: 1
---

import Image from "@theme/IdealImage";

Se você está enfrentando um desempenho lento durante o processo de checkout, este guia ajudará você a identificar e resolver as causas mais comuns.

## Como Funciona o Checkout do WCPOS

O checkout do WCPOS abre um modal com um iframe/webview que carrega uma versão despojada do template de Pagamento de Pedidos do WooCommerce. Esta é essencialmente a mesma página que os clientes veem ao pagar pelos pedidos online, a [Página de Pagamento do Cliente](https://woocommerce.com/document/managing-orders/paying-for-orders/#customer-payment-page-link).

:::info Nota do Desenvolvedor
Você pode visualizar o template de checkout no repositório do plugin WCPOS: [templates/payment.php](https://github.com/wcpos/woocommerce-pos/blob/main/templates/payment.php)
:::

## Otimizações Embutidas

O WCPOS inclui várias otimizações embutidas para melhorar o desempenho do checkout:

- **Template despojado** - Remove elementos de tema desnecessários e desordem
- **Carregamento seletivo de scripts/estilos** - Apenas scripts e estilos essenciais são carregados
- **Estrutura DOM mínima** - Reduz a complexidade da página de checkout

No entanto, alguns scripts e estilos não podem ser completamente desativados porque gateways de pagamento podem exigir esses elementos para funcionar corretamente.

## Problemas Comuns de Desempenho

### 1. Scripts e Estilos Desnecessários

**Problema:** Temas e plugins adicionam scripts e estilos que não são necessários para o checkout, desacelerando os tempos de carregamento da página.

**Solução:** Use as [Configurações de Checkout](/pos/checkout#checkout-settings-troubleshooting) para desabilitar recursos desnecessários:

1. Clique no botão **Configurações de Checkout** no modal de checkout
2. Tente desabilitar os estilos do tema primeiro:
   - wp-block-library
   - classic-theme-styles
   - Estilos personalizados do seu tema
3. Desabilite scripts do WooCommerce não essenciais:
   - wc-add-to-cart
   - selectWoo (se não for necessário para seu gateway)
   - html5shiv

<div class="image-container">
  <Image
    alt="Formulário para desabilitar todos os estilos e scripts"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">Formulário para desabilitar todos os estilos e scripts</p>
</div>

:::warning Cuidado
Não desative scripts que seu gateway de pagamento exige. Se um método de pagamento parar de funcionar após desabilitar um script, reabilite-o.
:::

### 2. Interferência de Plugins Durante a Criação de Pedidos

**Problema:** Plugins que se conectam ao processo de criação de pedidos podem causar atrasos significativos. Por exemplo, plugins de contabilidade como o Xero podem enviar dados de pedidos para servidores externos, bloqueando o processo de checkout.

**Etapas de Solução de Problemas:**

1. **Teste em staging** - Se você tiver um servidor de staging, desative todos os plugins, exceto WooCommerce e WCPOS
2. **Teste a velocidade do checkout** - Processe um pedido de teste e anote o desempenho
3. **Ative plugins gradualmente** - Se o desempenho melhorar dramaticamente, reabilite os plugins um por um para identificar o culpado
4. **Entre em contato com os desenvolvedores de plugins** - Se um plugin específico estiver causando problemas, entre em contato com o desenvolvedor para obter conselhos de otimização

**Tipos de plugins problemáticos comuns:**
- Integrações de contabilidade/finanças (Xero, QuickBooks)
- Ferramentas de marketing por e-mail que são acionadas na criação de pedidos
- Sistemas de gerenciamento de inventário
- Calculadoras de envio complexas
- Ferramentas de análise de terceiros

### 3. Limitações de Recursos do Servidor

**Problema:** Se seu servidor estiver sobrecarregado ou carecer de recursos suficientes, todas as operações, incluindo o checkout, serão lentas.

**Monitoramento e Soluções:**

1. **Monitore o desempenho do servidor:**
   - Uso de CPU durante o checkout
   - Consumo de memória
   - Desempenho de consultas do banco de dados
   - Latência de rede

2. **Otimize os recursos do servidor:**
   - Aumente o limite de memória PHP
   - Otimize consultas do banco de dados
   - Use plugins de cache (mas teste a compatibilidade)
   - Considere atualizar o plano de hospedagem

3. **Otimização do banco de dados:**
   - Limpe dados de pedidos antigos
   - Otimize tabelas do banco de dados
   - Remova plugins e temas desnecessários

## Melhores Práticas para Desenvolvedores WordPress

:::tip Para Desenvolvedores
Desenvolvedores WordPress devem usar `wp_enqueue_scripts` para adicionar corretamente scripts e estilos às páginas. Infelizmente, alguns desenvolvedores de plugins e temas não seguem as melhores práticas e inserem código diretamente em templates, tornando impossível remover esses recursos facilmente.
:::

Se você está enfrentando problemas com scripts ou estilos que não podem ser desativados através das Configurações de Checkout:

1. **Entre em contato com o desenvolvedor** - Peça para que sigam os padrões de codificação do WordPress
2. **Use temas filhos** - Substitua templates problemáticos em um tema filho
3. **Ganchos personalizados** - Use ganchos do WordPress para remover código problemático nas páginas de checkout

## Testes de Desempenho

Para testar melhorias no desempenho do checkout:

1. **Medição base** - Cronometre quanto tempo o checkout leva antes de fazer mudanças
2. **Faça uma mudança de cada vez** - Isso ajuda a identificar quais mudanças têm mais impacto
3. **Teste com gateways de pagamento reais** - Não teste apenas com pagamentos em dinheiro
4. **Teste em dispositivos diferentes** - Dispositivos móveis podem mostrar características de desempenho diferentes

## Melhorias Rápidas

Aqui estão as melhorias de desempenho mais eficazes que você pode fazer:

1. **Desative estilos do tema** - Muitas vezes fornece a maior melhoria
2. **Remova scripts desnecessários do WooCommerce** - Reduz o tempo de execução do JavaScript
3. **Audite ganchos de criação de pedidos** - Identifique e otimize plugins lentos
4. **Otimize imagens** - Certifique-se de que quaisquer imagens no checkout estão otimizadas
5. **Use um plugin de monitoramento de desempenho** - Acompanhe as melhorias ao longo do tempo

## Quando Buscar Ajuda

Entre em contato com o suporte do WCPOS se:

- O checkout levar mais de 10 segundos consistentemente
- Você seguiu este guia, mas ainda enfrenta problemas
- Você suspeita de um plugin específico, mas não consegue identificá-lo
- Você precisa de ajuda para otimizar os recursos do servidor

## Documentação Relacionada

- [Configurações de Checkout](/pos/checkout#checkout-settings-troubleshooting) - Desative scripts e estilos problemáticos
- [Métodos de Pagamento](/payment) - Configure gateways de pagamento para desempenho ideal
- [Solução de Problemas](/category/troubleshooting) - Guias gerais de solução de problemas

---