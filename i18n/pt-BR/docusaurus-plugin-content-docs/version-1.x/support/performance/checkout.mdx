---
title: Desempenho do Checkout
sidebar_label: Desempenho do Checkout
sidebar_position: 1
description: Resolva tempos de checkout lentos no WCPOS analisando tempos de execução e identificando gargalos.
---

import Image from "@theme/IdealImage";
import LinkCards from '@site/src/components/LinkCards';
import LinkCard from '@site/src/components/LinkCard';

Se você está enfrentando um desempenho lento durante o processo de checkout, este guia ajudará você a identificar e resolver as causas mais comuns.

## Como Funciona o Checkout do WCPOS {#how-wcpos-checkout-works}

O checkout do WCPOS abre um modal com um iframe/webview que carrega uma versão reduzida do template de Pagamento de Pedido do WooCommerce. Esta é essencialmente a mesma página que os clientes veem na [Página de Pagamento do Cliente](https://woocommerce.com/document/managing-orders/paying-for-orders/#customer-payment-page-link) ao pagar por pedidos online.

:::info Nota do Desenvolvedor
Você pode visualizar o template de checkout no repositório do plugin WCPOS: [templates/payment.php](https://github.com/wcpos/woocommerce-pos/blob/main/templates/payment.php)
:::

## Otimizações Integradas {#built-in-optimizations}

O WCPOS inclui várias otimizações para melhorar o desempenho do checkout:

- **Template reduzido** - Remove elementos de tema desnecessários e desordem
- **Carregamento seletivo de scripts/estilos** - Apenas scripts e estilos essenciais são carregados
- **Estrutura DOM mínima** - Reduz a complexidade da página de checkout

No entanto, alguns scripts e estilos não podem ser completamente desativados porque os gateways de pagamento podem precisar deles para funcionar corretamente.

## Problemas Comuns de Desempenho {#common-performance-issues}

### 1. Scripts e Estilos Desnecessários {#1-unnecessary-scripts-and-styles}

**Problema:** Temas e plugins adicionam scripts e estilos que não são necessários para o checkout, retardando os tempos de carregamento da página.

**Solução:** Use as [Configurações de Checkout](/pos/checkout#checkout-settings-troubleshooting) para desativar recursos desnecessários:

1. Clique no botão **Configurações de Checkout** no modal de checkout
2. Tente desativar primeiro os estilos do tema:
   - wp-block-library
   - classic-theme-styles
   - Estilos personalizados do seu tema
3. Desative scripts WooCommerce não essenciais:
   - wc-add-to-cart
   - selectWoo (se não necessário pelo seu gateway)
   - html5shiv

<div class="image-container">
  <Image
    alt="Formulário para desativar todos os estilos e scripts"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">Formulário para desativar todos os estilos e scripts</p>
</div>

:::warning Tenha Cuidado
Não desative scripts que seu gateway de pagamento requer. Se um método de pagamento parar de funcionar após desativar um script, reative-o.
:::

### 2. Interferência de Plugins Durante a Criação do Pedido {#2-plugin-interference-during-order-creation}

**Problema:** Plugins que se conectam ao processo de criação do pedido podem causar atrasos significativos. Por exemplo, plugins de contabilidade como Xero podem enviar dados de pedidos para servidores externos, bloqueando o processo de checkout.

**Passos para Solução de Problemas:**

1. **Teste em staging** - Se você tiver um servidor de staging, desative todos os plugins, exceto WooCommerce e WCPOS
2. **Teste a velocidade do checkout** - Processar um pedido de teste e anote o desempenho
3. **Ative os plugins gradualmente** - Se o desempenho melhorar drasticamente, reative os plugins um por um para identificar o culpado
4. **Entre em contato com os desenvolvedores do plugin** - Se um plugin específico estiver causando problemas, entre em contato com o desenvolvedor para obter conselhos de otimização

**Tipos comuns de plugins problemáticos:**
- Integrações de contabilidade/gestão financeira (Xero, QuickBooks)
- Ferramentas de marketing por e-mail que são acionadas na criação do pedido
- Sistemas de gerenciamento de inventário
- Calculadoras de frete complexas
- Ferramentas de análise de terceiros

### 3. Limitações de Recursos do Servidor {#3-server-resource-limitations}

**Problema:** Se o seu servidor estiver sobrecarregado ou não tiver recursos suficientes, todas as operações, incluindo o checkout, serão lentas.

**Monitoramento e Soluções:**

1. **Monitore o desempenho do servidor:**
   - Uso da CPU durante o checkout
   - Consumo de memória
   - Desempenho de consultas ao banco de dados
   - Latência de rede

2. **Otimize os recursos do servidor:**
   - Aumente o limite de memória PHP
   - Otimize consultas ao banco de dados
   - Use plugins de cache (mas teste a compatibilidade)
   - Considere atualizar o plano de hospedagem

3. **Otimização do banco de dados:**
   - Limpe dados de pedidos antigos
   - Otimize tabelas do banco de dados
   - Remova plugins e temas desnecessários

## Melhores Práticas para Desenvolvedores do WordPress {#wordpress-developer-best-practices}

:::tip Para Desenvolvedores
Os desenvolvedores do WordPress devem usar `wp_enqueue_scripts` para adicionar corretamente scripts e estilos às páginas. Infelizmente, alguns desenvolvedores de plugins e temas não seguem as melhores práticas e inserem código diretamente nos templates, tornando impossível desincluir esses recursos facilmente.
:::

Se você está enfrentando problemas com scripts ou estilos que não podem ser desativados através das Configurações de Checkout:

1. **Entre em contato com o desenvolvedor** - Pergunte a ele para seguir os padrões de codificação do WordPress
2. **Use temas filhos** - Substitua templates problemáticos em um tema filho
3. **Hooks personalizados** - Use hooks do WordPress para remover códigos problemáticos nas páginas de checkout

## Teste de Desempenho {#performance-testing}

Para testar melhorias no desempenho do checkout:

1. **Medição de base** - Quanto tempo o checkout leva antes de fazer alterações
2. **Faça uma mudança de cada vez** - Isso ajuda a identificar quais alterações têm o maior impacto
3. **Teste com gateways de pagamento reais** - Não teste apenas com pagamentos em dinheiro
4. **Teste em diferentes dispositivos** - Dispositivos móveis podem apresentar características de desempenho diferentes

## Ganhos Rápidos {#quick-wins}

Aqui estão as melhorias de desempenho mais eficazes que você pode fazer:

1. **Desative os estilos do tema** - Frequentemente proporciona a maior melhoria
2. **Remova scripts WooCommerce desnecessários** - Reduz o tempo de execução do JavaScript
3. **Audite hooks de criação de pedidos** - Identifique e otimize plugins lentos
4. **Otimizar imagens** - Certifique-se de que qualquer imagem no checkout esteja otimizada
5. **Use um plugin de monitoramento de desempenho** - Acompanhe as melhorias ao longo do tempo

## Quando Procurar Ajuda {#when-to-seek-help}

Entre em contato com o suporte WCPOS se:

- O checkout leva mais de 10 segundos consistentemente
- Você seguiu este guia, mas ainda está enfrentando problemas
- Você suspeita de um plugin específico, mas não consegue identificá-lo
- Você precisa de ajuda para otimizar recursos do servidor

## Documentação Relacionada {#related-documentation}

<LinkCards>
  <LinkCard to="/pos/checkout#checkout-settings-troubleshooting" title="Configurações de Checkout" description="Desative scripts e estilos problemáticos" />
  <LinkCard to="/payment" title="Métodos de Pagamento" description="Configure gateways de pagamento para desempenho ideal" />
  <LinkCard to="/category/troubleshooting" title="Solução de Problemas" description="Guias gerais de solução de problemas" />
</LinkCards>