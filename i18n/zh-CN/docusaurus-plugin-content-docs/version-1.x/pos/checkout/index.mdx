---
title: 结账
sidebar_label: 结账
sidebar_position: 1
description: 在 WCPOS 结账中完成销售，包括支付处理、分期付款和订单完成。
---

import Image from "@theme/IdealImage";
import LinkCards from '@site/src/components/LinkCards';
import LinkCard from '@site/src/components/LinkCard';

当您准备完成销售时，单击 **结账** 按钮以打开结账弹出框。在这里，您可以处理付款并完成订单。

{/* 截图: checkout-modal.png */}

## 结账弹出框概述 {#checkout-modal-overview}

结账弹出框显示：

- **订单号** - WooCommerce 订单 ID
- **应付金额** - 总到期金额
- **结账设置** 按钮 - 排除显示问题
- **收银员** - 处理订单的人
- **客户** - 此订单的客户（可点击链接）
- **优惠券代码** 字段 - 应用折扣码
- **订单摘要** - 产品、数量和总额
- **支付方式** - 可用的支付选项
- **取消 / 处理付款** 按钮

## 付款方式 {#payment-methods}

### 免费版可用 {#available-in-free-version}

WCPOS 的免费版包括两个支付网关：

- **现金** - 提供付款金额和找零计算器
- **卡** - 用于外部卡终端

### 额外网关 (专业版) {#additional-gateways-pro}

:::info 专业功能
额外支付网关需要 [WCPOS Pro](/getting-started/pro-license)。
:::

使用专业版，您可以启用：

- **Stripe 终端** - 与 Stripe 卡读取器的直接集成
- **SumUp 终端** - 与 SumUp 卡读取器的集成
- **自定义网关** - 创建您自己的支付集成

请参见 [支付](/payment) 以获取配置网关的详细信息。

### 选择付款方式 {#selecting-a-payment-method}

单击付款方式以选择它。表单更新以显示相关字段：

**现金：**

- **投入金额** - 输入客户给您的金额
- **找零** - 自动计算的找零金额

{/* 截图: checkout-cash-payment.png */}

**卡：**

- 在外部卡终端上处理付款
- 单击处理付款以完成

## 优惠券代码 {#coupon-codes}

要应用折扣：

1. 在字段中输入优惠券代码
2. 单击 **应用优惠券**
3. 折扣出现在订单摘要中

优惠券必须在 WooCommerce 中配置（`WP Admin > Marketing > Coupons`）。

## 处理付款 {#processing-payment}

1. 选择付款方式
2. 对于现金，输入已收金额
3. 单击 **处理付款**
4. 订单完成，显示 [收据](/pos/checkout/receipts)

## 结账设置（故障排除） {#checkout-settings-troubleshooting}

结账弹出框使用 iframe/webview 以显示 WooCommerce 订单支付页面。这利用了 WooCommerce 现有的支付基础设施，这意味着任何与 WooCommerce 兼容的支付网关都应该可以在 POS 中使用。

然而，主题和插件脚本有时会干扰。单击 **结账设置** 进行故障排除：

<div class="image-container">
  <Image
    alt="结账弹出框中的结账设置"
    img="/img/checkout-settings.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">结账弹出框中的结账设置</p>
</div>

<div class="image-container">
  <Image
    alt="禁用所有样式和脚本的表单"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">禁用所有样式和脚本的表单</p>
</div>

### 禁用所有样式和脚本 {#disable-all-styles-and-scripts}

:::warning 核心选项
这是核心选项，仅应在测试或开发者知道自己在做什么的罕见情况下使用。禁用所有 wp_head 脚本将删除即使是 WooCommerce 所需的脚本，可能会破坏支付功能。
:::

- **禁用 wp_head** - 删除 WordPress 头部的所有脚本/样式
- **禁用 wp_footer** - 删除 WordPress 底部的所有脚本/样式

### 禁用选定样式 {#disable-selected-styles}

选择性地禁用可能导致显示问题的 CSS：

- wp-emoji-styles
- wp-block-library
- classic-theme-styles
- woocommerce-layout
- woocommerce-smallscreen
- woocommerce-general
- 等等。

### 禁用选定脚本 {#disable-selected-scripts}

选择性地禁用可能干扰支付网关的 JavaScript：

- wc-add-to-cart
- selectWoo
- wc-checkout
- woocommerce
- html5shiv
- 等等。

:::tip
如果支付网关没有正确显示：

1. 首先尝试禁用主题样式
2. 然后尝试禁用不需要的 WooCommerce 脚本
3. 小心不要禁用您的支付网关所需的脚本
:::

## 取消 {#cancel}

单击 **取消** 以关闭结账弹出框而不完成订单。订单将保持为开放购物车。

## 相关文档 {#related-documentation}

<LinkCards>
  <LinkCard to="/pos/checkout/receipts" title="收据" description="结账后，打印或发送收据" />
  <LinkCard to="/payment" title="付款方式" description="配置支付网关" />
  <LinkCard to="/payment/custom-gateways" title="自定义网关" description="创建自定义支付集成" />
</LinkCards>