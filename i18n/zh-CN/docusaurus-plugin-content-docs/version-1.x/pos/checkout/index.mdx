---
title: 结账
sidebar_label: 结账
sidebar_position: 1
---

import Image from "@theme/IdealImage";

当您准备完成销售时，点击 **结账** 按钮以打开结账模态。这是您处理付款和完成订单的地方。

{/* 截图: checkout-modal.png */}

## 结账模态概述

结账模态显示：

- **订单号** - WooCommerce 订单 ID
- **应支付金额** - 应付总额
- **结账设置** 按钮 - 排查显示问题
- **收银员** - 正在处理订单的人
- **客户** - 此订单的客户（可点击链接）
- **优惠券代码** 字段 - 应用折扣代码
- **订单摘要** - 产品、数量和总计
- **付款方式** - 可用的付款选项
- **取消 / 处理付款** 按钮

## 付款方式

### 免费版中的可用功能

WCPOS 免费版包括两个支付网关：

- **现金** - 带有支付金额和找零计算器
- **卡** - 用于外部卡终端

### 额外网关 (Pro)

:::info Pro 功能
额外的支付网关需要 [WCPOS Pro](/getting-started/pro-license)。
:::

通过 Pro，您可以启用：

- **Stripe 终端** - 与 Stripe 读卡器的直接集成
- **SumUp 终端** - 与 SumUp 读卡器的集成
- **自定义网关** - 创建您自己的支付集成

有关配置网关的详细信息，请参阅 [付款](/payment)。

### 选择付款方式

点击付款方式以选择。表单更新以显示相关字段：

**现金：**

- **支付金额** - 输入客户给您的金额
- **找零** - 自动计算找零金额

{/* 截图: checkout-cash-payment.png */}

**卡：**

- 在您的外部卡终端上处理付款
- 点击 **处理付款** 以完成

## 优惠券代码

要应用折扣：

1. 在字段中输入优惠券代码
2. 点击 **应用优惠券**
3. 折扣会出现在订单摘要中

优惠券必须在 WooCommerce 中配置（`WP Admin > 营销 > 优惠券`）。

## 处理付款

1. 选择付款方式
2. 对于现金，输入支付金额
3. 点击 **处理付款**
4. 订单完成并显示 [收据](/pos/checkout/receipts)

## 结账设置（故障排除）

结账模态使用 iframe/webview 显示 WooCommerce 订单支付页面。这利用了 WooCommerce 现有的支付基础设施，这意味着任何可与 WooCommerce 配合使用的支付网关都应该可以在 POS 中使用。

然而，主题和插件脚本有时可能会干扰。点击 **结账设置** 进行故障排除：

<div class="image-container">
  <Image
    alt="结账模态中的结账设置"
    img="/img/checkout-settings.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">结账模态中的结账设置</p>
</div>

<div class="image-container">
  <Image
    alt="禁用所有样式和脚本的表单"
    img="/img/disable-styles-and-scripts.png"
    style={{ maxHeight: 600 }}
  />
  <p class="image-caption">禁用所有样式和脚本的表单</p>
</div>

### 禁用所有样式和脚本

:::warning 核选项
这是核选项，仅应在测试或开发人员清楚他们在做什么的情况下使用。禁用所有 wp_head 脚本将移除 WooCommerce 的必要脚本，这些脚本需要用于扩展/收缩支付网关，可能会破坏支付功能。
:::

- **禁用 wp_head** - 从 WordPress 头部移除所有脚本/样式
- **禁用 wp_footer** - 从 WordPress 底部移除所有脚本/样式

### 禁用选定样式

选择性禁用可能导致显示问题的 CSS：

- wp-emoji-styles
- wp-block-library
- classic-theme-styles
- woocommerce-layout
- woocommerce-smallscreen
- woocommerce-general
- 等等。

### 禁用选定脚本

选择性禁用可能干扰支付网关的 JavaScript：

- wc-add-to-cart
- selectWoo
- wc-checkout
- woocommerce
- html5shiv
- 等等。

:::tip
如果支付网关未正确显示：

1. 尝试首先禁用主题样式
2. 然后尝试禁用不需要的 WooCommerce 脚本
3. 小心不要禁用您的支付网关所需的脚本
:::

## 取消

点击 **取消** 以在未完成订单的情况下关闭结账模态。订单将保持为未结订单。

## 相关文档

- [收据](/pos/checkout/receipts) - 结账后，打印或发送收据
- [付款方式](/payment) - 配置付款网关
- [自定义网关](/payment/custom-gateways) - 创建自定义支付集成

---