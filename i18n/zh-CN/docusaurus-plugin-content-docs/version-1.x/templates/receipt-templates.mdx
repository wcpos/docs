---
title: "收据模板"
sidebar_label: "收据模板"
sidebar_position: 1
---

收据模板编辑器允许您自定义从POS系统打印的收据的外观和内容。您可以通过导航到：`WP Admin > POS > Templates` 来访问模板编辑器。

## 概述

模板系统提供两种类型的模板：

- **默认模板**：自动从您的插件和主题文件中检测到。无法删除，但可以复制以创建自定义版本。
- **自定义模板**：用户创建的模板，您可以完全自定义、编辑和管理。

## 访问模板编辑器

1. 导航到您的WordPress管理仪表板
2. 转到 **POS > Templates**
3. 您将看到按两个部分组织的可用模板列表：
   - **默认模板**（来自插件/主题文件）
   - **自定义模板**（您的自定义创建）

## 默认模板

系统自动从三个来源检测收据模板：

### 模板来源

| 来源          | 描述                                            | 状态                                 |
| ------------- | ----------------------------------------------- | ------------------------------------ |
| **插件**      | 随WooCommerce POS附带的核心收据模板          | 始终可用                             |
| **专业插件**  | 来自WooCommerce POS Pro的增强模板            | 有效许可证可用                       |
| **主题**      | 来自您活动主题的自定义模板                   | 如果主题包含模板则可用             |

### 模板操作

对于每个默认模板，您可以：

- **预览**：查看模板在示例数据下的样子
- **复制**：创建您可以编辑的自定义副本
- **激活**：将其设置为您的POS的活动模板

## 创建自定义模板

### 方法1：从默认模板复制

1. 在 **默认模板** 部分中，找到您想要自定义的模板
2. 点击 **复制** 按钮
3. 输入自定义模板的名称
4. 点击 **复制模板**
5. 编辑新创建的自定义模板

### 方法2：从头开始创建

1. 点击页面顶部的 **添加新模板**
2. 输入模板名称
3. 选择 **收据** 作为模板类型
4. 在编辑器中开始编码您的模板

## 模板编辑器功能

模板编辑器提供：

### 代码编辑器

- **语法高亮**：提供PHP语法高亮以提高代码可读性
- **行号**：方便导航和调试
- **全屏编辑**：不受干扰的编辑环境

### 模板设置面板

- **语言**：设置为PHP以获得正确的语法高亮
- **模板类型**：在收据或报告模板之间选择
- **状态**：发布/草稿状态管理
- **可见性**：控制模板的可见性

### 模板操作

- **预览**：查看您的模板在示例数据下的渲染效果
- **设置为活动**：将此模板设为您的POS默认模板
- **更新**：保存您的更改
- **移动到垃圾箱**：删除自定义模板

## 模板结构

收据模板是生成HTML输出的PHP文件。基本结构如下：

```php
<?php
/**
 * Custom Receipt Template
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit; // Exit if accessed directly
}
?>
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
    <meta charset="<?php bloginfo( 'charset' ); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* Your custom CSS styles */
        body { font-family: sans-serif; font-size: 14px; }
        .receipt-header { text-align: center; margin-bottom: 20px; }
        /* Add more styles as needed */
    </style>
</head>
<body>
    <!-- Your receipt content -->
    <div class="receipt-header">
        <h1><?php echo get_bloginfo( 'name' ); ?></h1>
        <p><?php echo get_bloginfo( 'description' ); ?></p>
    </div>

    <!-- Order details, items, totals, etc. -->

</body>
</html>
```

## 可用模板变量

在创建自定义模板时，您可以访问各种WordPress和WooCommerce函数和数据：

### 商店信息

- `get_bloginfo( 'name' )` - 商店名称
- `get_bloginfo( 'description' )` - 商店标语
- `get_bloginfo( 'url' )` - 商店网址

### 订单数据

当前订单数据可通过标准的WooCommerce订单函数在模板渲染时获得。

### WCPOS函数

您可以使用WCPOS特定的函数（以`wcpos_`为前缀）来访问与POS相关的数据和功能。

## 最佳实践

### 模板开发

1. **以复制开始**：始终通过复制默认模板开始，而不是从头开始创建
2. **彻底测试**：在激活之前使用预览功能测试您的模板
3. **保留备份**：导出您的自定义模板或保留代码副本
4. **移动端友好**：确保您的模板在不同屏幕尺寸上显示良好

### 代码质量

1. **验证HTML**：确保您的HTML格式正确
2. **转义输出**：使用WordPress转义函数确保安全性
3. **错误处理**：在您的PHP代码中包含适当的错误检查
4. **注释**：为将来的参考记录您的自定义

### 性能

1. **优化CSS**：保持样式简约高效
2. **最小化PHP**：避免在模板中使用复杂的逻辑
3. **测试打印**：验证模板在收据打印机上效果良好

## 故障排除

### 常见问题

**模板未显示更改**

- 确保您已点击“更新”以保存更改
- 检查模板是否设置为“活动”
- 清除任何缓存插件

**语法错误**

- 使用语法高亮来识别问题
- 检查是否缺少分号、括号或引号
- 验证您的PHP语法

**样式问题**

- 在预览模式下测试您的CSS
- 确保样式与收据打印机兼容
- 注意便于打印的设计原则

**模板不可用**

- 检查模板类型是否设置为“收据”
- 验证模板状态为“已发布”
- 确保您具备适当的权限

### 寻求帮助

如果您在模板自定义时遇到问题：

1. 检查模板预览中的错误消息
2. 查看WordPress调试日志中的PHP错误
3. 首先用默认模板的副本进行测试
4. **AI帮助**：现代AI工具如 [Gemini](https://gemini.google.com)、ChatGPT 和Claude非常擅长帮助处理简单的WordPress模板。您可以粘贴您的模板代码并描述您想要实现的目标。
5. 查阅WooCommerce POS文档以获得高级自定义支持

## 高级自定义

对于需要更多收据模板控制的高级用户：

### 主题集成

您可以通过将自定义`receipt.php`文件放入您的主题中来覆盖默认模板：

```
your-theme/woocommerce-pos/receipt.php
```

### 钩子和过滤器

WooCommerce POS提供各种钩子和过滤器用于模板自定义。请查阅开发者文档以获取可用选项。

### 自定义字段

您可以使用适当的WordPress和WooCommerce函数在您的收据模板中包含自定义订单字段、产品属性和其他元数据。