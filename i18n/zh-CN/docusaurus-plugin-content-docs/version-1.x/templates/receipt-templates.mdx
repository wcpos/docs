---
title: 收据模板
sidebar_label: 收据模板
sidebar_position: 1
---

收据模板编辑器允许您自定义从您的POS系统打印的收据的外观和内容。您可以通过导航至：`WP Admin > POS > Templates`访问模板编辑器。

## 概述

模板系统提供两种类型的模板：

- **默认模板**：自动从您的插件和主题文件中检测。这些模板无法删除，但可以复制以创建自定义版本。
- **自定义模板**：用户创建的模板，您可以完全自定义、编辑和管理。

## 访问模板编辑器

1. 导航到您的WordPress管理仪表板
2. 转到 **POS > Templates**
3. 您将看到一个可用模板的列表，分为两个部分：
   - **默认模板**（来自插件/主题文件）
   - **自定义模板**（您自定义的创作）

## 默认模板

系统会自动从三个来源检测收据模板：

### 模板来源

| 来源          | 描述                                               | 状态                                   |
| -------------- | --------------------------------------------------- | -------------------------------------- |
| **插件**      | 随WooCommerce POS附带的核心收据模板               | 始终可用                               |
| **专业插件**  | 来自WooCommerce POS Pro的增强模板                  | 在激活许可证时可用                     |
| **主题**      | 来自您当前主题的自定义模板                        | 如果主题包含模板则可用                 |

### 模板操作

对于每个默认模板，您可以：

- **预览**：查看模板在示例数据下的外观
- **复制**：创建可以编辑的自定义副本
- **激活**：将其设置为您POS的活动模板

## 创建自定义模板

### 方法1：从默认模板复制

1. 在**默认模板**部分，找到您想要自定义的模板
2. 点击**复制**按钮
3. 输入自定义模板的名称
4. 点击**复制模板**
5. 编辑新创建的自定义模板

### 方法2：从头创建

1. 点击页面顶部的**添加新模板**
2. 输入模板名称
3. 选择**收据**作为模板类型
4. 在编辑器中开始编写模板代码

## 模板编辑器功能

模板编辑器提供：

### 代码编辑器

- **语法高亮**：PHP语法高亮以提高代码可读性
- **行号**：便于导航和调试
- **全屏编辑**：无干扰的编辑环境

### 模板设置面板

- **语言**：设置为PHP以用于正确的语法高亮
- **模板类型**：选择收据或报告模板
- **状态**：发布/草稿状态管理
- **可见性**：控制模板的可见性

### 模板操作

- **预览**：查看模板如何使用示例数据渲染
- **设置为活动**：使此模板成为您POS的默认模板
- **更新**：保存您的更改
- **移动到垃圾箱**：删除自定义模板

## 模板结构

收据模板是生成HTML输出的PHP文件。以下是基本结构：

```php
<?php
/**
 * Custom Receipt Template
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit; // Exit if accessed directly
}
?>
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
    <meta charset="<?php bloginfo( 'charset' ); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* Your custom CSS styles */
        body { font-family: sans-serif; font-size: 14px; }
        .receipt-header { text-align: center; margin-bottom: 20px; }
        /* Add more styles as needed */
    </style>
</head>
<body>
    <!-- Your receipt content -->
    <div class="receipt-header">
        <h1><?php echo get_bloginfo( 'name' ); ?></h1>
        <p><?php echo get_bloginfo( 'description' ); ?></p>
    </div>

    <!-- Order details, items, totals, etc. -->

</body>
</html>
```

## 可用模板变量

创建自定义模板时，您可以访问各种WordPress和WooCommerce函数和数据：

### 商店信息

- `get_bloginfo( 'name' )` - 商店名称
- `get_bloginfo( 'description' )` - 商店标语
- `get_bloginfo( 'url' )` - 商店URL

### 订单数据

当前订单数据可通过标准WooCommerce订单函数在模板渲染时获得。

### WCPOS 函数

您可以使用WCPOS特定的函数（以`wcpos_`开头）访问POS相关的数据和功能。

## 最佳实践

### 模板开发

1. **从复制开始**：始终先复制一个默认模板，而不是从头创建
2. **彻底测试**：使用预览功能测试您的模板后再激活
3. **保持备份**：导出您的自定义模板或保留代码副本
4. **移动设备友好**：确保您的模板在不同屏幕尺寸下表现良好

### 代码质量

1. **验证HTML**：确保您的HTML结构良好
2. **转义输出**：使用WordPress转义函数确保安全性
3. **错误处理**：在PHP代码中包含适当的错误检查
4. **注释**：记录您的自定义以供今后参考

### 性能

1. **优化CSS**：保持样式简单有效
2. **减少PHP**：避免在模板中使用复杂逻辑
3. **打印测试**：验证模板与收据打印机的兼容性良好

## 故障排除

### 常见问题

**模板未显示更改**

- 确保您已点击“更新”以保存更改
- 检查模板是否设置为“活动”
- 清除任何缓存插件

**语法错误**

- 使用语法高亮来识别问题
- 检查是否缺少分号、括号或引号
- 验证您的PHP语法

**样式问题**

- 在预览模式下测试您的CSS
- 确保样式与收据打印机兼容
- 保持适合打印的设计原则

**模板不可用**

- 检查模板类型是否设置为“收据”
- 验证模板状态是否为“已发布”
- 确保您有合适的权限

### 获取帮助

如果您在模板自定义中遇到问题：

1. 检查模板预览以查看错误消息
2. 查看WordPress调试日志以查找PHP错误
3. 首先使用默认模板的副本进行测试
4. **AI帮助**：现代AI工具如[Gemini](https://gemini.google.com)、ChatGPT和Claude在处理这些简单的WordPress模板时非常出色。您可以粘贴模板代码并描述您想要实现的内容。
5. 查阅WooCommerce POS文档以获取高级自定义信息

## 高级自定义

对于需要更大控制权的高级用户：

### 主题集成

您可以通过在主题中放置自定义的`receipt.php`文件来覆盖默认模板：

```
your-theme/woocommerce-pos/receipt.php
```

### 钩子和过滤器

WooCommerce POS提供各种钩子和过滤器以进行模板自定义。请查阅开发者文档以获取可用选项。

### 自定义字段

您可以在收据模板中使用适当的WordPress和WooCommerce函数包含自定义订单字段、产品属性和其他元数据。

---