---
title: 收据模板
sidebar_label: 收据模板
sidebar_position: 1
---

收据模板编辑器允许您自定义从 POS 系统打印的收据的外观和内容。您可以通过以下路径访问模板编辑器：`WP Admin > POS > 模板`

## 概述

模板系统提供两种类型的模板：

- **默认模板**：自动从您的插件和主题文件中检测。这些模板不能删除，但可以复制以创建自定义版本。
- **自定义模板**：用户创建的模板，您可以完全自定义、编辑和管理。

## 访问模板编辑器

1. 导航到您的 WordPress 管理仪表板
2. 转到 **POS > 模板**
3. 您将看到一个可用模板列表，分为两个部分：
   - **默认模板**（来自插件/主题文件）
   - **自定义模板**（您的自定义创作）

## 默认模板

系统从三个源自动检测收据模板：

### 模板来源

| 来源           | 描述                                     | 状态                   |
| -------------- | ---------------------------------------- | ---------------------- |
| **插件**       | WooCommerce POS 附带的核心收据模板       | 始终可用               |
| **专业插件**   | WooCommerce POS Pro 的增强模板           | 具有有效许可证时可用   |
| **主题**       | 来自您的活动主题的自定义模板             | 如果主题包含模板则可用 |

### 模板操作

对于每个默认模板，您可以：

- **预览**：查看使用示例数据的模板外观
- **复制**：创建可编辑的自定义副本
- **激活**：为您的 POS 设置为活动模板

## 创建自定义模板

### 方法 1：从默认模板复制

1. 在**默认模板**部分，找到您想自定义的模板
2. 点击**复制**按钮
3. 输入自定义模板的名称
4. 点击**复制模板**
5. 编辑新创建的自定义模板

### 方法 2：从头开始创建

1. 点击页面顶部的**添加新模板**
2. 输入模板名称
3. 选择**收据**作为模板类型
4. 在编辑器中开始编码您的模板

## 模板编辑器功能

模板编辑器提供：

### 代码编辑器

- **语法高亮**：PHP 语法高亮以提高代码可读性
- **行号**：便于导航和调试
- **全屏编辑**：无干扰的编辑环境

### 模板设置面板

- **语言**：设置为 PHP 以获得适当的语法高亮
- **模板类型**：在收据或报告模板之间选择
- **状态**：发布/草稿状态管理
- **可见性**：控制模板可见性

### 模板操作

- **预览**：查看您的模板如何使用示例数据渲染
- **设为活动**：将此模板设为 POS 的默认模板
- **更新**：保存您的更改
- **移至回收站**：删除自定义模板

## 模板结构

收据模板是生成 HTML 输出的 PHP 文件。以下是基本结构：

```php
<?php
/**
 * 自定义收据模板
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit; // 如果直接访问则退出
}
?>
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
    <meta charset="<?php bloginfo( 'charset' ); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* 您的自定义 CSS 样式 */
        body { font-family: sans-serif; font-size: 14px; }
        .receipt-header { text-align: center; margin-bottom: 20px; }
        /* 根据需要添加更多样式 */
    </style>
</head>
<body>
    <!-- 您的收据内容 -->
    <div class="receipt-header">
        <h1><?php echo get_bloginfo( 'name' ); ?></h1>
        <p><?php echo get_bloginfo( 'description' ); ?></p>
    </div>

    <!-- 订单详情、商品、总计等 -->

</body>
</html>
```

## 可用模板变量

创建自定义模板时，您可以访问各种 WordPress 和 WooCommerce 函数和数据：

### 店铺信息

- `get_bloginfo( 'name' )` - 店铺名称
- `get_bloginfo( 'description' )` - 店铺标语
- `get_bloginfo( 'url' )` - 店铺 URL

### 订单数据

渲染模板时，可以通过标准的 WooCommerce 订单函数访问当前订单数据。

### WCPOS 函数

您可以使用 WCPOS 特定函数（以 `wcpos_` 为前缀）来访问 POS 相关数据和功能。

## 最佳实践

### 模板开发

1. **从复制开始**：总是先复制默认模板，而不是从头开始创建
2. **彻底测试**：使用预览功能在激活前测试您的模板
3. **保留备份**：导出您的自定义模板或保留代码副本
4. **移动友好**：确保您的模板在不同屏幕尺寸上良好工作

### 代码质量

1. **验证 HTML**：确保 HTML 格式正确
2. **转义输出**：使用 WordPress 转义函数以确保安全
3. **错误处理**：在 PHP 代码中包含适当的错误检查
4. **注释**：为将来参考记录您的自定义内容

### 性能

1. **优化 CSS**：保持样式最小且高效
2. **最小化 PHP**：避免在模板中使用复杂逻辑
3. **测试打印**：验证模板是否与您的收据打印机配合良好

## 故障排除

### 常见问题

**模板未显示更改**

- 确保已点击"更新"以保存更改
- 检查模板是否设置为"活动"
- 清除任何缓存插件

**语法错误**

- 使用语法高亮识别问题
- 检查是否缺少分号、括号或引号
- 验证 PHP 语法

**样式问题**

- 在预览模式下测试您的 CSS
- 确保样式与收据打印机兼容
- 遵循打印友好的设计原则

**模板不可用**

- 检查模板类型是否设置为"收据"
- 验证模板状态是否为"已发布"
- 确保您有适当的权限

### 获取帮助

如果遇到模板自定义问题：

1. 检查模板预览是否有错误消息
2. 查看 WordPress 调试日志中的 PHP 错误
3. 首先使用默认模板的副本测试
4. **AI 帮助**：现代 AI 工具如 [Gemini](https://gemini.google.com)、ChatGPT 和 Claude 在处理这类简单的 WordPress 模板方面非常出色。您可以粘贴模板代码并描述您想实现的目标。
5. 查阅 WooCommerce POS 文档以进行高级自定义

## 高级自定义

对于需要更多控制的高级用户：

### 主题集成

您可以通过在主题中放置自定义 `receipt.php` 文件来覆盖默认模板：

```
your-theme/woocommerce-pos/receipt.php
```

### 钩子和过滤器

WooCommerce POS 提供了各种模板自定义的钩子和过滤器。请查阅开发者文档以了解可用选项。

### 自定义字段

您可以使用适当的 WordPress 和 WooCommerce 函数在收据模板中包含自定义订单字段、产品属性和其他元数据。