---
title: "API02005: 权限不足"
sidebar_label: API02005
---

# API02005: 权限不足 {#api02005-insufficient-permissions}

## 这意味着什么 {#what-this-means}

您的用户帐户缺少执行此操作所需的特定 WordPress 功能能力。尽管您拥有基本访问权限，但您尝试执行的特定操作需要额外的功能能力。

## 常见原因 {#common-causes}

- **用户角色有限** — 您的角色未包含所有必要的功能能力
- **功能能力未分配** — 您的角色缺少特定功能能力
- **插件限制** — 安全插件限制了功能能力
- **自定义角色问题** — 自定义角色可能缺少功能能力

## 服务器错误映射 {#server-error-mapping}

此错误代码在服务器返回以下情况时触发：

| 服务器代码 | 来源 |
|-------------|--------|
| `rest_forbidden` | WordPress REST API |
| `rest_cannot_create` | WordPress REST API |
| `rest_cannot_edit` | WordPress REST API |
| `rest_cannot_delete` | WordPress REST API |
| `woocommerce_rest_cannot_create` | WooCommerce REST API |
| `woocommerce_rest_cannot_edit` | WooCommerce REST API |
| `woocommerce_rest_cannot_delete` | WooCommerce REST API |
| HTTP 403 | 任何服务器响应（回退） |

## 如何修复 {#how-to-fix}

### 1. 检查所需功能能力 {#1-review-required-capabilities}

POS 操作所需的常见功能能力：
- `manage_woocommerce` — 一般 WooCommerce 管理
- `edit_shop_orders` — 创建和编辑订单
- `edit_products` — 修改产品信息
- `edit_users` — 管理客户帐户

### 2. 升级用户角色 {#2-upgrade-user-role}

请管理员分配更高功能能力的角色：
- **店铺经理** — 完整的 WooCommerce 访问权限
- **管理员** — 完整的站点访问权限

### 3. 添加特定功能能力 {#3-add-specific-capabilities}

如果需要自定义角色，请添加所需功能能力：

```php
// Example: Add POS capabilities to a custom role
$role = get_role('your_custom_role');
$role->add_cap('manage_woocommerce');
$role->add_cap('edit_shop_orders');
```

### 4. 检查插件冲突 {#4-check-plugin-conflicts}

某些安全或角色管理插件可能会限制功能能力：
- 检查插件设置
- 检查功能能力过滤器
- 暂时禁用以进行测试

## 相关错误 {#related-errors}

- [API02004](./API02004) — 用户未授权
- [API02010](./API02010) — 需要认证


---