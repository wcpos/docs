---
title: "API02005: 权限不足"
sidebar_label: API02005
---

# API02005: 权限不足

## 这意味着什么

您的用户帐户缺少执行此操作所需的特定 WordPress 权限。尽管您拥有基本访问权限，但您尝试执行的特定操作需要额外的权限。

## 常见原因

- **用户角色有限** — 您的角色未包含所有必要的权限
- **权限未分配** — 您的角色缺少特定权限
- **插件限制** — 安全插件限制了权限
- **自定义角色问题** — 自定义角色可能缺少权限

## 服务器错误映射

当服务器返回以下错误代码时，将触发此错误：

| 服务器代码 | 来源 |
|-------------|--------|
| `rest_forbidden` | WordPress REST API |
| `rest_cannot_create` | WordPress REST API |
| `rest_cannot_edit` | WordPress REST API |
| `rest_cannot_delete` | WordPress REST API |
| `woocommerce_rest_cannot_create` | WooCommerce REST API |
| `woocommerce_rest_cannot_edit` | WooCommerce REST API |
| `woocommerce_rest_cannot_delete` | WooCommerce REST API |
| HTTP 403 | 任何服务器响应（回退） |

## 如何修复

### 1. 检查所需权限

POS 操作所需的常见权限：
- `manage_woocommerce` — 一般 WooCommerce 管理
- `edit_shop_orders` — 创建和编辑订单
- `edit_products` — 修改产品信息
- `edit_users` — 管理客户帐户

### 2. 升级用户角色

请管理员分配更高权限的角色：
- **商店管理员** — 完整的 WooCommerce 访问权限
- **管理员** — 完整的站点访问权限

### 3. 添加特定权限

如果需要自定义角色，请添加所需权限：

```php
// Example: Add POS capabilities to a custom role
$role = get_role('your_custom_role');
$role->add_cap('manage_woocommerce');
$role->add_cap('edit_shop_orders');
```

### 4. 检查插件冲突

某些安全或角色管理插件可能会限制权限：
- 检查插件设置
- 检查权限过滤器
- 暂时禁用以进行测试

## 相关错误

- [API02004](./API02004) — 用户未授权
- [API02010](./API02010) — 需要身份验证
