---
title: "API05004：WordPress API 已禁用"
sidebar_label: API05004
---

# API05004：WordPress API 已禁用

## 这意味着什么

WordPress REST API 在您的网站上已被禁用。所有现代 WordPress 功能，包括 WooCommerce 和 WCPOS，都依赖于此 API。

## 常见原因

- **安全插件** — 一个插件阻止了 REST API 访问
- **主机限制** — 您的主机禁用了 REST API
- **自定义代码** — 主题或插件禁用了 API
- **防火墙规则** — WAF 阻止 REST API 端点

## 如何修复

### 1. 测试 REST API

在浏览器中访问 `https://yoursite.com/wp-json/`：
- 应返回带有可用路由的 JSON
- 如果出现错误或没有返回，则表示被阻止

### 2. 检查安全插件

常见阻止 REST API 的插件：

**Wordfence：**
- 防火墙 → 所有防火墙选项
- 禁用"禁用 REST API"选项

**iThemes Security：**
- 安全 → 设置 → WordPress 调整
- 启用 REST API

**禁用 REST API 插件：**
- 完全停用此插件

### 3. 检查自定义代码

在主题的 `functions.php` 或自定义插件中查找：

```php
// 这段代码禁用 REST API - 删除它
add_filter('rest_authentication_errors', function($result) {
    return new WP_Error('rest_disabled', 'REST API disabled');
});
```

### 4. 检查 .htaccess

删除阻止 `/wp-json/` 的任何规则：

```apache
# 不好 - 阻止 REST API
RewriteRule ^wp-json - [F,L]
```

### 5. 联系主机提供商

一些主机默认阻止 REST API：
- 请求他们启用
- 询问任何安全限制
- 检查主机文档

## 为什么 REST API 很重要

WordPress REST API 对以下方面至关重要：
- 移动应用
- 第三方集成
- WooCommerce 功能
- WCPOS 操作

禁用它会破坏许多功能。

## 相关错误

- [API05001](./API05001) — WooCommerce API 已禁用
- [API03006](./API03006) — 不支持的方法