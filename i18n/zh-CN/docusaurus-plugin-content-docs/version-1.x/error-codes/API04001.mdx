---
title: "API04001：无效的响应格式"
sidebar_label: API04001
---

# API04001：无效的响应格式

## 这意味着什么

服务器已响应，但响应格式不是POS系统预期的。服务器应返回JSON数据，但收到了其他内容。

## 常见原因

- **显示PHP错误** — 在JSON之前输出了PHP错误
- **插件冲突** — 另一个插件正在输出内容
- **维护模式** — 站点正在显示维护页面
- **错误的内容类型** — 服务器发送HTML而非JSON
- **缓存问题** — 正在提供缓存的错误页面

## 如何修复

### 1. 检查您的站点

在浏览器中访问您的WordPress站点：
- 是否正常显示？
- 是否有可见的错误？
- 是否处于维护模式？

### 2. 检查PHP错误

在 `wp-config.php` 中，临时启用调试：

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

检查 `wp-content/debug.log` 中的错误。

### 3. 直接测试REST API

在浏览器中访问 `https://yoursite.com/wp-json/`：
- 应返回JSON数据
- 如果看到HTML或错误，则存在问题
- 检查与插件相关的输出

### 4. 暂时禁用缓存

缓存插件可能会提供陈旧的响应：
- 清除所有缓存
- 暂时禁用缓存插件
- 从缓存中排除REST API

### 5. 检查插件冲突

如果插件在每个页面上都输出内容：
1. 禁用所有非必要插件
2. 测试POS系统
3. 逐一重新启用插件

## 相关错误

- [API04003](./API04003) — JSON响应格式错误
- [API05005](./API05005) — 未找到插件