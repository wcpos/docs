---
title: "API04001: 无效的响应格式"
sidebar_label: API04001
---

# API04001: 无效的响应格式

## 这意味着什么

服务器已响应，但响应格式不是 POS 所期望的格式。服务器应该返回 JSON 数据，但接收到的是其他内容。

## 常见原因

- **PHP 错误显示** — 在 JSON 之前显示了 PHP 错误
- **插件冲突** — 另一个插件正在输出内容
- **维护模式** — 站点正在显示维护页面
- **错误的内容类型** — 服务器发送了 HTML 而不是 JSON
- **缓存问题** — 正在提供缓存的错误页面

## 如何修复

### 1. 检查您的站点

在浏览器中访问您的 WordPress 站点：
- 是否正常显示？
- 是否有任何可见错误？
- 是否处于维护模式？

### 2. 检查 PHP 错误

在 `wp-config.php` 中，暂时启用调试：

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

检查 `wp-content/debug.log` 中的错误。

### 3. 直接测试 REST API

在浏览器中访问 `https://yoursite.com/wp-json/`：
- 应返回 JSON 数据
- 如果您看到 HTML 或错误，那么存在问题
- 检查与插件相关的输出

### 4. 暂时禁用缓存

缓存插件可能会服务于陈旧的响应：
- 清除所有缓存
- 暂时禁用缓存插件
- 从缓存中排除 REST API

### 5. 检查插件冲突

如果某个插件在每个页面上输出内容：
1. 禁用所有非必要插件
2. 测试 POS
3. 一个一个重新启用插件

## 相关错误

- [API04003](./API04003) — 格式错误的 JSON 响应
- [API05005](./API05005) — 找不到插件

---