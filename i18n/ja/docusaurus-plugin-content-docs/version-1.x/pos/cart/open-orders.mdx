---
title: オープンオーダー
sidebar_label: オープンオーダー
sidebar_position: 3
---

WCPOSでは、複数のオーダーを同時に操作することができます。これは、顧客が別のアイテムを取得するときやトランザクション間を切り替えるとき、中断からの回復に便利です。

## オープンオーダーカルーセル

カートパネルの下部に、すべてのオープンオーダーを表示する横向きのカルーセルがあります。

{/* Screenshot: open-orders-carousel.png */}

- 各カートはその**合計金額**を表示します
- **現在のオーダー**は強調表示されます
- 任意のカートをクリックして切り替えます
- 左右にスクロールして他のカートを表示します

## 新しいオーダーの作成

新しい空のカートは常に利用可能です。カルーセルで空のカートをクリックするか、現在のカートが空のときに商品を追加し始めてください。

## オーダー間の切り替え

カルーセルの任意のオーダーをクリックして切り替えます。カートパネルは選択したオーダーの内容を表示するように更新されます。

**ユースケース:**

- 顧客が別のアイテムを取得するために離れる
- 大きなオーダーが進行中の間に急いでいる顧客を支援する必要がある
- オーダー間で価格やアイテムを比較する

## サーバーへのオーダーの保存

オーダーは2つの状態で存在します。

### ローカルのみ

デフォルトでは、新しいオーダーはローカルのブラウザ/アプリのデータベースにのみ保存されます。これらはページ更新を跨いで持続しますが：

- WooCommerceの管理画面には表示されません
- ローカルデータベースがクリアされると失われます
- 他のデバイスからアクセスすることはできません

### サーバーに保存

**サーバーに保存**をクリックして、ステータス`pos-open`のWooCommerceオーダーを作成します。これにより：

- WooCommerceに実際のオーダーが作成されます
- ローカルデータベースがクリアされても持続します
- 他のデバイスからアクセスできます
- WP Admin > WooCommerce > オーダーに表示されます

:::tip 保存するタイミング
以下の場合にオーダーをサーバーに保存します：
- 顧客が後でピックアップするためにオーダーを保持したい
- シフトを終えて別のレジ係が引き継ぐ場合
- アプリやブラウザに問題が発生したときのバックアップが必要な場合
:::

## 保存されたオーダーの回復

サーバーに保存されたオーダーには、以下の方法で再度アクセスできます：

1. **オーダー**画面を開く（Pro機能）
2. ステータス`pos-open`でフィルタリングする
3. オーダーを再オープンする

## オーダーの永続性

### ローカルストレージ

WCPOSはIndexedDBを使用してオーダーをローカルに保存します。これにより：

- ブラウザセッションを跨いで持続します
- ネットワークリクエストなしで迅速にアクセスできます
- オフラインでも機能します

### サーバーとの同期

サーバーに保存するか、チェックアウトする際に：

- オーダーがWooCommerceに送信されます
- 確認が受信されます
- ローカルデータとサーバーデータが同期されます

## オーダーの無効化

オープンオーダーを削除するには：

1. 削除したいオーダーに切り替えます
2. **無効化**ボタンをクリックします

**何が起こるか:**

- **未保存のオーダー:** ローカルデータベースから完全に削除されます
- **保存されたオーダー:** WooCommerceのゴミ箱に移動され、ローカルで削除されます

無効化された保存オーダーを回復するには：
1. `WP Admin > WooCommerce > オーダー > ゴミ箱`に移動します
2. オーダーを復元します

## ヒント

### オーダーを整理する

複数のオープンオーダーがある場合、次のことを行うと便利です：

- 顧客の名前をオーダーに追加して、簡単に特定できるようにする
- 保留理由を記述したオーダーノートを追加する
- 重要なオーダーをサーバーに保存する

### シフトの引き継ぎ

オープンオーダーを持ってシフトを終える際には：

1. すべての重要なオーダーをサーバーに保存します
2. ステータスを説明するオーダーノートを追加します
3. 次のレジ係がオーダー画面からアクセスできます

### オフラインの考慮事項

接続を失った場合：

- ローカルオーダーは引き続きアクセス可能で、アイテムを追加し続けます
- 接続が復元されるまでオーダーを完了/チェックアウトすることはできません
- 再接続するまでオーダーをサーバーに保存することはできません
- 再接続するまで新しい顧客を作成することはできません