---
title: 検索とフィルタリング
sidebar_label: 検索とフィルタリング
sidebar_position: 2
---

import Image from "@theme/IdealImage";

適切な商品を迅速に見つけることは、効率的なポイント・オブ・セール（POS）運営にとって不可欠です。WCPOSは、商品を即座に見つけるための強力な検索およびフィルタリング機能を提供します。大規模な在庫に対しても効果的です。

<div class="image-container">
  <Image
    alt="商品検索とフィルタリングインターフェース"
    img="/img/product-search-and-filtering.png"
    style={{ maxHeight: 400 }}
  />
  <p class="image-caption">WCPOSの商品の検索とフィルタリングインターフェース</p>
</div>

## 商品検索

### 統一検索フィールド

WCPOSには、同時に複数の商品の属性を検索する単一の検索フィールドがあります：

- **商品名** - 商品のタイトルと説明を検索します
- **SKU** - 商品のポストメタ `_sku` フィールドと一致します
- **バーコード** - 設定されたバーコードフィールドを検索します。これは任意のポストメタフィールドにすることができます。従来の設定は `_sku` ですが、将来的に `_global_unique_id` に変更されます。

「商品を検索」フィールドに検索語を入力するだけで、POSはこれらの全てのフィールドにわたって結果を即座にフィルタリングします。

### トークン化検索技術

検索機能は、[FlexSearchライブラリ](https://github.com/nextapps-de/flexsearch)を利用しており、高度なトークン化機能を備えています：

- **前方トークン化** - 単語の先頭から部分一致します（例：検索語「blue」は「blueberry」を見つけます）
- **パフォーマンス最適化** - 速やかな検索結果を得るためにパフォーマンスプリセットを使用します
- **言語感知** - あなたの店舗に設定された言語に適応します
- **レイジー初期化** - 必要な時にのみ検索インデックスをロードし、メモリ使用を最適化します

### 検索の仕組み

検索フィールドに入力すると、POSは以下を行います：

1. **トークン化** - 入力を検索可能な用語に変換します
2. **ローカル検索** - まず、即座に結果を得るためにローカルに保存された商品データを検索します
3. **サーバーに問い合わせ** - ローカルで一致する商品が見つからない場合は、サーバーに問い合わせ、新しい商品をダウンロードして将来の検索に備えて保存します
4. **結果をリアルタイムで更新** - 入力しながら結果を更新します

このアプローチにより、迅速な検索パフォーマンスを確保しつつ、徐々に完全なローカル商品データベースを構築します。

## 商品フィルタリング

### フィルターバー

検索フィールドの下には、特定の基準で商品を絞り込むためのインタラクティブなフィルタートグルとドロップダウンメニューがあります。

### 利用可能なフィルター

#### 在庫状況
在庫状況に基づいて商品をフィルタリングします：
- **在庫あり** - 利用可能な在庫がある商品
- **在庫切れ** - 在庫がゼロの商品の
- **取り寄せ** - 取り寄せ可能な商品

#### 特集商品
WooCommerceストアで「特集」としてマークされた商品だけを表示するトグルです。

#### セール中の商品  
現在セール中または割引が適用されている商品のみを表示します。

#### カテゴリ
カテゴリのドロップダウンを使用して、指定された商品カテゴリによって商品をフィルタリングします。これにより、特定の部門や商品ラインにある商品を迅速に見つけることができます。

#### タグ
WooCommerceストアで定義した特定の属性や特徴を持つ商品を見つけるために、商品タグでフィルタリングします。

### フィルターの使用

- **フィルターのトグル** - フィルターボタンをクリックしてアクティブにします（アクティブなフィルターはハイライト表示されます）
- **複数のフィルター** - 複数のフィルターを組み合わせてさらに検索を絞り込むことができます
- **フィルターのクリア** - アクティブなフィルターをもう一度クリックして非アクティブにします
- **検索 + フィルター** - 精密な商品位置のために、検索フィールドと一緒にフィルターを使用します

## バーコード設定

### 検索フィールド

検索機能には、自動的に設定されたバーコードフィールドが含まれています。検索に使用されるバーコードフィールドは、POS設定の構成に依存します。

## F.A.Q.

<details>

<summary>
  バーコードの _global_unique_id フィールドは何ですか？
</summary>

`_global_unique_id` フィールドは、WooCommerceが最近追加した新しいバーコードフィールドで、店舗間のバーコード標準化を向上させるために設計されています。

**主なポイント：**

- **現代標準**: このフィールドはグローバルバーコード識別のために特別に設計されました
- **POS設定**: POS設定でバーコードフィールドとして `_global_unique_id` を使用するようにPOSを構成できます
- **従来と新しい**: 従来のバーコード設定は `_sku` フィールドを使用しますが、将来的に `_global_unique_id` に変更されます
- **柔軟性**: サードパーティのバーコードプラグインを使用している場合、任意の製品メタフィールドをバーコードフィールドとして構成できます
- **将来のデフォルト**: `_global_unique_id` は今後のPOSアップデートでデフォルトのバーコードフィールドになります

バーコードに使用するフィールドを設定するには、WordPress管理エリアでPOS設定にアクセスしてください。

</details>

<details>

<summary>
  検索しても全ての商品の表示がされないのはなぜですか？
</summary>

WCPOSはパフォーマンスを維持するために進行的商品ダウンロードを使用します。商品が見つからない場合：

1. **検索してみる** - これによりPOSがサーバー上で商品を探すトリガーになります
2. **ダウンロードまで待つ** - POSは商品を小さなバッチでダウンロードします
3. **再度検索** - ダウンロードが完了すると、商品は今後の検索に表示されるようになります

このプロセスにより、数千の製品があってもPOSは迅速かつ応答性を保ちます。この件については、[商品同期](/products/sync) ガイドを参照してください。

</details>

<details>

<summary>
  部分的な商品名やSKUで検索できますか？
</summary>

はい！トークン化検索は前方一致を使用しているため、意味があります：

- 「blue」を検索すると「blueberry」、「blue shirt」などの商品が見つかります
- 「ABC」を検索すると「ABC123」、「ABC-XYZ」などのSKUが見つかります
- 完全な単語やコードを入力する必要はありません

検索は、最小限の入力で迅速に商品を見つけることを目的としています。

</details>