---
title: 検索とフィルタリング
sidebar_label: 検索とフィルタリング
sidebar_position: 2
---

import Image from "@theme/IdealImage";

適切な商品をすばやく見つけることは、効率的なPOSオペレーションに不可欠です。WCPOSは、大規模な在庫であっても、商品をすぐに特定するための強力な検索およびフィルタリング機能を提供します。

<div class="image-container">
  <Image
    alt="商品検索とフィルタリングインターフェース"
    img="/img/product-search-and-filtering.png"
    style={{ maxHeight: 400 }}
  />
  <p class="image-caption">WCPOSの商品検索とフィルタリングインターフェース</p>
</div>

## 商品検索

### 統合検索フィールド

WCPOSは、複数の商品属性を同時に検索できる単一の検索フィールドを備えています：

- **商品名** - 商品のタイトルと説明を検索
- **SKU** - 商品のpostmeta `_sku` フィールドに一致
- **バーコード** - 設定されたバーコードフィールドを検索。これは任意のpostmetaフィールドにできます。従来の設定は `_sku` ですが、将来的には `_global_unique_id` に変更される予定です。

「商品を検索」フィールドに検索用語を入力するだけで、POSはこれらのすべてのフィールドで即座に結果をフィルタリングします。

### トークン化検索テクノロジー

検索機能は、高度なトークン化機能を持つ [FlexSearch ライブラリ](https://github.com/nextapps-de/flexsearch) を使用しています：

- **前方トークン化** - 単語の先頭から部分的に一致（例：「blue」で「blueberry」を見つける）
- **パフォーマンス最適化** - 高速な検索結果のためのパフォーマンスプリセットを使用
- **言語対応** - ストアの設定言語に適応
- **遅延初期化** - 必要な時にのみ検索インデックスをロードしてメモリ使用量を最適化

### 検索のしくみ

検索フィールドに入力すると、POSは以下の動作をします：

1. **トークン化** - 入力を検索可能な用語に分解
2. **ローカル検索** - まず即座の結果のためにローカルに保存された商品データを検索
3. **サーバーに問い合わせ** - ローカルで一致するものがない場合、新しい商品をダウンロードして保存
4. **結果を更新** - 入力中にリアルタイムで結果を更新

このアプローチにより、高速な検索パフォーマンスを確保しながら、徐々に完全なローカル商品データベースを構築します。

## 商品フィルタリング

### フィルターバー

検索フィールドの下には、対話型のフィルタートグルとドロップダウンメニューがあり、特定の基準で商品を絞り込むことができます。

### 利用可能なフィルター

#### 在庫状況
在庫状況に基づいて商品をフィルタリング：
- **在庫あり** - 利用可能な在庫がある商品
- **在庫なし** - 在庫がゼロの商品
- **バックオーダー** - バックオーダー可能な商品

#### おすすめ商品
WooCommerceストアで「おすすめ」とマークされた商品のみを表示するトグル。

#### セール商品  
現在セール中または割引がある商品のみを表示するフィルター。

#### カテゴリー
カテゴリードロップダウンを使用して、割り当てられた商品カテゴリーで商品をフィルタリング。特定の部門や商品ラインの商品をすばやく見つけられます。

#### タグ
商品タグでフィルタリングし、WooCommerceストアで定義した特定の属性や特徴を持つアイテムを見つけます。

### フィルターの使用

- **フィルタートグル** - フィルターボタンをクリックしてアクティブにする（アクティブなフィルターは強調表示）
- **複数フィルター** - さらに絞り込むために複数のフィルターを組み合わせる
- **フィルタークリア** - アクティブなフィルターを再度クリックして無効にする
- **検索 + フィルター** - 正確な商品を特定するために検索フィールドとフィルターを併用

## バーコード設定

### 検索フィールド

検索機能は、設定されたバーコードフィールドを自動的に含めます。検索に使用されるバーコードフィールドは、POSの設定構成に依存します。

## よくある質問

<details>

<summary>
  _global_unique_idフィールドのバーコードとは？
</summary>

`_global_unique_id`フィールドは、ストア間でのバーコードの標準化を改善するために最近WooCommerceが追加した新しいバーコードフィールドです。

**主なポイント：**

- **最新の標準**: このフィールドはグローバルバーコード識別のために特別に設計されました
- **POS設定**: POS設定で `_global_unique_id` をバーコードフィールドとして設定できます
- **従来のものと新しいもの**: 従来のバーコード設定は `_sku` フィールドを使用しますが、将来のバージョンでは変更される予定です
- **柔軟性**: サードパーティのバーコードプラグインを使用している場合、任意の商品メタフィールドをバーコードフィールドとして設定できます
- **将来のデフォルト**: `_global_unique_id` は将来のPOSアップデートでデフォルトのバーコードフィールドになります

WordPressの管理エリアにあるPOS設定で、POSが使用するバーコードフィールドを設定できます。

</details>

<details>

<summary>
  検索しても一部の商品が表示されないのはなぜですか？
</summary>

WCPOSは、パフォーマンスを維持するために段階的な商品ダウンロードを使用しています。商品が表示されない場合：

1. **検索してみる** - これにより、POSがサーバー上でその商品を探します
2. **ダウンロードを待つ** - POSは小さなバッチで商品をダウンロードします
3. **再度検索** - ダウンロード後、商品は今後の検索に表示されます

このプロセスにより、何千もの商品があっても、POSを高速かつレスポンシブに保ちます。詳細は[商品同期](/products/sync)ガイドをご覧ください。

</details>

<details>

<summary>
  商品名やSKUの部分的な検索は可能ですか？
</summary>

はい！トークン化検索は前方一致を使用するため：

- 「blue」を検索すると、「blueberry」、「blue shirt」などの商品が見つかります
- 「ABC」を検索すると、「ABC123」、「ABC-XYZ」などのSKUが見つかります
- 完全な単語やコードを入力する必要はありません

検索は、最小限の入力で素早く商品を見つけるように設計されています。

</details>