---
title: "レシートテンプレート"
sidebar_label: "レシートテンプレート"
sidebar_position: 1
description: "印刷されたレシートやメールで送信されるレシートのためにHTML、CSS、およびテンプレート変数を使用してWCPOSレシートテンプレートをカスタマイズします。"
---

import Accordion from '@site/src/components/Accordion';
import AccordionItem from '@site/src/components/AccordionItem';

レシートテンプレートエディターでは、POSシステムから印刷されるレシートの外観と内容をカスタマイズできます。テンプレートエディターには次の場所に移動することでアクセスできます: `WP Admin > POS > Templates`

## 概要 {#overview}

テンプレートシステムは2種類のテンプレートを提供します：

- **デフォルトテンプレート**: プラグインおよびテーマファイルから自動的に検出されます。これらは削除できませんが、カスタムバージョンを作成するためにコピーできます。
- **カスタムテンプレート**: ユーザーが作成したテンプレートで、完全にカスタマイズ、編集、および管理が可能です。

## テンプレートエディターへのアクセス {#accessing-the-template-editor}

1. WordPress管理ダッシュボードに移動します
2. **POS > Templates** に行きます
3. 利用可能なテンプレートのリストが2つのセクションに整理されて表示されます：
   - **デフォルトテンプレート**（プラグイン/テーマファイルから）
   - **カスタムテンプレート**（あなたのカスタム作成物）

## デフォルトテンプレート {#default-templates}

システムは3つのソースからレシートテンプレートを自動的に検出します：

### テンプレートソース {#template-sources}

| ソース           | 説明                                               | 状態                                   |
| -------------- | ------------------------------------------------ | ------------------------------------ |
| **プラグイン**     | WooCommerce POSに含まれるコアレシートテンプレート       | いつでも利用可能                     |
| **Proプラグイン** | WooCommerce POS Proからの拡張テンプレート              | アクティブライセンスで利用可能      |
| **テーマ**      | アクティブテーマからのカスタムテンプレート             | テーマにテンプレートが含まれている場合は利用可能 |

### テンプレートアクション {#template-actions}

各デフォルトテンプレートに対して、以下の操作ができます：

- **プレビュー**: サンプルデータでテンプレートがどのように表示されるかを確認
- **コピー**: 編集できるカスタムコピーを作成
- **アクティブ化**: あなたのPOSのアクティブテンプレートとして設定

## カスタムテンプレートの作成 {#creating-custom-templates}

### 方法1: デフォルトテンプレートからコピー {#method-1-copy-from-default-template}

1. **デフォルトテンプレート**セクションでカスタマイズしたいテンプレートを見つける
2. **コピー**ボタンをクリック
3. カスタムテンプレートの名前を入力
4. **テンプレートをコピー**をクリック
5. 新しく作成されたカスタムテンプレートを編集

### 方法2: ゼロから作成 {#method-2-create-from-scratch}

1. ページの上部で**新しいテンプレートを追加**をクリック
2. テンプレート名を入力
3. テンプレートタイプとして**レシート**を選択
4. エディターでテンプレートのコーディングを開始

## テンプレートエディタの機能 {#template-editor-features}

テンプレートエディタは以下の機能を提供します：

### コードエディタ {#code-editor}

- **構文ハイライト**: コードの可読性を向上させるためのPHP構文ハイライト
- **行番号**: 簡単なナビゲーションとデバッグ
- **フルスクリーン編集**: 集中できる編集環境

### テンプレート設定パネル {#template-settings-panel}

- **言語**: 適切な構文ハイライトのためにPHPに設定
- **テンプレートタイプ**: レシートまたはレポートテンプレートの選択
- **状態**: 公開/下書きステータス管理
- **可視性**: テンプレートの可視性を制御

### テンプレートアクション {#template-actions}

- **プレビュー**: サンプルデータでテンプレートがどのようにレンダリングされるかを確認
- **アクティブとして設定**: このテンプレートをあなたのPOSのデフォルトにする
- **更新**: 変更を保存
- **ゴミ箱に移動**: カスタムテンプレートを削除

## テンプレート構造 {#template-structure}

レシートテンプレートはHTML出力を生成するPHPファイルです。基本的な構造は以下の通りです：

```php
<?php
/**
 * Custom Receipt Template
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit; // Exit if accessed directly
}
?>
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
    <meta charset="<?php bloginfo( 'charset' ); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* Your custom CSS styles */
        body { font-family: sans-serif; font-size: 14px; }
        .receipt-header { text-align: center; margin-bottom: 20px; }
        /* Add more styles as needed */
    </style>
</head>
<body>
    <!-- Your receipt content -->
    <div class="receipt-header">
        <h1><?php echo get_bloginfo( 'name' ); ?></h1>
        <p><?php echo get_bloginfo( 'description' ); ?></p>
    </div>

    <!-- Order details, items, totals, etc. -->

</body>
</html>
```

## 利用可能なテンプレート変数 {#available-template-variables}

カスタムテンプレートを作成する際に、さまざまなWordPressおよびWooCommerce関数とデータにアクセスすることができます：

### 店舗情報 {#store-information}

- `get_bloginfo( 'name' )` - 店舗名
- `get_bloginfo( 'description' )` - 店舗のキャッチフレーズ
- `get_bloginfo( 'url' )` - 店舗のURL

### 注文データ {#order-data}

現在の注文データは、テンプレートがレンダリングされるときに標準のWooCommerce注文関数を通じて利用可能です。

### WCPOS関数 {#wcpos-functions}

POS関連のデータや機能にアクセスするために、WCPOS特有の関数（`wcpos_`で始まる）を使用できます。

## ベストプラクティス {#best-practices}

### テンプレート開発 {#template-development}

1. **コピーから始める**: ゼロから作成するのではなく、常にデフォルトテンプレートをコピーして始めましょう
2. **徹底的にテストする**: アクティブ化する前にプレビューファンクションを使用してテンプレートをテストする
3. **バックアップを保持する**: カスタムテンプレートをエクスポートするか、コードのコピーを保持する
4. **モバイルフレンドリー**: 異なる画面サイズでテンプレートがうまく動作することを確認する

### コードの品質 {#code-quality}

1. **HTMLを検証する**: HTMLが正しく形成されていることを確認
2. **出力をエスケープする**: セキュリティのためにWordPressエスケープ関数を使用する
3. **エラーハンドリング**: PHPコードに適切なエラー検出を含める
4. **コメント**: 将来のリファレンスのためにカスタマイズを文書化する

### パフォーマンス {#performance}

1. **CSSを最適化する**: スタイルを最小限かつ効率的に保つ
2. **PHPを最小限にする**: テンプレート内での複雑なロジックを避ける
3. **印刷テスト**: テンプレートがレシートプリンターでうまく機能することを確認する

## トラブルシューティング {#troubleshooting}

### 一般的な問題 {#common-issues}

<Accordion>
  <AccordionItem question="テンプレートが変更を表示しない">

  - "更新"をクリックして変更を保存したことを確認
  - テンプレートが"アクティブ"として設定されていることを確認
  - キャッシュプラグインをクリアする

  </AccordionItem>

  <AccordionItem question="構文エラー">

  - 構文ハイライトを使用して問題を特定する
  - セミコロン、括弧、引用符が欠けていないか確認する
  - PHP構文を検証する

  </AccordionItem>

  <AccordionItem question="スタイリングの問題">

  - プレビューモードでCSSをテストする
  - スタイルがレシートプリンターと互換性があることを確認する
  - 印刷に優しいデザイン原則を考慮する

  </AccordionItem>

  <AccordionItem question="テンプレートが利用できない">

  - テンプレートタイプが"レシート"に設定されていることを確認
  - テンプレートの状態が"公開"であることを確認
  - 适切な権限があることを確認

  </AccordionItem>
</Accordion>

### ヘルプを得る {#getting-help}

テンプレートのカスタマイズに問題が発生した場合：

1. エラーメッセージのためにテンプレートプレビューを確認する
2. PHPエラーのためにWordPressデバッグログを確認する
3. まずデフォルトテンプレートのコピーでテストする
4. **AIアシスタンス**: 現代のAIツール（例: [Gemini](https://gemini.google.com), ChatGPT, Claude）は、これらのシンプルなWordPressテンプレートの手助けに優れています。あなたのテンプレートコードを貼り付けて、達成したいことを説明できます。
5. WooCommerce POSドキュメントを参照して、詳細なカスタマイズを行う

## 高度なカスタマイズ {#advanced-customisation}

レシートテンプレートをよりコントロールしたい上級ユーザーのために：

### テーマ統合 {#theme-integration}

カスタム`receipt.php`ファイルをテーマに配置することでデフォルトテンプレートをオーバーライドできます：

```
your-theme/woocommerce-pos/receipt.php
```

### フックとフィルター {#hooks-and-filters}

WooCommerce POSは、テンプレートカスタマイズのためのさまざまなフックおよびフィルターを提供します。利用可能なオプションについては開発者ドキュメントを参照してください。

### カスタムフィールド {#custom-fields}

適切なWordPressおよびWooCommerce関数を使用して、レシートテンプレートにカスタム注文フィールド、製品属性、および他のメタデータを含めることができます。