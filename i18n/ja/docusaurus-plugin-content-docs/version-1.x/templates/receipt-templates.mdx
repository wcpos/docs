---
title: レシートテンプレート
sidebar_label: レシートテンプレート
sidebar_position: 1
---

レシートテンプレートエディターでは、POSシステムから印刷されるレシートの外観と内容をカスタマイズできます。テンプレートエディターには、`WP Admin > POS > テンプレート`から移動してアクセスできます。

## 概要

テンプレートシステムには、次の2種類のテンプレートがあります：

- **デフォルトテンプレート**: プラグインやテーマファイルから自動的に検出されます。削除できませんが、カスタムバージョンを作成するためにコピーできます。
- **カスタムテンプレート**: ユーザーが作成し、完全にカスタマイズ、編集、管理できるテンプレート。

## テンプレートエディターへのアクセス

1. WordPress管理ダッシュボードに移動
2. **POS > テンプレート**に移動
3. 次の2つのセクションに整理された利用可能なテンプレートのリストが表示されます：
   - **デフォルトテンプレート**（プラグイン/テーマファイルから）
   - **カスタムテンプレート**（ユーザーが作成したもの）

## デフォルトテンプレート

システムは、次の3つのソースからレシートテンプレートを自動的に検出します：

### テンプレートソース

| ソース         | 説明                                         | ステータス                               |
| -------------- | --------------------------------------------------- | ------------------------------------ |
| **プラグイン**     | WooCommerce POSに含まれるコアレシートテンプレート | 常に利用可能                     |
| **Proプラグイン** | WooCommerce POS Proの拡張テンプレート          | アクティブなライセンスで利用可能        |
| **テーマ**      | アクティブなテーマのカスタムテンプレート              | テーマにテンプレートがある場合に利用可能 |

### テンプレートアクション

各デフォルトテンプレートで以下のことができます：

- **プレビュー**: サンプルデータでテンプレートの見た目を確認
- **コピー**: 編集可能なカスタムコピーを作成
- **アクティブ化**: POSのアクティブテンプレートとして設定

## カスタムテンプレートの作成

### 方法1：デフォルトテンプレートからコピー

1. **デフォルトテンプレート**セクションで、カスタマイズしたいテンプレートを探す
2. **コピー**ボタンをクリック
3. カスタムテンプレートの名前を入力
4. **テンプレートをコピー**をクリック
5. 新しく作成されたカスタムテンプレートを編集

### 方法2：最初から作成

1. ページ上部の**新しいテンプレートを追加**をクリック
2. テンプレート名を入力
3. テンプレートタイプとして**レシート**を選択
4. エディターでテンプレートのコーディングを開始

## テンプレートエディターの機能

テンプレートエディターには以下が用意されています：

### コードエディター

- **構文ハイライト**: コードの可読性を高めるPHP構文ハイライト
- **行番号**: 簡単なナビゲーションとデバッグ
- **全画面編集**: 集中できる編集環境

### テンプレート設定パネル

- **言語**: 適切な構文ハイライトのためにPHPに設定
- **テンプレートタイプ**: レシートまたはレポートテンプレートから選択
- **ステータス**: 公開/下書きステータスの管理
- **表示**: テンプレートの表示を制御

### テンプレートアクション

- **プレビュー**: サンプルデータでテンプレートのレンダリングを確認
- **アクティブに設定**: POSのデフォルトテンプレートにする
- **更新**: 変更を保存
- **ごみ箱に移動**: カスタムテンプレートを削除

## テンプレート構造

レシートテンプレートは、HTMLを出力するPHPファイルです。基本的な構造は次のとおりです：

```php
<?php
/**
 * カスタムレシートテンプレート
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit; // 直接アクセスされた場合は終了
}
?>
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
    <meta charset="<?php bloginfo( 'charset' ); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* カスタムCSSスタイル */
        body { font-family: sans-serif; font-size: 14px; }
        .receipt-header { text-align: center; margin-bottom: 20px; }
        /* 必要に応じてさらにスタイルを追加 */
    </style>
</head>
<body>
    <!-- レシートコンテンツ -->
    <div class="receipt-header">
        <h1><?php echo get_bloginfo( 'name' ); ?></h1>
        <p><?php echo get_bloginfo( 'description' ); ?></p>
    </div>

    <!-- 注文詳細、アイテム、合計など -->

</body>
</html>
```

## 利用可能なテンプレート変数

カスタムテンプレートを作成する際、さまざまなWordPressとWooCommerceの関数とデータにアクセスできます：

### 店舗情報

- `get_bloginfo( 'name' )` - 店舗名
- `get_bloginfo( 'description' )` - 店舗のキャッチフレーズ
- `get_bloginfo( 'url' )` - 店舗URL

### 注文データ

テンプレートがレンダリングされる際、標準のWooCommerce注文関数を通じて現在の注文データを利用できます。

### WCPOS関数

WCPOS固有の関数（`wcpos_`接頭辞）を使用して、POS関連のデータと機能にアクセスできます。

## ベストプラクティス

### テンプレート開発

1. **コピーから開始**: 最初から作成するのではなく、常にデフォルトテンプレートをコピーして開始
2. **徹底的にテスト**: アクティブ化する前にプレビュー機能でテンプレートをテスト
3. **バックアップを保持**: カスタムテンプレートをエクスポートするか、コードのコピーを保持
4. **モバイルフレンドリー**: 異なる画面サイズで適切に動作するテンプレートを作成

### コード品質

1. **HTMLを検証**: HTML構造を適切に保つ
2. **出力をエスケープ**: セキュリティのためにWordPressエスケープ関数を使用
3. **エラー処理**: PHPコードに適切なエラーチェックを含める
4. **コメント**: 将来の参照のためにカスタマイズを文書化

### パフォーマンス

1. **CSSを最適化**: スタイルをミニマルかつ効率的に保つ
2. **PHPを最小限に**: テンプレートの複雑なロジックを避ける
3. **印刷をテスト**: レシートプリンターで適切に動作することを確認

## トラブルシューティング

### よくある問題

**テンプレートに変更が表示されない**

- 変更を保存するために「更新」をクリックしたことを確認
- テンプレートが「アクティブ」に設定されていることを確認
- キャッシュプラグインをクリア

**構文エラー**

- 構文ハイライトを使用して問題を特定
- セミコロン、括弧、引用符の欠落を確認
- PHP構文を検証

**スタイリングの問題**

- プレビューモードでCSSをテスト
- レシートプリンターと互換性のあるスタイルであることを確認
- 印刷に適したデザイン原則を守る

**テンプレートが利用できない**

- テンプレートタイプが「レシート」に設定されていることを確認
- テンプレートステータスが「公開」であることを確認
- 適切な権限があることを確認

### サポートを受ける

テンプレートカスタマイズで問題が発生した場合：

1. エラーメッセージがないかテンプレートプレビューを確認
2. PHPエラーについてWordPressデバッグログを確認
3. 最初にデフォルトテンプレートのコピーでテスト
4. **AIサポート**: [Gemini](https://gemini.google.com)、ChatGPT、Claudeなどの最新AIツールは、これらのWordPressテンプレートの支援に優れています。テンプレートコードを貼り付けて、実現したいことを説明できます。
5. 高度なカスタマイズについてWooCommerce POSドキュメントを参照

## 高度なカスタマイズ

より詳細な制御が必要な上級ユーザー向け：

### テーマ統合

テーマに`receipt.php`ファイルを配置することで、デフォルトテンプレートを上書きできます：

```
your-theme/woocommerce-pos/receipt.php
```

### フックとフィルター

WooCommerce POSは、テンプレートカスタマイズ用のさまざまなフックとフィルターを提供します。利用可能なオプションについては、開発者ドキュメントを参照してください。

### カスタムフィールド

適切なWordPressとWooCommerce関数を使用して、レシートテンプレートにカスタム注文フィールド、製品属性、その他のメタデータを含めることができます。