---
title: "API02005: 権限不足"
sidebar_label: API02005
---

# API02005: 権限不足

## 意味

あなたのユーザーアカウントには、このアクションに必要な特定のWordPressの権限が不足しています。基本的なアクセスはありますが、実行しようとしている特定の操作には追加の権限が必要です。

## 一般的な原因

- **制限されたユーザーロール** — あなたのロールには必要なすべての権限が含まれていません
- **権限が割り当てられていない** — 特定の権限がロールに欠けています
- **プラグインの制限** — セキュリティプラグインが権限を制限しています
- **カスタムロールの問題** — カスタムロールに権限が不足しています

## サーバーエラーマッピング

このエラーコードは、サーバーが以下を返す際にトリガーされます：

| サーバーコード | ソース |
|-------------|--------|
| `rest_forbidden` | WordPress REST API |
| `rest_cannot_create` | WordPress REST API |
| `rest_cannot_edit` | WordPress REST API |
| `rest_cannot_delete` | WordPress REST API |
| `woocommerce_rest_cannot_create` | WooCommerce REST API |
| `woocommerce_rest_cannot_edit` | WooCommerce REST API |
| `woocommerce_rest_cannot_delete` | WooCommerce REST API |
| HTTP 403 | 任意のサーバーレスポンス (フォールバック) |

## 解決方法

### 1. 必要な権限を確認

POSの操作に必要な一般的な権限：
- `manage_woocommerce` — WooCommerceの一般的な管理
- `edit_shop_orders` — 注文の作成と編集
- `edit_products` — 製品情報の変更
- `edit_users` — 顧客アカウントの管理

### 2. ユーザーロールをアップグレード

管理者に、より高い権限を持つロールの割り当てを依頼：
- **ショップマネージャー** — WooCommerceへの完全なアクセス
- **管理者** — サイトへの完全なアクセス

### 3. 特定の権限を追加

カスタムロールが必要な場合、必要な権限を追加：

```php
// 例：カスタムロールにPOSの権限を追加
$role = get_role('your_custom_role');
$role->add_cap('manage_woocommerce');
$role->add_cap('edit_shop_orders');
```

### 4. プラグインの競合を確認

一部のセキュリティまたはロール管理プラグインが権限を制限する可能性があります：
- プラグインの設定を確認
- 権限フィルターを確認
- テストするために一時的に無効化

## 関連エラー

- [API02004](./API02004) — ユーザー未承認
- [API02010](./API02010) — 認証が必要