---
title: "API04001: レスポンス形式が無効です"
sidebar_label: API04001
---

# API04001: レスポンス形式が無効です

## この意味

サーバーは応答しましたが、レスポンス形式がPOSの期待するものではありません。サーバーはJSONデータを返す必要がありますが、別のものが受信されました。

## 一般的な原因

- **PHP エラーの表示** — JSONの前にPHPエラーが出力されている
- **プラグインの競合** — 別のプラグインがコンテンツを出力している
- **メンテナンスモード** — サイトがメンテナンスページを表示している
- **不正なコンテンツタイプ** — サーバーがJSONの代わりにHTMLを送信している
- **キャッシュの問題** — キャッシュされたエラーページが提供されている

## 修正方法

### 1. サイトを確認

ブラウザでWordPressサイトにアクセス:
- 通常に表示されているか？
- 表示されているエラーはあるか？
- メンテナンスモードになっていないか？

### 2. PHPエラーを確認

`wp-config.php` で、一時的にデバッグを有効にします:

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

`wp-content/debug.log` でエラーを確認します。

### 3. REST APIを直接テスト

ブラウザで `https://yoursite.com/wp-json/` にアクセス:
- JSONデータが返されるはず
- HTMLやエラーが表示される場合は問題あり
- プラグイン関連の出力を確認

### 4. 一時的にキャッシュを無効化

キャッシュプラグインが古いレスポンスを提供する可能性:
- すべてのキャッシュをクリア
- キャッシュプラグインを一時的に無効化
- REST APIをキャッシュから除外

### 5. プラグインの競合を確認

すべてのページでコンテンツを出力するプラグイン:
1. 必須でないプラグインをすべて無効化
2. POSをテスト
3. プラグインを1つずつ再有効化

## 関連エラー

- [API04003](./API04003) — 不正なJSONレスポンス
- [API05005](./API05005) — プラグインが見つかりません