---
title: "API04002: 予期しないレスポンスコード"
sidebar_label: API04002
---

# API04002: 予期しないレスポンスコード

## これは何を意味するのか

サーバーは、このリクエストには予期しないHTTPステータスコードを返しました。一般的なコードには500（サーバーエラー）、403（禁止）、404（見つかりません）、などがあります。

## 一般的な原因

- **500 内部サーバーエラー** — PHPがクラッシュしたか、エラーが発生した
- **403 禁止** — セキュリティ設定によるアクセス拒否
- **404 見つかりません** — エンドポイントが存在しない
- **502/503/504** — サーバーゲートウェイまたは可用性の問題

## 修正方法

### 500エラー（サーバーエラー）の場合

1. PHPエラーログを確認する
2. PHPメモリ制限を増加させる
3. プラグインの競合を探す
4. `wp-content/debug.log`を確認する

### 403エラー（禁止）の場合

1. セキュリティプラグインの設定を確認する（Wordfence、Sucuriなど）
2. POSまたはあなたのIPをホワイトリストに登録する
3. ブロックルールのために`.htaccess`を確認する
4. ModSecurityがリクエストをブロックしていないか確認する

### 404エラー（見つかりません）の場合

1. WCPOSプラグインがアクティブであることを確認する
2. WordPressのパーマリンクをフラッシュする（設定 → パーマリンク → 保存）
3. REST APIが有効になっているか確認する
4. URL設定を確認する

### 502/503/504エラー（ゲートウェイの問題）の場合

1. ホスティングプロバイダーに連絡する
2. サーバーが復旧するのを待つ
3. サイトが高負荷にあるか確認する
4. サーバーが稼働していることを確認する

### 一般的なトラブルシューティング

1. サイトに直接アクセスしてみる
2. ホスティングコントロールパネルで問題を確認する
3. サーバーアクセスログを確認する
4. 必要に応じてホスティングサポートに連絡する

## 関連エラー

- [API04001](./API04001) — 無効なレスポンスフォーマット
- [API01008](./API01008) — サイトが利用できません