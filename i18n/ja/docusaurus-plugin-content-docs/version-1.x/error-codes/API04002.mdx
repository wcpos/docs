---
title: "API04002: 予期せぬレスポンスコード"
sidebar_label: API04002
---

# API04002: 予期せぬレスポンスコード

## 意味

サーバーが、このリクエストに対して予期していないHTTPステータスコードを返しました。一般的なコードには、500（サーバーエラー）、403（禁止）、404（見つからない）などがあります。

## 一般的な原因

- **500 内部サーバーエラー** — PHPがクラッシュまたはエラーに遭遇
- **403 禁止** — セキュリティ設定によりアクセス拒否
- **404 見つからない** — エンドポイントが存在しない
- **502/503/504** — サーバーゲートウェイまたは可用性の問題

## 修正方法

### 500エラー（サーバーエラー）の場合

1. PHPエラーログを確認
2. PHPメモリ制限を増やす
3. プラグインの競合を探す
4. `wp-content/debug.log`を確認

### 403エラー（禁止）の場合

1. セキュリティプラグインの設定を確認（Wordfence、Sucuriなど）
2. POSまたはIPをホワイトリストに追加
3. `.htaccess`のブロッキングルールを確認
4. ModSecurityがリクエストをブロックしていないか確認

### 404エラー（見つからない）の場合

1. WCPOSプラグインが有効であることを確認
2. WordPressのパーマリンクをフラッシュ（設定 → パーマリンク → 保存）
3. REST APIが有効になっているか確認
4. URL設定を確認

### 502/503/504エラー（ゲートウェイの問題）の場合

1. ホスティングプロバイダに連絡
2. サーバーの回復を待つ
3. サイトが高負荷でないか確認
4. サーバーが正常に動作しているか確認

### 一般的なトラブルシューティング

1. サイトに直接アクセスしてみる
2. ホスティングコントロールパネルで問題を確認
3. サーバーアクセスログを確認
4. 必要に応じてホスティングサポートに連絡

## 関連エラー

- [API04001](./API04001) — レスポンス形式が無効
- [API01008](./API01008) — ウェブサイト利用不可