---
title: WooCommerceのREST APIを理解する
sidebar_label: WooCommerce REST API
sidebar_position: 1
---

import LocalizedSVG from "@site/src/components/LocalizedSVG";
import Image from "@theme/IdealImage";

**WooCommerce REST API**は、ストア管理者がWooCommerceストアを他のアプリケーションやサービスに接続できる標準化された「チャンネル」のようなものです。

仕組みを簡単に説明すると：

1. WooCommerceストアと外部アプリケーション間のブリッジとして機能し、データの通信と共有を可能にします。

2. APIは特定の**エンドポイント**にリクエストを送信することで動作します。これらは異なる種類のストアデータ用の「チャンネル」と考えてください。例えば、商品、注文、顧客用のエンドポイントがあります。

3. 外部アプリケーションはこれらのエンドポイントを使用して：

- 情報を取得（商品リストの取得など）
- 新しいデータを追加（新しい注文の作成など）
- 既存の情報を更新（商品の価格変更など）
- データを削除（古い商品の削除など）

従来のWordPressプラグインで多く使用されるPHPのフックやフィルターに頼るのではなく、**JSON**と呼ばれる構造化された予測可能な形式でデータの送受信を行います。

<LocalizedSVG svgName="wc-rest-api" />

## POSでJSONデータを表示する

POSが「見ている」内容を理解するために、インターフェースの多くの部分にJSONビューを組み込んでいます。
例えば、POSで注文メタや明細行アイテムを編集する際、以下のスクリーンショットのようなJSONタブが表示されます。

<div class="image-container">
  <Image
    alt="POSで明細行アイテムを編集"
    img="/img/edit-line-item.png"
    style={{ maxHeight: 400 }}
  />
  <p class="image-caption">POSで明細行アイテムのJSONデータを表示</p>
</div>

ブラウザには、ブラウザとサーバー間で送受信されるデータ（JSONデータを含む）を監視できるネットワークインスペクターというツールも含まれています。

<div class="image-container">
  <Image
    alt="ブラウザのネットワークインスペクター"
    img="/img/network-inspector.png"
  />
  <p class="image-caption">ブラウザのネットワークインスペクター</p>
</div>

## なぜ一部のプラグインがPOSで動作しないのか？

WCPOSは、WooCommerceストアからREST APIを通じて商品、注文、顧客データをダウンロードします。
そして、インターネット接続が不安定な場合でも動作を継続できるよう、それらのデータのローカルコピーを保持します。
このアプローチにより、POSは忙しいチェックアウト環境でより高速で信頼性の高いものになります。

しかし、これは私たちのPOSがサイト上でリアルタイムに発生する変更を「見る」ことができないことを意味します。例えば：

<table>
  <tr>
    <th style={{ width: "200px" }}>プラグインの種類</th>
    <th>動作しない理由</th>
  </tr>
  <tr>
    <td>動的な価格設定</td>
    <td>
      ストア上の別のプラグインが、ログインしている顧客ごとにユニークな価格を計算する場合、POSはその個人化された価格を自動的に取得しません。
    </td>
  </tr>
  <tr>
    <td>商品アドオン</td>
    <td>
      ストア上の別のプラグインが追加の商品データを追加する場合、POSはそのデータを自動的に取得しません。POSはREST APIを通じて公開されているデータのみを取得します。
    </td>
  </tr>
</table>

## 次のステップ

より技術的な詳細については、公式のWooCommerce REST APIドキュメントをご覧ください：
https://woocommerce.github.io/woocommerce-rest-api-docs/