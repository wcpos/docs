---
title: "API04003: Fehlerhaft formatierte JSON-Antwort"
sidebar_label: API04003
---

# API04003: Fehlerhaft formatierte JSON-Antwort

## Was Das Bedeutet

Der Server hat Daten zurückgegeben, die wie JSON aussehen, aber beschädigt oder ungültig sind. Die POS konnte die Antwort nicht analysieren, da die JSON-Syntax fehlerhaft ist.

## Häufige Ursachen

- **PHP-Hinweise/Warnungen** — PHP-Ausgabe vor dem JSON
- **BOM (Byte-Reihenfolge-Markierung)** — Unsichtbare Zeichen am Dateianfang
- **Kodierungsprobleme** — Zeichenkodierungsfehler
- **Abgeschnittene Antwort** — Antwort während der Übertragung unterbrochen
- **Plugin-Ausgabe** — Ein Plugin hat Nicht-JSON-Inhalt hinzugefügt

## Wie Sie Dies Beheben

### 1. PHP-Hinweise Überprüfen

PHP-Hinweise/Warnungen vor JSON unterbrechen die Verarbeitung:

In `wp-config.php`:
```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

Überprüfen Sie `wp-content/debug.log` und beheben Sie alle Probleme.

### 2. BOM-Zeichen Überprüfen

Einige Texteditoren fügen unsichtbare BOM-Zeichen hinzu:
- PHP-Dateien ohne BOM erneut speichern
- UTF-8 ohne BOM-Kodierung verwenden
- Kürzlich bearbeitete Dateien überprüfen

### 3. Vollständige Antwort Verifizieren

Bei abgeschnittenen Antworten:
- PHP-Ausgabepuffereinstellungen prüfen
- `output_buffering` in php.ini erhöhen
- Timeout-Probleme überprüfen

### 4. API Direkt Testen

Im Browser oder mit curl:
```bash
curl -v https://yoursite.com/wp-json/wcpos/v1/
```

Auf unerwartete Inhalte vor dem JSON achten.

### 5. Zeichenkodierung Überprüfen

Sicherstellen, dass Datenbank und PHP UTF-8 verwenden:
- Charset-Einstellungen in `wp-config.php` prüfen
- Datenbanktabellen auf UTF-8 überprüfen
- Nach Sonderzeichen suchen, die Probleme verursachen

## Verwandte Fehler

- [API04001](./API04001) — Ungültiges Antwortformat
- [API04005](./API04005) — JSON-Wiederherstellung versucht