---
title: Architektur
sidebar_label: Architektur
sidebar_position: 2
description: Technische Architektur von WCPOS, die erkl√§rt, wie der POS-Client mit der WooCommerce REST API kommuniziert.
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Diese Seite erkl√§rt die technische Architektur von WCPOS f√ºr Entwickler und fortgeschrittene Benutzer.

## Zweiteiliges System

WCPOS ist als zweigeteiltes System konzipiert:

1. **PHP-Plugin:** Auf Ihrem Server gehostet, ist dies ein relativ kleines Plugin, das die [WooCommerce REST API](/reference/wc-rest-api) erweitert.

2. **JavaScript-Client:** Dieser l√§uft lokal in Ihrem Browser oder in der Desktop-App und sp√§ter in iOS- und Android-Apps.

Sie k√∂nnen es sich als zwei separate Welten vorstellen:

- Die _PHP-Welt_ ist der Ort, an dem das Datenmanagement mit WordPress und WooCommerce erfolgt.
- Die _JavaScript-Welt_ repliziert Ihren WooCommerce-Shop lokal, optimiert f√ºr schnelles Suchen und Offline-Nutzung.

<LocalizedSVG svgName="pos-client-woo-server" />

## Datensynchronisierung

Daten werden von WooCommerce √ºber die [WooCommerce REST API](https://woocommerce.github.io/woocommerce-rest-api-docs/) abgerufen. Dies bedeutet, dass der POS jedes Produkt, jede Variante, jede Produktkategorie, jeden Kunden, jeden Steuersatz und mehr herunterladen muss, um sie lokal zu speichern.

Obwohl dies anfangs zeitaufwendig sein kann, sind sie nach dem Herunterladen sofort verf√ºgbar, ohne dass st√§ndig vom Server abgerufen werden muss.

### Was wird synchronisiert?

- Produkte und Variationen
- Produktkategorien und -tags
- Kunden
- Steuers√§tze und Steuerklassen
- Zahlungsmethoden (f√ºr die Zahlung)
- Bestellungen (f√ºr die Bestellhistorie in Pro)

### Synchronisierungsstrategie

WCPOS verwendet eine inkrementelle Synchronisierungsstrategie:

1. **Erst-Synchronisierung:** L√§dt alle Daten beim ersten Laden herunter
2. **Inkrementelle Updates:** Holt nur √Ñnderungen seit der letzten Synchronisierung
3. **Hintergrund-Synchronisierung:** √úberpr√ºft regelm√§√üig auf Updates
4. **Manuelle Synchronisierung:** Der Benutzer kann jederzeit eine Synchronisierung ausl√∂sen

## Vor- und Nachteile der Architektur

| Gut üòä | Schlecht üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| Das Suchen lokaler Daten erfolgt sofort | Die Daten synchron zu halten ist herausfordernd |
| Zwischengespeicherte Daten sind offline verf√ºgbar | Begrenzungen durch die WooCommerce REST API |
| M√∂glichkeit zur Erstellung besserer nativer Apps f√ºr Desktop, iOS und Android | WordPress-Themen und Hooks k√∂nnen die POS-App nicht anpassen |

## Lokale Datenbank

Der JavaScript-Client speichert Daten in IndexedDB, einer browserbasierten Datenbank. Dies bietet:

- **Persistenz:** Daten √ºberstehen Browserneustarts
- **Leistung:** Schnelle Abfragen ohne Netzwerkverz√∂gerung
- **Offline-Browsing:** Zwischengespeicherte Daten bleiben ohne Internetzugang zug√§nglich

## Checkout-Architektur

Der Checkout-Prozess verwendet ein iframe/webview, das die WooCommerce Bestellseite l√§dt. Dieser Ansatz:

- **Nutzen bestehender Zahlungsmethoden:** Jede WooCommerce-Zahlungsmethode kann im POS verwendet werden
- **Sichert die Sicherheit:** Die Zahlungsabwicklung erfolgt √ºber die sichere Infrastruktur von WooCommerce
- **Reduziert die Komplexit√§t:** Keine Notwendigkeit, Integrationen von Zahlungsmethoden neu zu implementieren

## API-Erweiterungen

Das PHP-Plugin erweitert die WooCommerce REST API mit zus√§tzlichen Endpunkten f√ºr POS-spezifische Funktionen. Weitere Informationen finden Sie in der [WooCommerce REST API](/reference/wc-rest-api).