---
title: Architektur
sidebar_label: Architektur
sidebar_position: 2
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Diese Seite erkl√§rt die technische Architektur von WCPOS f√ºr Entwickler und fortgeschrittene Benutzer.

## Zweiseitiges System

WCPOS ist als zweiseitiges System konzipiert:

1. **PHP-Plugin:** Auf Ihrem Server gehostet, ist dies ein relativ kleines Plugin, das die [WooCommerce REST API](/reference/wc-rest-api) erweitert.

2. **JavaScript-Client:** Dieser l√§uft lokal in Ihrem Browser oder der Desktop-App und sp√§ter auf iOS- und Android-Apps.

Sie k√∂nnen es sich als zwei getrennte Welten vorstellen:

- Die _PHP-Welt_ ist der Ort, an dem Datenverwaltung mit WordPress und WooCommerce stattfindet.
- Die _JavaScript-Welt_ repliziert Ihren WooCommerce-Shop lokal, optimiert f√ºr schnelle Suche und Offline-Nutzung.

<LocalizedSVG svgName="pos-client-woo-server" />

## Datensynchronisation

Daten werden √ºber die [WooCommerce REST API](https://woocommerce.github.io/woocommerce-rest-api-docs/) abgerufen. Das bedeutet, dass der POS alle Produkte, Variationen, Produktkategorien, Kunden, Steuers√§tze und mehr herunterl√§dt und lokal speichert.

Obwohl dies anf√§nglich zeitaufwendig sein kann, sind sie einmal heruntergeladen sofort verf√ºgbar, ohne dass sie st√§ndig vom Server abgerufen werden m√ºssen.

### Was wird synchronisiert?

- Produkte und Variationen
- Produktkategorien und Tags
- Kunden
- Steuers√§tze und Steuerklassen
- Zahlungsgateways (f√ºr Checkout)
- Bestellungen (f√ºr Bestellhistorie in Pro)

### Synchronisationsstrategie

WCPOS verwendet eine inkrementelle Synchronisationsstrategie:

1. **Initiale Synchronisation:** L√§dt alle Daten beim ersten Laden
2. **Inkrementelle Updates:** Ruft nur √Ñnderungen seit der letzten Synchronisation ab
3. **Hintergrund-Sync:** Pr√ºft regelm√§√üig auf Updates
4. **Manuelle Synchronisation:** Benutzer kann Synchronisation jederzeit ausl√∂sen

## Architektur Vor- und Nachteile

| Gut üòä | Schlecht üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| Suche in lokalen Daten ist sofort | Daten synchron zu halten ist herausfordernd |
| Zwischengespeicherte Daten offline verf√ºgbar | Durch WooCommerce REST API eingeschr√§nkt |
| M√∂glichkeit besserer nativer Apps f√ºr Desktop, iOS und Android | WordPress-Themes und Hooks k√∂nnen die POS-App nicht anpassen |

## Lokale Datenbank

Der JavaScript-Client speichert Daten in IndexedDB, einer browserbasierten Datenbank. Dies bietet:

- **Persistenz:** Daten √ºberleben Browser-Neustarts
- **Leistung:** Schnelle Abfragen ohne Netzwerk-Latenz
- **Offline-Browsen:** Zwischengespeicherte Daten bleiben ohne Internet zug√§nglich

## Checkout-Architektur

Der Checkout-Prozess verwendet einen iFrame/Webview, der die WooCommerce Order Pay-Seite l√§dt. Dieser Ansatz:

- **Nutzt vorhandene Zahlungsgateways:** Jedes WooCommerce-Zahlungsgateway kann im POS funktionieren
- **Wahrt Sicherheit:** Zahlungsabwicklung erfolgt √ºber WooCommerce's sichere Infrastruktur
- **Reduziert Komplexit√§t:** Keine Neuimplementierung von Zahlungsgateway-Integrationen notwendig

## API-Erweiterungen

Das PHP-Plugin erweitert die WooCommerce REST API um zus√§tzliche Endpunkte f√ºr POS-spezifische Funktionalit√§t. Weitere Details in der [WooCommerce REST API](/reference/wc-rest-api).