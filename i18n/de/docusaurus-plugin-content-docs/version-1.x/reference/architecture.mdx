---
title: Architektur
sidebar_label: Architektur
sidebar_position: 2
---

import LocalizedSVG from '@site/src/components/LocalizedSVG';

Diese Seite erkl√§rt die technische Architektur von WCPOS f√ºr Entwickler und fortgeschrittene Nutzer.

## Zweiteiliges System

WCPOS ist als zweiteiliges System konzipiert:

1. **PHP-Plugin:** Auf Ihrem Server gehostet, handelt es sich um ein relativ kleines Plugin, das die [WooCommerce REST API](/reference/wc-rest-api) erweitert.

2. **JavaScript-Client:** Dieser l√§uft lokal in Ihrem Browser oder in der Desktop-App und sp√§ter in iOS- und Android-Apps.

Sie k√∂nnen es sich als zwei separate Welten vorstellen:

- Die _PHP-Welt_ ist der Ort, an dem die Datenverwaltung mithilfe von WordPress und WooCommerce erfolgt.
- Die _JavaScript-Welt_ repliziert Ihren WooCommerce-Shop lokal, optimiert f√ºr schnelles Suchen und Offline-Nutzung.

<LocalizedSVG svgName="pos-client-woo-server" />

## Datensynchronisierung

Daten werden von WooCommerce √ºber die [WooCommerce REST API](https://woocommerce.github.io/woocommerce-rest-api-docs/) abgerufen. Das bedeutet, dass das POS jedes Produkt, jede Variation, jede Produktkategorie, jeden Kunden, jeden Steuersatz und mehr herunterladen muss, um diese lokal zu speichern.

Obwohl dies anfangs zeitaufw√§ndig sein kann, sind sie, einmal heruntergeladen, sofort verf√ºgbar, ohne st√§ndig vom Server abrufen zu m√ºssen.

### Was wird synchronisiert?

- Produkte und Variationen
- Produktkategorien und -tags
- Kunden
- Steuers√§tze und Steuerklassen
- Zahlungsanbieter (f√ºr den Checkout)
- Bestellungen (f√ºr die Bestellhistorie in Pro)

### Synchronisierungsstrategie

WCPOS verwendet eine inkrementelle Synchronisierungsstrategie:

1. **Erste Synchronisierung:** L√§dt alle Daten beim ersten Laden herunter
2. **Inkrementelle Aktualisierungen:** Holt nur die √Ñnderungen seit der letzten Synchronisierung
3. **Hintergrundsynchronisierung:** √úberpr√ºft regelm√§√üig auf Updates
4. **Manuelle Synchronisierung:** Der Nutzer kann jederzeit eine Synchronisierung ausl√∂sen

## Vor- und Nachteile der Architektur

| Gut üòä | Schlecht üòü |
| ------------------------------------------------------------------ | -------------------------------------------------------- |
| Das Suchen lokaler Daten ist sofort | Die Datensynchronisierung ist herausfordernd |
| Zwischengespeicherte Daten sind offline verf√ºgbar | Durch die WooCommerce REST API begrenzt |
| M√∂glichkeit, bessere native Apps f√ºr Desktop, iOS und Android zu erstellen | WordPress-Themes und Hooks k√∂nnen die POS-App nicht anpassen |

## Lokale Datenbank

Der JavaScript-Client speichert Daten in IndexedDB, einer browserbasierten Datenbank. Dies bietet:

- **Persistenz:** Daten √ºberstehen Neustarts des Browsers
- **Leistung:** Schnelle Abfragen ohne Netzwerkverz√∂gerung
- **Offline-Browsing:** Zwischengespeicherte Daten bleiben ohne Internetzugang zug√§nglich

## Checkout-Architektur

Der Checkout-Prozess verwendet ein iframe/webview, das die WooCommerce-Bestellzahlungsseite l√§dt. Dieser Ansatz:

- **Nutzt bestehende Zahlungsanbieter:** Jeder WooCommerce-Zahlungsanbieter kann im POS verwendet werden
- **Bewahrt die Sicherheit:** Die Zahlungsabwicklung erfolgt √ºber die sichere Infrastruktur von WooCommerce
- **Reduziert die Komplexit√§t:** Keine Notwendigkeit, Zahlungsanbieter-Integrationen neu zu implementieren

## API-Erweiterungen

Das PHP-Plugin erweitert die WooCommerce REST API mit zus√§tzlichen Endpunkten f√ºr POS-spezifische Funktionen. Siehe [WooCommerce REST API](/reference/wc-rest-api) f√ºr Details.